System.register("chunks:///_virtual/ArrayExtensionMethods.ts",["cc","./CubismGeometry.ts","./CubismVector.ts"],(function(e){var t,n,r;return{setters:[function(e){t=e.cclegacy},function(e){n=e.CubismBounds},function(e){r=e.CubismVector3}],execute:function(){var s;e("ArrayExtensionMethods",void 0),t._RF.push({},"1c0c4DY8aJF64FQFOpPcOa5","ArrayExtensionMethods",void 0),(s||(s=e("ArrayExtensionMethods",{}))).getMeshRendererBounds=function(e){for(var t=e[0].mesh.calculateBounds(),s=t.min(),o=s.x,c=s.y,u=s.z,a=t.max(),i=a.x,m=a.y,d=a.z,y=1;y<e.length;y++){var x=e[y].mesh.calculateBounds(),h=x.min(),l=h.x,v=h.y;l<o&&(o=l),v<c&&(c=v);var f=x.max(),b=f.x,g=f.y;b>i&&(i=b),g>m&&(m=g)}var p=new r(o,c,u),F=new r(i,m,d).subtract(p);return n.fromVector(F.multiplySingle(.5).add(p),F)},t._RF.pop()}}}));

System.register("chunks:///_virtual/ArrayExtensionMethods2.ts",["cc"],(function(r){var e,n;return{setters:[function(r){e=r.cclegacy,n=r.math}],execute:function(){var a,t;e._RF.push({},"60df1i8+jVI4Jf37zgsKMr7","ArrayExtensionMethods",void 0),(t=a||(a={})).findByIdFromParameters=function(r,e){for(var n=0;n<r.length;++n)if(r[n].id==e)return r[n];return null},t.reviveParameters=function(r,e){if(null!=e){r.sort((function(r,e){return r.unmanagedIndex-e.unmanagedIndex}));for(var n=0;n<r.length;++n)r[n].revive(e)}},t.writeToModelFromParameters=function(r,e){for(var n=e.parameters.values,a=0;a<r.length;a++)n[r[a].unmanagedIndex]=r[a].value},t.readFromParameters=function(r,e){var n;if(null!=(null==(n=e.parameters)?void 0:n.values))for(var a=e.parameters.values,t=0;t<r.length;t++)r[t].value=a[r[t].unmanagedIndex]},t.findByIdFromParts=function(r,e){for(var n=0;n<r.length;++n)if(r[n].id==e)return r[n];return null},t.reviveParts=function(r,e){if(null!=e){r.sort((function(r,e){return r.unmanagedIndex-e.unmanagedIndex}));for(var n=0;n<r.length;++n)r[n].revive(e)}},t.writeToModelFromParts=function(r,e){for(var n=e.parts.opacities,a=0;a<r.length;a++)n[r[a].unmanagedIndex]=r[a].opacity},t.findByIdFromDrawables=function(r,e){for(var n=0;n<r.length;++n)if(r[n].id==e)return r[n];return null},t.reviveDrawables=function(r,e){if(null!=e){r.sort((function(r,e){return r.unmanagedIndex-e.unmanagedIndex}));for(var n=0;n<r.length;++n)r[n].revive(e)}},t.readFromArrayCubismDynamicDrawableData=function(r,e){for(var a=e.drawables,t=a.dynamicFlags,o=a.opacities,i=a.drawOrders,l=a.renderOrders,u=a.vertexPositions,s=a.multiplyColors,d=a.screenColors,f=0;f<r.length;f++){var v=r[f];if(v.flags=t[f],v.opacity=o[f],v.drawOrder=i[f],v.renderOrder=l[f],v.areVertexPositionsDirty){for(var c=0;c<v.vertexPositions.length;c++)v.vertexPositions[c]=new n.Vec3(u[f][2*c+0],u[f][2*c+1]);if(v.isBlendColorDirty){var m=4*f;v.multiplyColor=new n.Color(255*s[m],255*s[m+1],255*s[m+2],255*s[m+3]),v.screenColor=new n.Color(255*d[m],255*d[m+1],255*d[m+2],255*d[m+3])}}}a.resetDynamicFlags()};r("default",a);e._RF.pop()}}}));

System.register("chunks:///_virtual/ComponentExtensionMethods.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){var t,o;e._RF.push({},"56a64y2cJxDI45XpW7JBWij","ComponentExtensionMethods",void 0),(o=t||(t={})).getComponentsMany=function(n,e){for(var t=new Array,o=0;o<n.length;o++){var r=n[o].getComponents(e);0!=r.length&&(t=t.concat(r))}return t},o.addComponentEach=function(n,e){for(var t=new Array(n.length),o=0;o<n.length;++o)t[o]=n[o].node.addComponent(e),console.assert(t[o]);return t};n("default",t);e._RF.pop()}}}));

System.register("chunks:///_virtual/ComponentExtensionMethods2.ts",["cc","./CubismModel.ts"],(function(n){var e,t,o;return{setters:[function(n){e=n.cclegacy,t=n.Node},function(n){o=n.default}],execute:function(){var u;e._RF.push({},"fa383iCMhZIlKPW+c8CT62l","ComponentExtensionMethods",void 0),(u||(u={})).findCubismModel=function(n,e){if(void 0===e&&(e=!1),null==n)return null;var u=n.getComponent(o);if(null!=u)return u;if(e)for(var r=n.node.parent;null!=r&&t.isNode(r);r=r.parent)if(null!=(u=r.getComponent(o)))return u;return null};n("default",u);e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismAudioMouthInput.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./CubismAudioSamplingQuality.ts","./CubismMouthController.ts"],(function(t){var i,e,n,a,r,s,u,l,o,p,c,h,m,f,g,y,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass,s=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){l=t.cclegacy,o=t._decorator,p=t.AudioSource,c=t.Enum,h=t.CCFloat,m=t.math,f=t.Component},function(t){g=t.MathExtensions},function(t){y=t.default},function(t){d=t.default}],execute:function(){var b,v,I,z,R,C,_,k,M,w,A,D;l._RF.push({},"ea145WcDapI5IqAGA53USF0","CubismAudioMouthInput",void 0);var S=o.ccclass,x=o.property,F=o.requireComponent;t("default",(b=S("CubismAudioMouthInput"),v=F(d),I=x(p),z=x({type:c(y)}),R=x({type:h,slide:!0,range:[1,10,.01]}),C=x({type:h,slide:!0,range:[0,1,.01]}),b(_=v((M=i((k=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"audioInput",M,a(i)),n(i,"samplingQuality",w,a(i)),n(i,"gain",A,a(i)),n(i,"smoothing",D,a(i)),i._samples=null,i._lastRms=0,i.velocityBuffer=0,i._target=null,i.isInitializing=!1,i.sampleRate=0,i}e(i,t);var l=i.prototype;return l.tryInitialize=function(){this.isInitializing||this.isInitialized||(this.initSamples(),this.target=this.getComponent(d))},l.initSamples=function(){var t=s(u().mark((function t(){var i,e,n,a,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.audioInput){t.next=2;break}return t.abrupt("return");case 2:return this.isInitializing=!0,i=this.audioInput.getSampleRate(),e=this.audioInput.getPCMData(0),t.next=7,Promise.all([i,e]);case 7:n=t.sent,a=n[0],null!=(r=n[1])&&(this.samples=r,this.sampleRate=a>0?a:0),this.isInitializing=!1;case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.update=function(t){var i=this.audioInput,e=this.samples,n=this.target,a=this.sampleRate,r=this.gain,s=this.smoothing;if(null!=i&&null!=n&&null!=e&&0!=a){var u=Math.trunc,l=Math.sqrt,o=u(i.currentTime*this.sampleRate),p=256;switch(this.samplingQuality){case y.veryHigh:p=256;break;case y.maximum:p=512;break;default:p=256}for(var c=0,h=0;h<p;h++){var f=e.getData((o+h)%e.length);c+=f*f}var d=l(c/p)*r;d=m.clamp01(d);var b=g.Float.smoothDamp(this.lastRms,d,this.velocityBuffer,.1*s,void 0,t);d=b[0],this.velocityBuffer=b[1],n.mouthOpening=d,this.lastRms=d}},l.onEnable=function(){this.tryInitialize()},r(i,[{key:"samples",get:function(){return this._samples},set:function(t){this._samples=t}},{key:"lastRms",get:function(){return this._lastRms},set:function(t){this._lastRms=t}},{key:"target",get:function(){return this._target},set:function(t){this._target=t}},{key:"isInitialized",get:function(){return null!=this.samples}}]),i}(f)).prototype,"audioInput",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(k.prototype,"samplingQuality",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.high}}),A=i(k.prototype,"gain",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=i(k.prototype,"smoothing",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=k))||_)||_));l._RF.pop()}}}));

System.register("chunks:///_virtual/CubismAudioSamplingQuality.ts",["cc"],(function(i){var u;return{setters:[function(i){u=i.cclegacy}],execute:function(){u._RF.push({},"79cf1m2n8pKmIXt+5nAK4ea","CubismAudioSamplingQuality",void 0);var t=i("default",function(i){return i[i.high=0]="high",i[i.veryHigh=1]="veryHigh",i[i.maximum=2]="maximum",i}(t||{}));u._RF.pop()}}}));

System.register("chunks:///_virtual/CubismAutoEyeBlinkInput.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismEyeBlinkController.ts"],(function(t){var e,i,n,r,s,a,l,o,u,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,s=t.createClass},function(t){a=t.cclegacy,l=t._decorator,o=t.CCFloat,u=t.random,c=t.Component},function(t){h=t.default}],execute:function(){var f,p,y,g,m,b,_,d,C;a._RF.push({},"354celTWN5DZ7/0xFPibXh+","CubismAutoEyeBlinkInput",void 0);var P=l.ccclass,v=l.property,E=(t("default",(f=P("CubismAutoEyeBlinkInput"),p=v({type:o,serializable:!0,range:[1,10,.001]}),y=v({type:o,serializable:!0,range:[.5,5,.001]}),g=v({type:o,serializable:!0,range:[1,20,.001]}),f((_=e((b=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"mean",_,r(e)),n(e,"maximumDeviation",d,r(e)),n(e,"timescale",C,r(e)),e._controller=null,e._t=0,e._currentPhase=E.Idling,e._lastValue=0,e}i(e,t);var a=e.prototype;return a.reset=function(){this.t=0},a.resetInEditor=function(){this.reset()},a.start=function(){this.controller=this.getComponent(h)},a.lateUpdate=function(t){if(null!=this.controller){if(this.currentPhase==E.Idling){if(this.t-=t,!(this.t<0))return;this.t=-.5*Math.PI,this.lastValue=1,this.currentPhase=E.ClosingEyes}this.t+=t*this.timescale;var e=Math.abs(Math.sin(this.t));if(this.currentPhase==E.ClosingEyes&&e>this.lastValue)this.currentPhase=E.OpeningEyes;else if(this.currentPhase==E.OpeningEyes&&e<this.lastValue){e=1,this.currentPhase=E.Idling;var i=2*this.maximumDeviation;this.t=this.mean+u()*i-this.maximumDeviation}this.controller.eyeOpening=e,this.lastValue=e}},s(e,[{key:"controller",get:function(){return this._controller},set:function(t){this._controller=t}},{key:"t",get:function(){return this._t},set:function(t){this._t=t}},{key:"currentPhase",get:function(){return this._currentPhase},set:function(t){this._currentPhase=t}},{key:"lastValue",get:function(){return this._lastValue},set:function(t){this._lastValue=t}}]),e}(c)).prototype,"mean",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.5}}),d=e(b.prototype,"maximumDeviation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),C=e(b.prototype,"timescale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),m=b))||m)),function(t){return t[t.Idling=0]="Idling",t[t.ClosingEyes=1]="ClosingEyes",t[t.OpeningEyes=2]="OpeningEyes",t}(E||{}));a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismAutoMouthInput.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismMouthController.ts"],(function(t){var e,n,o,r,i,l,u,s,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createClass},function(t){l=t.cclegacy,u=t._decorator,s=t.CCFloat,a=t.Component},function(t){c=t.default}],execute:function(){var h,p,f,C,m;l._RF.push({},"5b8aalbiZZAHI8TdFPv4xSV","CubismAutoMouthInput",void 0);var T=u.ccclass,b=u.property;t("default",(h=T("CubismAutoMouthInput"),p=b(s),h((m=e((C=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i))||this,o(e,"Timescale",m,r(e)),e._Controller=null,e._T=0,e}n(e,t);var l=e.prototype;return l.resetInEditor=function(){this.T=0},l.start=function(){this.Controller=this.getComponent(c)},l.lateUpdate=function(t){null!=this.Controller&&(this.T+=t*this.Timescale,this.Controller.mouthOpening=Math.abs(Math.sin(this.T)))},i(e,[{key:"Controller",get:function(){return this._Controller},set:function(t){this._Controller=t}},{key:"T",get:function(){return this._T},set:function(t){this._T=t}}]),e}(a)).prototype,"Timescale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),f=C))||f));l._RF.pop()}}}));

System.register("chunks:///_virtual/CubismBuiltinMaterials.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,r,e,u;return{setters:[function(n){t=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){e=n.cclegacy,u=n.assetManager}],execute:function(){var i;e._RF.push({},"0b91ccxtclDxK7VTy1F98Bp","CubismBuiltinMaterials",void 0),function(n){function e(){return(e=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"Unlit"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function i(){return(i=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitAdditive"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function a(){return(a=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitAdditiveCulling"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function l(){return(l=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitAdditiveMasked"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function s(){return(s=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitAdditiveMaskedCulling"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function c(){return(c=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitAdditiveMaskedInverted"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(){return(p=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitAdditiveMaskedInvertedCulling"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function o(){return(o=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitCulling"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(){return(f=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitMasked"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(){return(d=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitMaskedCulling"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function v(){return(v=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitMaskedInverted"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(){return(h=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitMaskedInvertedCulling"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function y(){return(y=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitMultiply"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function k(){return(k=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitMultiplyCulling"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function g(){return(g=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitMultiplyMasked"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function x(){return(x=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitMultiplyMaskedCulling"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function w(){return(w=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitMultiplyMaskedInverted"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function M(){return(M=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"UnlitMultiplyMaskedInvertedCulling"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function U(){return(U=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"Mask"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(){return(b=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:return t=n.sent,n.abrupt("return",null==t?null:I(t,"MaskCulling"));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}n.getUnlit=function(){return e.apply(this,arguments)},n.getUnlitAdditive=function(){return i.apply(this,arguments)},n.getUnlitAdditiveCulling=function(){return a.apply(this,arguments)},n.getUnlitAdditiveMasked=function(){return l.apply(this,arguments)},n.getUnlitAdditiveMaskedCulling=function(){return s.apply(this,arguments)},n.getUnlitAdditiveMaskedInverted=function(){return c.apply(this,arguments)},n.getUnlitAdditiveMaskedInvertedCulling=function(){return p.apply(this,arguments)},n.getUnlitCulling=function(){return o.apply(this,arguments)},n.getUnlitMasked=function(){return f.apply(this,arguments)},n.getUnlitMaskedCulling=function(){return d.apply(this,arguments)},n.getUnlitMaskedInverted=function(){return v.apply(this,arguments)},n.getUnlitMaskedInvertedCulling=function(){return h.apply(this,arguments)},n.getUnlitMultiply=function(){return y.apply(this,arguments)},n.getUnlitMultiplyCulling=function(){return k.apply(this,arguments)},n.getUnlitMultiplyMasked=function(){return g.apply(this,arguments)},n.getUnlitMultiplyMaskedCulling=function(){return x.apply(this,arguments)},n.getUnlitMultiplyMaskedInverted=function(){return w.apply(this,arguments)},n.getUnlitMultiplyMaskedInvertedCulling=function(){return M.apply(this,arguments)},n.getMask=function(){return U.apply(this,arguments)},n.getMaskCulling=function(){return b.apply(this,arguments)};var m="Live2DCubismBuiltinResource";function C(){return A.apply(this,arguments)}function A(){return(A=t(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==(t=u.bundles.get(m))){n.next=3;break}return n.abrupt("return",Promise.resolve(t));case 3:return n.abrupt("return",new Promise((function(n,t){u.loadBundle(m,(function(r,e){null!=r?t(null):n(e)}))})));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function I(n,t){return B.apply(this,arguments)}function B(){return(B=t(r().mark((function n(t,e){var u,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u="Materials/"+e,null==(i=t.get(u))){n.next=4;break}return n.abrupt("return",Promise.resolve(i));case 4:return n.abrupt("return",new Promise((function(n,r){t.load(u,(function(t,e){null!=t?r(t):n(e)}))})));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}(i||(i={}));n("default",i);e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismBuiltinPickers.ts",["cc","./CubismBuiltinMaterials.ts"],(function(e){var t,i;return{setters:[function(e){t=e.cclegacy},function(e){i=e.default}],execute:function(){var l,n;t._RF.push({},"fcec6hx/PlMg6ZOP1KpSo9L","CubismBuiltinPickers",void 0),(n=l||(l={})).materialPicker=function(e,t){return t.isDoubleSided?t.blendAdditive?t.isMasked?t.isInverted?i.getUnlitAdditiveMaskedInverted():i.getUnlitAdditiveMasked():i.getUnlitAdditive():t.multiplyBlend?t.isMasked?t.isInverted?i.getUnlitMultiplyMaskedInverted():i.getUnlitMultiplyMasked():i.getUnlitMultiply():t.isMasked?t.isInverted?i.getUnlitMaskedInverted():i.getUnlitMasked():i.getUnlit():t.blendAdditive?t.isMasked?t.isInverted?i.getUnlitAdditiveMaskedInvertedCulling():i.getUnlitAdditiveMaskedCulling():i.getUnlitAdditiveCulling():t.multiplyBlend?t.isMasked?t.isInverted?i.getUnlitMultiplyMaskedInvertedCulling():i.getUnlitMultiplyMaskedCulling():i.getUnlitMultiplyCulling():t.isMasked?t.isInverted?i.getUnlitMaskedInvertedCulling():i.getUnlitMaskedCulling():i.getUnlitCulling()},n.texturePicker=function(e,t){return e.getTexture(t.textureIndex)};e("default",l);t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismBuiltinShaders.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,s;return{setters:[function(e){r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){t=e.cclegacy,s=e.resources}],execute:function(){var u;e("CubismBuiltinShaders",void 0),t._RF.push({},"f3f56Ug8bRC876NHkmFUSIc","CubismBuiltinShaders",void 0),function(e){function t(){return(t=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"db://live2d_cubismsdk_cocoscreator/resources/Shaders/Unlit.effect",e.abrupt("return",new Promise((function(e,r){s.load("db://live2d_cubismsdk_cocoscreator/resources/Shaders/Unlit.effect",(function(n,t){null==n?e(t):r(null)}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"db://live2d_cubismsdk_cocoscreator/resources/Shaders/Mask.effect",e.abrupt("return",new Promise((function(e,r){s.load("db://live2d_cubismsdk_cocoscreator/resources/Shaders/Mask.effect",(function(n,t){null==n?e(t):r(null)}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.getUnlit=function(){return t.apply(this,arguments)},e.getMask=function(){return u.apply(this,arguments)}}(u||(u=e("CubismBuiltinShaders",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismCanvasInformation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var a,t;return{setters:[function(n){a=n.createClass},function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"1d91d0D8SJFWq813kFtEwlZ","CubismCanvasInformation",void 0);n("default",function(){function n(n){this._unmanagedCanvasInformation=null,this.reset(n)}n.instantiate=function(a){return new n(a)};var t=n.prototype;return t.revive=function(n){this.unmanagedCanvasInformation=n.canvasinfo},t.reset=function(n){this.revive(n)},a(n,[{key:"unmanagedCanvasInformation",get:function(){return this._unmanagedCanvasInformation},set:function(n){this._unmanagedCanvasInformation=n}},{key:"canvasWidth",get:function(){var n,a;return null!=(n=null==(a=this.unmanagedCanvasInformation)?void 0:a.CanvasWidth)?n:0}},{key:"canvasHeight",get:function(){var n,a;return null!=(n=null==(a=this.unmanagedCanvasInformation)?void 0:a.CanvasHeight)?n:0}},{key:"canvasOriginX",get:function(){var n,a;return null!=(n=null==(a=this.unmanagedCanvasInformation)?void 0:a.CanvasOriginX)?n:0}},{key:"canvasOriginY",get:function(){var n,a;return null!=(n=null==(a=this.unmanagedCanvasInformation)?void 0:a.CanvasOriginY)?n:0}},{key:"pixelsPerUnit",get:function(){var n,a;return null!=(n=null==(a=this.unmanagedCanvasInformation)?void 0:a.PixelsPerUnit)?n:0}}]),n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismCore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Live2DCubismCore.mjs_cjs=&original=.js","./Live2DCubismCore.js"],(function(e){var t,r,n,a,s,i,o;return{setters:[function(e){t=e.createClass,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy,s=e.js,i=e.assetManager},null,function(e){o=e.default}],execute:async function(){function u(e){return c.apply(this,arguments)}function c(){return(c=r(n().mark((function e(t){var r,a,s,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,new Promise((function(e,t){i.loadBundle("Live2DCubismBuiltinResource",(function(r,n){r?console.error(r):n.load("WebAssembly/Live2DCubismCore",(function(r,n){r?(console.error(r),t(null)):e(n)}))}))}));case 3:a=e.sent,r=null==a?void 0:new Uint8Array(a.buffer()),e.next=15;break;case 7:return e.next=9,Editor.Message.request("asset-db","query-path",t);case 9:if(s=e.sent,console.info("wasmFilePath: "+s),s){e.next=13;break}throw new Error("'Failed to load WebAssembly Binary "+t);case 13:o=require("fs").readFileSync(s),r=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=r(n().mark((function e(){var t,a,s,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading Live2D Cubism Core."),a=Symbol.for("CubismCoreEmscriptenModulePromise"),s=globalThis,i=null!=(t=s[a])?t:s[a]=r(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"2ae9481d-aa06-4cce-ae8e-bcecaf63d82b",e.next=3,u("2ae9481d-aa06-4cce-ae8e-bcecaf63d82b");case 3:return t=e.sent,e.next=6,o({wasmBinary:t});case 6:if(r=e.sent){e.next=9;break}throw new Error("'Failed to get Live2D Cubism Core module factory.");case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))(),e.next=6,i;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e({Live2DCubismCore:void 0,Utils:void 0,getCubismCoreVersionString:d}),a._RF.push({},"c33f1vaRb5NBpG/BaEKqXr7","CubismCore",void 0);var f,m=await function(){return l.apply(this,arguments)}();function d(){var e=m._csmGetVersion(),t=(4278190080&e)>>24,r=(16711680&e)>>16,n=65535&e;return s.formatStr("Loaded Live2D Cubism Core version: ",("00"+t).slice(-2),("00"+r).slice(-2),("0000"+n).slice(-4))}console.log(d()),function(e){var t,r;(r=t||(t=e._csm||(e._csm={}))).getVersion=function(){return m._csmGetVersion()},r.getLatestMocVersion=function(){return m._csmGetLatestMocVersion()},r.getMocVersion=function(e){return m._csmGetMocVersion(e)},r.getSizeofModel=function(e){return m._csmGetSizeofModel(e)},r.hasMocConsistency=function(e,t){return m._csmHasMocConsistency(e,t)},r.reviveMocInPlace=function(e,t){return m._csmReviveMocInPlace(e,t)},r.initializeModelInPlace=function(e,t,r){return m._csmInitializeModelInPlace(e,t,r)},r.getParameterCount=function(e){return m._csmGetParameterCount(e)},r.getParameterIds=function(e){return m._csmGetParameterIds(e)},r.getParameterMinimumValues=function(e){return m._csmGetParameterMinimumValues(e)},r.getParameterMaximumValues=function(e){return m._csmGetParameterMaximumValues(e)},r.getParameterDefaultValues=function(e){return m._csmGetParameterDefaultValues(e)},r.getParameterValues=function(e){return m._csmGetParameterValues(e)},r.getParameterKeyCounts=function(e){return m._csmGetParameterKeyCounts(e)},r.getParameterKeyValues=function(e){return m._csmGetParameterKeyValues(e)},r.getParameterTypes=function(e){return m._csmGetParameterTypes(e)},r.getPartCount=function(e){return m._csmGetPartCount(e)},r.getPartIds=function(e){return m._csmGetPartIds(e)},r.getPartOpacities=function(e){return m._csmGetPartOpacities(e)},r.getPartParentPartIndices=function(e){return m._csmGetPartParentPartIndices(e)},r.getDrawableCount=function(e){return m._csmGetDrawableCount(e)},r.getDrawableIds=function(e){return m._csmGetDrawableIds(e)},r.getDrawableConstantFlags=function(e){return m._csmGetDrawableConstantFlags(e)},r.getDrawableDynamicFlags=function(e){return m._csmGetDrawableDynamicFlags(e)},r.getDrawableTextureIndices=function(e){return m._csmGetDrawableTextureIndices(e)},r.getDrawableDrawOrders=function(e){return m._csmGetDrawableDrawOrders(e)},r.getDrawableRenderOrders=function(e){return m._csmGetDrawableRenderOrders(e)},r.getDrawableOpacities=function(e){return m._csmGetDrawableOpacities(e)},r.getDrawableMaskCounts=function(e){return m._csmGetDrawableMaskCounts(e)},r.getDrawableMasks=function(e){return m._csmGetDrawableMasks(e)},r.getDrawableVertexCounts=function(e){return m._csmGetDrawableVertexCounts(e)},r.getDrawableVertexPositions=function(e){return m._csmGetDrawableVertexPositions(e)},r.getDrawableVertexUvs=function(e){return m._csmGetDrawableVertexUvs(e)},r.getDrawableIndexCounts=function(e){return m._csmGetDrawableIndexCounts(e)},r.getDrawableIndices=function(e){return m._csmGetDrawableIndices(e)},r.getDrawableMultiplyColors=function(e){return m._csmGetDrawableMultiplyColors(e)},r.getDrawableScreenColors=function(e){return m._csmGetDrawableScreenColors(e)},r.getDrawableParentPartIndices=function(e){return m._csmGetDrawableParentPartIndices(e)},r.mallocMoc=function(e){return m._csmMallocMoc(e)},r.mallocModelAndInitialize=function(e){return m._csmMallocModelAndInitialize(e)},r.malloc=function(e){return m._csmMalloc(e)},r.setLogFunction=function(e){m._csmSetLogFunction(e)},r.updateModel=function(e){m._csmUpdateModel(e)},r.readCanvasInfo=function(e,t,r,n){m._csmReadCanvasInfo(e,t,r,n)},r.resetDrawableDynamicFlags=function(e){m._csmResetDrawableDynamicFlags(e)},r.free=function(e){m._csmFree(e)};var n,a,s,i,o;e.AlignofMoc=64,e.AlignofModel=16,e.MocVersion_Unknown=0,e.MocVersion_30=1,e.MocVersion_33=2,e.MocVersion_40=3,e.MocVersion_42=4,e.MocVersion_50=5,e.ParameterType_Normal=0,e.ParameterType_BlendShape=1;(a=n||(n=e.Version||(e.Version={}))).csmGetVersion=function(){return f._csm.getVersion()},a.csmGetLatestMocVersion=function(){return f._csm.getLatestMocVersion()},a.csmGetMocVersion=function(e){return f._csm.getMocVersion(e._ptr)},i=s||(s=e.Logging||(e.Logging={})),o=null,i.csmSetLogFunction=function(e){o=e;var r=m.addFunction(s.wrapLogFunction,"vi");t.setLogFunction(r)},i.csmGetLogFunction=function(){return o},i.wrapLogFunction=function(e){var t=m.UTF8ToString(e);null==o||o(t)}}(f||(f=e("Live2DCubismCore",{})));e("Moc",function(){function e(e){this._ptr=0,this._ptr=e}return e.hasMocConsistency=function(e){var t=f._csm.mallocMoc(e.byteLength);if(!t)return null;new Uint8Array(m.HEAPU8.buffer,t,e.byteLength).set(new Uint8Array(e));var r=f._csm.hasMocConsistency(t,e.byteLength);return f._csm.free(t),r},e.fromArrayBuffer=function(t){var r=f._csm.mallocMoc(t.byteLength);if(!r)return null;new Uint8Array(m.HEAPU8.buffer,r,t.byteLength).set(new Uint8Array(t));var n=f._csm.reviveMocInPlace(r,t.byteLength);return n?new e(n):(console.log(t),f._csm.free(r),null)},e.prototype._release=function(){f._csm.free(this._ptr),this._ptr=0},t(e,[{key:"ptr",get:function(){return this._ptr}}]),e}()),e("Model",function(){function e(e,t,r,n,a){this._parameters=void 0,this._parts=void 0,this._drawables=void 0,this._canvasinfo=void 0,this._ptr=0,this._ptr=e,this._parameters=t,this._parts=r,this._drawables=n,this._canvasinfo=a}e.fromMoc=function(t){var r=f._csm.mallocModelAndInitialize(t.ptr);return r?new e(r,new w(r),new _(r),new v(r),new g(r)):null};var r=e.prototype;return r.update=function(){f._csm.updateModel(this._ptr)},r.release=function(){f._csm.free(this._ptr),this._ptr=0},t(e,[{key:"parameters",get:function(){return this._parameters}},{key:"parts",get:function(){return this._parts}},{key:"drawables",get:function(){return this._drawables}},{key:"canvasinfo",get:function(){return this._canvasinfo}},{key:"ptr",get:function(){return this._ptr}}]),e}());var h,b,g=e("CanvasInfo",(function(e){if(this.CanvasWidth=0,this.CanvasHeight=0,this.CanvasOriginX=0,this.CanvasOriginY=0,this.PixelsPerUnit=0,e){var t=function(e){var t=f._csm.malloc(e);if(!t)return null;return new Uint8Array(m.HEAPU8.buffer,t,e)}(5*Float32Array.BYTES_PER_ELEMENT);if(t){var r=new Float32Array(t.buffer,t.byteOffset,2),n=new Float32Array(t.buffer,t.byteOffset+r.byteLength,2),a=new Float32Array(t.buffer,n.byteOffset+n.byteLength,1);f._csm.readCanvasInfo(e,r.byteOffset,n.byteOffset,a.byteOffset),this.CanvasWidth=r[0],this.CanvasHeight=r[1],this.CanvasOriginX=n[0],this.CanvasOriginY=n[1],this.PixelsPerUnit=a[0],f._csm.free(t.byteOffset)}else console.assert(!t)}})),w=e("Parameters",(function(e){this.count=void 0,this.ids=void 0,this.minimumValues=void 0,this.maximumValues=void 0,this.defaultValues=void 0,this.values=void 0,this.types=void 0,this.keyCounts=void 0,this.keyValues=void 0;var t=f._csm.getParameterCount(e);this.count=t,this.ids=new Array(t);for(var r=new Uint32Array(m.HEAPU32.buffer,f._csm.getParameterIds(e),t),n=0;n<r.length;n++)this.ids[n]=m.UTF8ToString(r[n]);this.minimumValues=new Float32Array(m.HEAPF32.buffer,f._csm.getParameterMinimumValues(e),t),this.maximumValues=new Float32Array(m.HEAPF32.buffer,f._csm.getParameterMaximumValues(e),t),this.defaultValues=new Float32Array(m.HEAPF32.buffer,f._csm.getParameterDefaultValues(e),t),this.values=new Float32Array(m.HEAPF32.buffer,f._csm.getParameterValues(e),t),this.types=new Int32Array(m.HEAP32.buffer,f._csm.getParameterTypes(e),t);var a=new Int32Array(m.HEAP32.buffer,f._csm.getParameterKeyCounts(e),t);this.keyCounts=a,this.keyValues=new Array(t);for(var s=new Uint32Array(m.HEAPU32.buffer,f._csm.getParameterKeyValues(e),t),i=0;i<s.length;i++)this.keyValues[i]=new Float32Array(m.HEAPF32.buffer,s[i],a[i])})),_=e("Parts",(function(e){this.count=void 0,this.ids=void 0,this.opacities=void 0,this.parentIndices=void 0;var t=f._csm.getPartCount(e);this.count=t,this.ids=new Array(t);for(var r=new Uint32Array(m.HEAPU32.buffer,f._csm.getPartIds(e),t),n=0;n<r.length;n++)this.ids[n]=m.UTF8ToString(r[n]);this.opacities=new Float32Array(m.HEAPF32.buffer,f._csm.getPartOpacities(e),t),this.parentIndices=new Int32Array(m.HEAP32.buffer,f._csm.getPartParentPartIndices(e),t)})),v=e("Drawables",(function(e){var t=this;this.count=void 0,this.ids=void 0,this.constantFlags=void 0,this.dynamicFlags=void 0,this.textureIndices=void 0,this.drawOrders=void 0,this.renderOrders=void 0,this.opacities=void 0,this.maskCounts=void 0,this.masks=void 0,this.vertexCounts=void 0,this.vertexPositions=void 0,this.vertexUvs=void 0,this.indexCounts=void 0,this.indices=void 0,this.multiplyColors=void 0,this.screenColors=void 0,this.parentPartIndices=void 0,this._modelPtr=void 0,this.resetDynamicFlags=function(){f._csm.resetDrawableDynamicFlags(t._modelPtr)},this._modelPtr=e;var r=f._csm.getDrawableCount(e);this.count=r,this.ids=new Array(r);for(var n=new Uint32Array(m.HEAPU32.buffer,f._csm.getDrawableIds(e),r),a=0;a<n.length;a++)this.ids[a]=m.UTF8ToString(n[a]);this.constantFlags=new Uint8Array(m.HEAPU8.buffer,f._csm.getDrawableConstantFlags(e),r),this.dynamicFlags=new Uint8Array(m.HEAPU8.buffer,f._csm.getDrawableDynamicFlags(e),r),this.textureIndices=new Int32Array(m.HEAP32.buffer,f._csm.getDrawableTextureIndices(e),r),this.drawOrders=new Int32Array(m.HEAP32.buffer,f._csm.getDrawableDrawOrders(e),r),this.renderOrders=new Int32Array(m.HEAP32.buffer,f._csm.getDrawableRenderOrders(e),r),this.opacities=new Float32Array(m.HEAPF32.buffer,f._csm.getDrawableOpacities(e),r);var s=new Int32Array(m.HEAP32.buffer,f._csm.getDrawableMaskCounts(e),r);this.maskCounts=s;var i=new Int32Array(m.HEAP32.buffer,f._csm.getDrawableVertexCounts(e),r);this.vertexCounts=i;var o=new Int32Array(m.HEAP32.buffer,f._csm.getDrawableIndexCounts(e),r);this.indexCounts=o,this.masks=new Array(r);for(var u=new Uint32Array(m.HEAPU32.buffer,f._csm.getDrawableMasks(e),r),c=0;c<u.length;c++)this.masks[c]=new Int32Array(m.HEAP32.buffer,u[c],s[c]);this.vertexPositions=new Array(r);for(var l=new Uint32Array(m.HEAPU32.buffer,f._csm.getDrawableVertexPositions(e),r),d=0;d<l.length;d++)this.vertexPositions[d]=new Float32Array(m.HEAPF32.buffer,l[d],2*i[d]);this.vertexUvs=new Array(r);for(var h=new Uint32Array(m.HEAPU32.buffer,f._csm.getDrawableVertexUvs(e),r),b=0;b<h.length;b++)this.vertexUvs[b]=new Float32Array(m.HEAPF32.buffer,h[b],2*i[b]);this.indices=new Array(r);for(var g=new Uint32Array(m.HEAPU32.buffer,f._csm.getDrawableIndices(e),r),w=0;w<g.length;w++)this.indices[w]=new Uint16Array(m.HEAPU16.buffer,g[w],o[w]);this.multiplyColors=new Float32Array(m.HEAPU32.buffer,f._csm.getDrawableMultiplyColors(e),4*r),this.screenColors=new Float32Array(m.HEAPU32.buffer,f._csm.getDrawableScreenColors(e),4*r),this.parentPartIndices=new Int32Array(m.HEAP32.buffer,f._csm.getDrawableParentPartIndices(e),r)}));(b=h||(h=e("Utils",{}))).hasBlendAdditiveBit=function(e){return 1==(1&e)},b.hasBlendMultiplicativeBit=function(e){return 2==(2&e)},b.hasIsDoubleSidedBit=function(e){return 4==(4&e)},b.hasIsInvertedMaskBit=function(e){return 8==(8&e)},b.hasIsVisibleBit=function(e){return 1==(1&e)},b.hasVisibilityDidChangeBit=function(e){return 2==(2&e)},b.hasOpacityDidChangeBit=function(e){return 4==(4&e)},b.hasDrawOrderDidChangeBit=function(e){return 8==(8&e)},b.hasRenderOrderDidChangeBit=function(e){return 16==(16&e)},b.hasVertexPositionsDidChangeBit=function(e){return 32==(32&e)},b.hasBlendColorDidChangeBit=function(e){return 64==(64&e)},a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismDisplayInfo3Json.ts",["cc","./JsonParseUtils.ts"],(function(n){var i,t;return{setters:[function(n){i=n.cclegacy},function(n){t=n.default}],execute:function(){i._RF.push({},"19ff9aJTvFNZJS6zWScjCOz","CubismDisplayInfo3Json",void 0);var r=t.asNumber,a=t.asString,e=(n("default",function(){function n(){this.version=0,this.parameters=new Array(0),this.parameterGroups=new Array(0),this.parts=new Array(0)}return n.loadFrom=function(n){var i=t.parse(n);return i?this.loadFromJson(i):null},n.loadFromJson=function(i){var a;if(null==i)return null;var u=r(i.Version),d=t.arrayedInstantiateFromJson(i.Parameters,o.instantiateFromJson),l=t.arrayedInstantiateFromJson(i.Parts,s.instantiateFromJson);if(void 0===u||void 0===d||void 0===l)return null;var m=null!=(a=t.arrayedInstantiateFromJson(i.Parameters,e.instantiateFromJson))?a:new Array(0),h=new n;return h.version=u,h.parameterGroups=d,h.parts=l,h.parameters=m,h},n}()),n("SerializableParameters",function(){function n(n){var i,t,r;void 0===n&&(n={}),this.id=void 0,this.groupId=void 0,this.name=void 0,this.id=null!=(i=n.id)?i:"",this.groupId=null!=(t=n.groupId)?t:"",this.name=null!=(r=n.name)?r:""}var i=n.prototype;return i.copyWith=function(i){var t,r,a;return void 0===i&&(i={}),new n({id:null!=(t=i.id)?t:this.id,groupId:null!=(r=i.groupid)?r:this.groupId,name:null!=(a=i.name)?a:this.name})},i.equals=function(n){return this===n||this.id==n.id&&this.groupId==n.groupId&&this.name==n.name},i.strictEquals=function(n){return this===n},n.instantiateFromJson=function(i){if(null!=i){var t=a(i.Id),r=a(i.GroupId),e=a(i.Name);if(void 0!==t&&void 0!==r&&void 0!==e)return new n({id:t,groupId:r,name:e})}},n}())),o=n("SerializableParameterGroups",function(){function n(n){var i,t,r;void 0===n&&(n={}),this.id=void 0,this.groupId=void 0,this.name=void 0,this.id=null!=(i=n.id)?i:"",this.groupId=null!=(t=n.groupId)?t:"",this.name=null!=(r=n.name)?r:""}var i=n.prototype;return i.copyWith=function(i){var t,r,a;return void 0===i&&(i={}),new n({id:null!=(t=i.id)?t:this.id,groupId:null!=(r=i.groupid)?r:this.groupId,name:null!=(a=i.name)?a:this.name})},i.equals=function(n){return this===n||this.id==n.id&&this.groupId==n.groupId&&this.name==n.name},i.strictEquals=function(n){return this===n},n.instantiateFromJson=function(i){if(null!=i){var t=a(i.Id),r=a(i.GroupId),e=a(i.Name);if(void 0!==t&&void 0!==r&&void 0!==e)return new n({id:t,groupId:r,name:e})}},n}()),s=n("SerializableParts",function(){function n(n){var i,t;void 0===n&&(n={}),this.id=void 0,this.name=void 0,this.id=null!=(i=n.id)?i:"",this.name=null!=(t=n.name)?t:""}var i=n.prototype;return i.copyWith=function(i){var t,r;return void 0===i&&(i={}),new n({id:null!=(t=i.id)?t:this.id,name:null!=(r=i.name)?r:this.name})},i.equals=function(n){return this===n||this.id==n.id&&this.name==n.name},i.strictEquals=function(n){return this===n},n.instantiateFromJson=function(i){if(null!=i){var t=a(i.Id),r=a(i.Name);if(void 0!==t&&void 0!==r)return new n({id:t,name:r})}},n}());(e||(e=n("SerializableParameters",{}))).DEFAULT=new e,(o||(o=n("SerializableParameterGroups",{}))).DEFAULT=new o,(s||(s=n("SerializableParts",{}))).DEFAULT=new s,i._RF.pop()}}}));

System.register("chunks:///_virtual/CubismDisplayInfoParameterName.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,a,i,t,n,o,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,l=e.Component}],execute:function(){var s,u,p,c,m,f,y;n._RF.push({},"aaf66iGNOVGpJ0TcQIKgLg3","CubismDisplayInfoParameterName",void 0);var b=o.ccclass,g=o.property;e("default",(s=b("CubismDisplayInfoParameterName"),u=g({visible:!0,readonly:!1,serializable:!0,group:"Main"}),p=g({visible:!0,readonly:!0,serializable:!0,group:"Debug"}),s((f=r((m=function(e){function r(){for(var r,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return r=e.call.apply(e,[this].concat(n))||this,i(r,"displayName",f,t(r)),i(r,"parameterName",y,t(r)),r}return a(r,e),r}(l)).prototype,"displayName",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=r(m.prototype,"parameterName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=m))||c));n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismDisplayInfoPartName.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,r,a,t,n,l,o;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Component}],execute:function(){var s,u,c,p,f,m,b;n._RF.push({},"83f4d+VMGlMRpj6YhmLTEYk","CubismDisplayInfoPartName",void 0);var y=l.ccclass,d=l.property;e("default",(s=y("CubismDisplayInfoPartName"),u=d({serializable:!0,visible:!1}),c=d({serializable:!0,visible:!0}),s((m=i((f=function(e){function i(){for(var i,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return i=e.call.apply(e,[this].concat(n))||this,a(i,"partName",m,t(i)),a(i,"displayName",b,t(i)),i}return r(i,e),i}(o)).prototype,"partName",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=i(f.prototype,"displayName",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=f))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismDrawable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismCore.ts","./ComponentExtensionMethods2.ts","./CubismMeshPrimitive.ts"],(function(e){var n,a,r,i,s,t,l,u,o,d,m,b,h,g,w;return{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,s=e.createClass},function(e){t=e.cclegacy,l=e._decorator,u=e.CCInteger,o=e.Node,d=e.math,m=e.Color,b=e.Component},function(e){h=e.Utils},function(e){g=e.default},function(e){w=e.default}],execute:function(){var c,D,f,x,v;t._RF.push({},"589faLUSVtM3a/M36dmQnxS","CubismDrawable",void 0);var C=l.ccclass,y=l.property;e("default",(c=C("CubismDrawable"),D=y({type:u,serializable:!0,visible:!0,readonly:!0}),c((v=n((x=function(e){function n(){for(var n,a=arguments.length,s=new Array(a),t=0;t<a;t++)s[t]=arguments[t];return(n=e.call.apply(e,[this].concat(s))||this)._unmanagedDrawables=null,r(n,"_unmanagedIndex",v,i(n)),n}a(n,e),n.createDrawables=function(e){for(var a=new o("Drawables"),r=e.drawables,i=new Array(r.count),s=0;s<i.length;++s){var t=new o;i[s]=t.addComponent(n),a.addChild(t),i[s].reset(e,s)}return a};var t=n.prototype;return t.generateMeshPrimitive=function(){var e=this.unmanagedDrawables;if(null==e)return console.error("CubismDrawable.generateMeshPrimitive(): this.drawables is null."),null;if(-1==this.unmanagedIndex)return console.error("CubismDrawable.generateMeshPrimitive(): this.index uninitialize."),null;for(var n=e.vertexCounts[this.unmanagedIndex],a=e.vertexPositions[this.unmanagedIndex],r=e.vertexUvs[this.unmanagedIndex],i=e.indices[this.unmanagedIndex],s=new Array(3*n),t=new Array(2*n),l=new Array(4*n),u=0,o=0;u<s.length;)s[u++]=a[o++],s[u++]=a[o++],s[u++]=0;for(var d=0;d<t.length;d++)t[d]=r[d];for(var m=0;m<l.length;m++)l[m]=0;var b=w.from(s,t,l);return null==b||b.setIndices(i),b},t.revive=function(e){this.unmanagedDrawables=e.drawables},t.reset=function(e,n){this.revive(e),this._unmanagedIndex=n,this.node.name=this.id},s(n,[{key:"unmanagedDrawables",get:function(){return this._unmanagedDrawables},set:function(e){this._unmanagedDrawables=e}},{key:"unmanagedIndex",get:function(){return this._unmanagedIndex},set:function(e){this._unmanagedIndex=e}},{key:"id",get:function(){return null==this.unmanagedDrawables?(console.error("CubismDrawable.id: this.unmanagedDrawables is null"),""):-1==this.unmanagedIndex?(console.error("CubismDrawable.id: this.index uninitialize."),""):this.unmanagedDrawables.ids[this.unmanagedIndex]}},{key:"textureIndex",get:function(){return null==this.unmanagedDrawables?(console.error("CubismDrawable.id: this.unmanagedDrawables is null"),0):-1==this.unmanagedIndex?(console.error("CubismDrawable.id: this.index uninitialize."),0):this.unmanagedDrawables.textureIndices[this.unmanagedIndex]}},{key:"masks",get:function(){if(null==this.unmanagedDrawables)return console.error("CubismDrawable.masks: this.unmanagedDrawables is null"),new Array(0);var e=g.findCubismModel(this,!0);if(null==e)return console.error("CubismDrawable.masks: ComponentExtensionMethods.findCubismModel() failed."),new Array(0);var n=e.drawables;if(null==n)return console.error("CubismDrawable.masks: model.drawables is null."),new Array(0);for(var a=this.unmanagedDrawables.maskCounts[this.unmanagedIndex],r=this.unmanagedDrawables.masks[this.unmanagedIndex],i=new Array(a),s=0;s<i.length;s++)for(var t=0;t<n.length;t++)if(n[t].unmanagedIndex==r[s]){i[s]=n[t];break}return i}},{key:"vertexPositions",get:function(){var e=this.unmanagedDrawables;if(null==e)return console.error("CubismDrawable.vertexPositions: this.unmanagedDrawables is null."),new Array(0);if(-1==this.unmanagedIndex)return console.error("CubismDrawable.vertexUvs: this.index uninitialize."),new Array(0);for(var n=e.vertexCounts[this.unmanagedIndex],a=e.vertexPositions[this.unmanagedIndex],r=new Array(n),i=0;i<r.length;i++)r[i]=new d.Vec3(a[2*i+0],a[2*i+1]);return r}},{key:"vertexUvs",get:function(){var e=this.unmanagedDrawables;if(null==e)return console.error("CubismDrawable.vertexUvs: this.unmanagedDrawables is null."),new Array(0);if(-1==this.unmanagedIndex)return console.error("CubismDrawable.vertexUvs: this.index uninitialize."),new Array(0);for(var n=e.vertexCounts[this.unmanagedIndex],a=e.vertexUvs[this.unmanagedIndex],r=new Array(n),i=0;i<r.length;i++)r[i]=new d.Vec2(a[2*i+0],a[2*i+1]);return r}},{key:"indices",get:function(){var e=this.unmanagedDrawables;if(null==e)return console.error("CubismDrawable.indices: this.unmanagedDrawables is null."),new Uint16Array(0);if(-1==this.unmanagedIndex)return console.error("CubismDrawable.indices: this.index uninitialize."),new Uint16Array(0);for(var n=e.indexCounts[this.unmanagedIndex],a=e.indices[this.unmanagedIndex],r=new Uint16Array(n),i=0;i<r.length;i++)r[i]=a[i];return r}},{key:"isDoubleSided",get:function(){var e=this.unmanagedDrawables;if(null==e)return console.error("CubismDrawable.isDoubleSided: this.unmanagedDrawables is null."),!1;if(-1==this.unmanagedIndex)return console.error("CubismDrawable.isDoubleSided: this.index uninitialize."),!1;var n=e.constantFlags[this.unmanagedIndex];return h.hasIsDoubleSidedBit(n)}},{key:"isMasked",get:function(){var e=this.unmanagedDrawables;return null==e?(console.error("CubismDrawable.isMasked: this.unmanagedDrawables is null."),!1):-1==this.unmanagedIndex?(console.error("CubismDrawable.isMasked: this.index uninitialize."),!1):e.maskCounts[this.unmanagedIndex]>0}},{key:"isInverted",get:function(){var e=this.unmanagedDrawables;if(null==e)return console.error("CubismDrawable.isMasked: this.unmanagedDrawables is null."),!1;if(-1==this.unmanagedIndex)return console.error("CubismDrawable.isMasked: this.index uninitialize."),!1;var n=e.constantFlags[this.unmanagedIndex];return h.hasIsInvertedMaskBit(n)}},{key:"blendAdditive",get:function(){var e=this.unmanagedDrawables;if(null==e)return console.error("CubismDrawable.isMasked: this.unmanagedDrawables is null."),!1;if(-1==this.unmanagedIndex)return console.error("CubismDrawable.isMasked: this.index uninitialize."),!1;var n=e.constantFlags[this.unmanagedIndex];return h.hasBlendAdditiveBit(n)}},{key:"multiplyBlend",get:function(){var e=this.unmanagedDrawables;if(null==e)return console.error("CubismDrawable.isMasked: this.unmanagedDrawables is null."),!1;if(-1==this.unmanagedIndex)return console.error("CubismDrawable.isMasked: this.index uninitialize."),!1;var n=e.constantFlags[this.unmanagedIndex];return h.hasBlendMultiplicativeBit(n)}},{key:"multiplyColor",get:function(){if(null==this.unmanagedDrawables)return console.error("CubismDrawable.multiplyColor: this.unmanagedDrawables is null"),m.WHITE;if(-1==this.unmanagedIndex)return console.error("CubismDrawable.multiplyColor: this.index uninitialize."),m.WHITE;var e=4*this.unmanagedIndex,n=255*this.unmanagedDrawables.multiplyColors[e+0],a=255*this.unmanagedDrawables.multiplyColors[e+1],r=255*this.unmanagedDrawables.multiplyColors[e+2],i=255*this.unmanagedDrawables.multiplyColors[e+3];return new m(n,a,r,i)}},{key:"screenColor",get:function(){if(null==this.unmanagedDrawables)return console.error("CubismDrawable.multiplyColor: this.unmanagedDrawables is null"),m.BLACK;if(-1==this.unmanagedIndex)return console.error("CubismDrawable.multiplyColor: this.index uninitialize."),m.BLACK;var e=4*this.unmanagedIndex,n=255*this.unmanagedDrawables.screenColors[e+0],a=255*this.unmanagedDrawables.screenColors[e+1],r=255*this.unmanagedDrawables.screenColors[e+2],i=255*this.unmanagedDrawables.screenColors[e+3];return new m(n,a,r,i)}}]),n}(b)).prototype,"_unmanagedIndex",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),f=x))||f));t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismDynamicDrawableData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismCore.ts"],(function(t){var e,i,r,n;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,r=t.math},function(t){n=t.Utils}],execute:function(){i._RF.push({},"bb955Y6MWJObaUVzN15ZcI9","CubismDynamicDrawableData",void 0);t("default",function(){function t(t){this._flags=0,this._opacity=0,this._drawOrder=0,this._renderOrder=0,this._vertexPositions=new Array(0),this._multiplyColor=r.Color.WHITE,this._screenColor=r.Color.BLACK,this.vertexPositions=t}return t.createData=function(e){for(var i=e.drawables,n=new Array(i.count),s=i.vertexCounts,o=0;o<n.length;o++){for(var a=new Array(s[o]),u=0;u<a.length;u++)a[u]=r.Vec3.ZERO.clone();n[o]=new t(a)}return n},e(t,[{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"opacity",get:function(){return this._opacity},set:function(t){this._opacity=t}},{key:"drawOrder",get:function(){return this._drawOrder},set:function(t){this._drawOrder=t}},{key:"renderOrder",get:function(){return this._renderOrder},set:function(t){this._renderOrder=t}},{key:"vertexPositions",get:function(){return this._vertexPositions},set:function(t){this._vertexPositions=t}},{key:"multiplyColor",get:function(){return this._multiplyColor},set:function(t){this._multiplyColor=t}},{key:"screenColor",get:function(){return this._screenColor},set:function(t){this._screenColor=t}},{key:"isVisible",get:function(){return n.hasIsVisibleBit(this.flags)}},{key:"isVisibilityDirty",get:function(){return n.hasVisibilityDidChangeBit(this.flags)}},{key:"isOpacityDirty",get:function(){return n.hasOpacityDidChangeBit(this.flags)}},{key:"isDrawOrderDirty",get:function(){return n.hasDrawOrderDidChangeBit(this.flags)}},{key:"isRenderOrderDirty",get:function(){return n.hasRenderOrderDidChangeBit(this.flags)}},{key:"areVertexPositionsDirty",get:function(){return n.hasVertexPositionsDidChangeBit(this.flags)}},{key:"isBlendColorDirty",get:function(){return n.hasBlendColorDidChangeBit(this.flags)}},{key:"isAnyDirty",get:function(){return 0!=this.flags}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/CubismExp3Json.ts",["cc","./JsonParseUtils.ts"],(function(e){var n,t,i;return{setters:[function(e){n=e.cclegacy,t=e._decorator},function(e){i=e.default}],execute:function(){var r;n._RF.push({},"f1f185lqcBBAqkzQsbTAFHm","CubismExp3Json",void 0);var a=t.ccclass,s=i.asNumber,l=i.asString,u=(e("default",function(){function e(){this.type="",this.fadeInTime=1,this.fadeOutTime=1,this.parameters=new Array(0)}return e.loadFrom=function(e){var n=i.parse(e);return n?this.loadFromJson(n):null},e.loadFromJsonAsset=function(e){return null!=e.json?this.loadFromJson(e.json):null},e.loadFromJson=function(n){var t=l(n.Type),r=i.arrayedInstantiateFromJson(n.Parameters,u.instantiateFromJson),a=s(n.FadeInTime),o=s(n.FadeOutTime);if(void 0===t||void 0===r)return null;var d=new e;return d.type=t,d.parameters=r,d.fadeInTime=null!=a?a:1,d.fadeOutTime=null!=o?o:1,d},e}()),e("SerializableExpressionParameter",a("SerializableExpressionParameter")(r=function(){function e(e){var n,t,i;void 0===e&&(e={}),this.id=void 0,this.value=void 0,this.blend=void 0,this.id=null!=(n=e.id)?n:"",this.value=null!=(t=e.value)?t:0,this.blend=null!=(i=e.blend)?i:""}var n=e.prototype;return n.copyWith=function(n){var t,i,r;return void 0===n&&(n={}),new e({id:null!=(t=n.id)?t:this.id,value:null!=(i=n.value)?i:this.value,blend:null!=(r=n.blend)?r:this.blend})},n.equals=function(e){throw this===e||this.id==e.id&&this.value==e.value&&this.blend==e.blend},n.strictEquals=function(e){return this===e},e.instantiateFromJson=function(n){var t=l(n.Id),i=s(n.Value);if(void 0!==t&&void 0!==i)return new e({id:t,value:i,blend:l(n.Blend)})},e}())||r));(u||(u=e("SerializableExpressionParameter",{}))).DEFAULT=new u,n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismExpressionController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./CubismParameterBlendMode.ts","./CubismParameterExtensionMethods.ts","./CubismUpdateController.ts","./CubismUpdateExecutionOrder.ts","./ICubismUpdatable.ts","./CubismFadeMath.ts","./CubismExpressionList.ts","./CubismPlayingExpression.ts"],(function(e){var s,i,t,n,r,o,a,l,u,p,d,h,c,x,f,E,m,b,g,C;return{setters:[function(e){s=e.inheritsLoose,i=e.createClass,t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.CCInteger,u=e.game,p=e.math,d=e.Component},function(e){h=e.default},function(e){c=e.default},function(e){x=e.default},function(e){f=e.default},function(e){E=e.default},function(e){m=e.default},function(e){b=e.default},function(e){g=e.default},function(e){C=e.default}],execute:function(){var y,_,v,U,I,L,O,T,M,w;o._RF.push({},"35340LI/SVMH4HiUIMoS5Vt","CubismExpressionController",void 0);var S=a.ccclass,z=a.property;e("default",(_=S("CubismExpressionController"),v=z({type:g,serializable:!0,visible:!0}),U=z({type:l,serializable:!0,visible:!0}),I=z({serializable:!0,visible:!1}),_((y=m.SYMBOL,T=t((O=function(e){function t(){for(var s,i=arguments.length,t=new Array(i),o=0;o<i;o++)t[o]=arguments[o];return s=e.call.apply(e,[this].concat(t))||this,n(s,"expressionsList",T,r(s)),s._model=null,n(s,"currentExpressionIndex",M,r(s)),s._playingExpressions=new Array,s._lastExpressionIndex=-1,n(s,"_hasUpdateController",w,r(s)),s.bindedOnLateUpdate=s.onLateUpdate.bind(r(s)),s[y]=m.SYMBOL,s}s(t,e);var o=t.prototype;return o.startExpression=function(){if(null!=this.expressionsList&&null!=this.expressionsList.cubismExpressionObjects){this._lastExpressionIndex=this.currentExpressionIndex;var e=this._playingExpressions;if(e.length>0){var s=e[e.length-1];s.expressionEndTime=s.expressionUserTime+s.fadeOutTime,e[e.length-1]=s}var i=this.expressionsList;if(!(this.currentExpressionIndex<0||this.currentExpressionIndex>=i.cubismExpressionObjects.length))if(null!=this._model){var t=C.create(this._model,i.cubismExpressionObjects[this.currentExpressionIndex]);null!=t&&e.push(t)}else console.error("CubismExpressionController.startExpression(): model is null.")}},o.onLateUpdate=function(){if(this.enabled&&null!=this._model){this.currentExpressionIndex!=this._lastExpressionIndex&&this.startExpression();for(var e=0;e<this._playingExpressions.length;++e){var s=this._playingExpressions[e];s.expressionUserTime+=u.deltaTime;var i=Math.abs(s.fadeInTime)<p.EPSILON?1:b.getEasingSine(s.expressionUserTime/s.fadeInTime),t=Math.abs(s.expressionEndTime)<p.EPSILON||s.expressionEndTime<0?1:b.getEasingSine((s.expressionEndTime-s.expressionUserTime)/s.fadeOutTime);s.weight=i*t;for(var n=0;n<s.destinations.length;n++){var r=s.destinations[n];if(null!=r)switch(s.blend[n]){case c.Additive:x.addToValue(r,s.value[n],s.weight);break;case c.Multiply:x.multiplyValueBy(r,s.value[n],s.weight);break;case c.Override:r.value=r.value*(1-s.weight)+s.value[n]*s.weight}}this._playingExpressions[e]=s}for(var o=this._playingExpressions.length-1;o>=0;--o)if(!(this._playingExpressions[o].weight>0)){for(var a=o+1;a<this._playingExpressions.length;a++)this._playingExpressions[a-1]=this._playingExpressions[a];this._playingExpressions.length-=1}}},o.onEnable=function(){this._model=h.findCubismModel(this),this.hasUpdateController=null!=this.getComponent(f)},o.lateUpdate=function(){this.hasUpdateController||this.onLateUpdate()},i(t,[{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(e){this._hasUpdateController=e}},{key:"executionOrder",get:function(){return E.CUBISM_EXPRESSION_CONTROLLER}},{key:"needsUpdateOnEditing",get:function(){return!1}}]),t}(d)).prototype,"expressionsList",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(O.prototype,"currentExpressionIndex",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),w=t(O.prototype,"_hasUpdateController",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=O))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismExpressionData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismParameterBlendMode.ts"],(function(e){var r,i,t,a,n,l,u,s,o,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,u=e.CCFloat,s=e.Enum,o=e.Asset},function(e){c=e.default}],execute:function(){var p,b,d,f,m,v,y,h,z,w,g,A,I,T,x,D,E,O,C,P;n._RF.push({},"85cbdRDIGxAuLnMKtyAUrP7","CubismExpressionData",void 0);var M=l.ccclass,k=l.property,_=e("SerializableExpressionParameter",(p=M("CubismExpressionData.SerializableExpressionParameter"),b=k({serializable:!0}),d=k({type:u,serializable:!0}),f=k({type:s(c),serializable:!0}),p((y=r((v=function(){function e(e){var r,i,a;void 0===e&&(e={}),t(this,"id",y,this),t(this,"value",h,this),t(this,"blend",z,this),this.id=null!=(r=e.id)?r:"",this.value=null!=(i=e.value)?i:0,this.blend=null!=(a=e.blend)?a:c.Override}var r=e.prototype;return r.copyWith=function(r){var i,t,a;return void 0===r&&(r={}),new e({id:null!=(i=r.id)?i:this.id,value:null!=(t=r.value)?t:this.value,blend:null!=(a=r.blend)?a:this.blend})},r.equals=function(e){return this===e},r.strictEquals=function(e){return this===e},e}()).prototype,"id",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=r(v.prototype,"value",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=r(v.prototype,"blend",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Override}}),m=v))||m));e("default",(w=M("CubismExpressionData"),g=k({serializable:!0}),A=k({type:u,serializable:!0}),I=k({type:u,serializable:!0}),T=k({type:_,serializable:!0}),w((E=r((D=function(e){function r(){for(var r,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return r=e.call.apply(e,[this].concat(n))||this,t(r,"type",E,a(r)),t(r,"fadeInTime",O,a(r)),t(r,"fadeOutTime",C,a(r)),t(r,"parameters",P,a(r)),r}return i(r,e),r.createInstance=function(e){var i=new r;return this.createInstance2(i,e)},r.createInstance2=function(e,r){e.type=r.type,e.fadeInTime=r.fadeInTime,e.fadeOutTime=r.fadeOutTime,e.parameters=new Array(r.parameters.length);for(var i=0;i<r.parameters.length;i++){var t=void 0;switch(r.parameters[i].blend){case"Add":t=c.Additive;break;case"Multiply":t=c.Multiply;break;case"Overwrite":t=c.Override;break;default:t=c.Additive}e.parameters[i]=new _({id:r.parameters[i].id,value:r.parameters[i].value,blend:t})}return e},r}(o)).prototype,"type",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=r(D.prototype,"fadeInTime",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=r(D.prototype,"fadeOutTime",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=r(D.prototype,"parameters",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),x=D))||x));n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismExpressionList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismExpressionData.ts"],(function(e){var i,t,r,s,n,o,a,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,a=e.Asset},function(e){c=e.default}],execute:function(){var u,l,p,b,f;n._RF.push({},"05102FHoktMtqG1z/YTKI/G","CubismExpressionList",void 0);var y=o.ccclass,m=o.property;e("default",(u=y("CubismExpressionList"),l=m({type:[c],serializable:!0}),u((f=i((b=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return i=e.call.apply(e,[this].concat(n))||this,r(i,"cubismExpressionObjects",f,s(i)),i}return t(i,e),i}(a)).prototype,"cubismExpressionObjects",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),p=b))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismExpressionPreview.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./CubismExpressionController.ts"],(function(e){var n,o,r,t,s,i;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,t=e.Component},function(e){s=e.default},function(e){i=e.default}],execute:function(){var l;o._RF.push({},"3b9e0i+o2xCSoYa6MiaU01T","CubismExpressionPreview",void 0);var u=r.ccclass;r.property,e("default",u("CubismExpressionPreview")(l=function(e){function o(){for(var n,o=arguments.length,r=new Array(o),t=0;t<o;t++)r[t]=arguments[t];return(n=e.call.apply(e,[this].concat(r))||this)._expressionController=null,n}n(o,e);var r=o.prototype;return r.start=function(){var e=s.findCubismModel(this);null!=e?this._expressionController=e.getComponent(i):console.assert(null!=e)},r.changeExpression=function(e,n){null!=this._expressionController&&(this._expressionController.currentExpressionIndex=Number.parseInt(n))},o}(t))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismEyeBlinkController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods.ts","./ComponentExtensionMethods2.ts","./CubismEyeBlinkParameter.ts","./CubismParameterBlendMode.ts","./ICubismUpdatable.ts","./CubismParameter.ts","./CubismUpdateExecutionOrder.ts","./CubismUpdateController.ts","./CubismParameterExtensionMethods.ts"],(function(e){var t,n,i,o,r,a,s,l,u,d,p,c,f,h,b,C,y,m,g;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,i=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Enum,u=e.CCFloat,d=e.Component},function(e){p=e.default},function(e){c=e.default},function(e){f=e.default},function(e){h=e.default},function(e){b=e.default},function(e){C=e.default},function(e){y=e.default},function(e){m=e.default},function(e){g=e.default}],execute:function(){var U,v,M,_,E,L,O,k,B,z;a._RF.push({},"6a2800obpRI5ocCk9Q5d1yx","CubismEyeBlinkController",void 0);var x=s.ccclass,P=s.property;e("default",(v=x("CubismEyeBlinkController"),M=P({type:l(h),visible:!0,serializable:!0}),_=P({type:u,visible:!0,serializable:!0,range:[0,1,.01]}),E=P({visible:!1,serializable:!1}),v((U=b.SYMBOL,k=i((O=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"blendMode",k,r(t)),o(t,"eyeOpening",B,r(t)),t._destinations=null,o(t,"_hasUpdateController",z,r(t)),t.bindedOnLateUpdate=t.onLateUpdate.bind(r(t)),t[U]=b.SYMBOL,t}t(i,e);var a=i.prototype;return a.refresh=function(){var e,t=c.findCubismModel(this);if(null!=t){var n=null!=t.parameters?p.getComponentsMany(t.parameters,f):null;this.destinations=new Array(null!=(e=null==n?void 0:n.length)?e:0);for(var i=0;i<this.destinations.length;i++)this.destinations[i]=n[i].getComponent(C);this.hasUpdateController=null!=this.getComponent(m)}},a.onLateUpdate=function(){this.enabled&&null!=this.destinations&&g.blendToValueArray(this.destinations,this.blendMode,this.eyeOpening)},a.start=function(){this.refresh()},a.lateUpdate=function(){this.hasUpdateController||this.onLateUpdate()},n(i,[{key:"destinations",get:function(){return this._destinations},set:function(e){this._destinations=e}},{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(e){this._hasUpdateController=e}},{key:"executionOrder",get:function(){return y.CUBISM_EYE_BLINK_CONTROLLER}},{key:"needsUpdateOnEditing",get:function(){return!1}}]),i}(d)).prototype,"blendMode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.Multiply}}),B=i(O.prototype,"eyeOpening",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=i(O.prototype,"_hasUpdateController",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=O))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismEyeBlinkParameter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,i=e.Component}],execute:function(){var u;n._RF.push({},"3476fv7R5dOhaSJnAuPgIVv","CubismEyeBlinkParameter",void 0);var s=r.ccclass;e("default",s("CubismEyeBlinkParameter")(u=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n}(i))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismFadeController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./CubismParameterStore.ts","./CubismUpdateController.ts","./CubismUpdateExecutionOrder.ts","./ICubismUpdatable.ts","./CubismFadeMath.ts","./CubismFadeMotionList.ts"],(function(t){var e,a,n,i,r,s,o,l,u,d,m,h,f,p,g,c,_,v;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass,n=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,l=t.animation,u=t.game,d=t.math,m=t.Component},function(t){h=t.default},function(t){f=t.default},function(t){p=t.default},function(t){g=t.default},function(t){c=t.default},function(t){_=t.default},function(t){v=t.default}],execute:function(){var C,P,b,F,S,T,y,I;s._RF.push({},"737a1a5MvhKt5IWG8G6X233","CubismFadeController",void 0);var L=o.ccclass,U=o.property;t("default",(P=L("CubismFadeController"),b=U(v),F=U({serializable:!1,visible:!1}),P((C=c.SYMBOL,y=n((T=function(t){function n(){for(var e,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(e,"cubismFadeMotionList",y,r(e)),e._destinationParameters=null,e._destinationParts=null,e._motionController=null,i(e,"_hasUpdateController",I,r(e)),e._fadeStates=null,e._animator=null,e._parameterStore=null,e._isFading=null,e.bindedOnLateUpdate=e.onLateUpdate.bind(r(e)),e[C]=c.SYMBOL,e}e(n,t);var s=n.prototype;return s.refresh=function(){var t,e,a,n;this._animator=this.getComponent(l.AnimationController),null!=this._animator&&(this.destinationParameters=null!=(t=null==(e=h.findCubismModel(this))?void 0:e.parameters)?t:null,this.destinationParts=null!=(a=null==(n=h.findCubismModel(this))?void 0:n.parts)?a:null,this._parameterStore=this.getComponent(f),this.hasUpdateController=null!=this.getComponent(p),(null==this._fadeStates||0==this._fadeStates.length)&&this._motionController,null!=this._fadeStates&&(this._isFading=new Array(this._fadeStates.length)))},s.onLateUpdate=function(t){if(this.enabled&&null!=this._fadeStates&&null!=this._parameterStore&&null!=this.destinationParameters&&null!=this.destinationParts&&null!=this._isFading){for(var e=u.totalTime,a=0;a<this._fadeStates.length;++a){this._isFading[a]=!1;var n=this._fadeStates[a].getPlayingMotions();if(!(null==n||n.length<=1)){var i=n[n.length-1],r=i.motion,s=e-i.startTime;if(null!=(null==r?void 0:r.parameterFadeInTimes))for(var o=0;o<r.parameterFadeInTimes.length;o++)if(s<=r.fadeInTime||0<=r.parameterFadeInTimes[o]&&s<=r.parameterFadeInTimes[o]){this._isFading[a]=!0;break}}}for(var l=!0,d=0;d<this._fadeStates.length;++d){var m=this._fadeStates[d].getPlayingMotions();if(null!=m){var h=m.length-1;if(this._isFading[d])l=!1;else for(var f=h;f>=0&&!(m.length<=1);--f){e<=m[f].endTime||this._fadeStates[d].stopAnimation(f)}}}if(!l){this._parameterStore.restoreParameters();for(var p=0;p<this._fadeStates.length;++p)this._isFading[p]&&this.updateFade(this._fadeStates[p])}}},s.updateFade=function(t){var e=t.getPlayingMotions();if(null!=e&&null!=this.destinationParameters&&null!=this.destinationParts){var a=t.getLayerWeight(),n=u.totalTime;if(e.length>0&&null!=e[e.length-1].motion&&e[e.length-1].isLooping){var i=e[e.length-1];if(null!=i.motion){var r=n+i.motion.fadeOutTime;for(i.endTime=r;!(i.startTime+i.motion.motionLength>=n);)i.startTime+=i.motion.motionLength;e[e.length-1]=i}}for(var s=0;s<e.length;s++){var o=e[s],l=o.motion;if(null!=l&&null!=l.parameterIds&&null!=l.parameterCurves&&null!=l.parameterFadeInTimes&&null!=l.parameterFadeOutTimes){var d=n-o.startTime,m=o.endTime-d,h=l.fadeInTime,f=l.fadeOutTime,p=h<=0?1:_.getEasingSine(d/h),g=f<=0?1:_.getEasingSine((o.endTime-u.totalTime)/f);e[s]=o;for(var c=0==s?p*g:p*g*a,v=0;v<this.destinationParameters.length;++v){for(var C=-1,P=0;P<l.parameterIds.length;++P)if(l.parameterIds[P]==this.destinationParameters[v].id){C=P;break}C<0||(this.destinationParameters[v].value=this.evaluate(l.parameterCurves[C],d,m,p,g,l.parameterFadeInTimes[C],l.parameterFadeOutTimes[C],c,this.destinationParameters[v].value))}for(var b=0;b<this.destinationParts.length;++b){for(var F=-1,S=0;S<l.parameterIds.length;++S)if(l.parameterIds[S]==this.destinationParts[b].id){F=S;break}F<0||(this.destinationParts[b].opacity=this.evaluate(l.parameterCurves[F],d,m,p,g,l.parameterFadeInTimes[F],l.parameterFadeOutTimes[F],c,this.destinationParts[b].opacity))}}}}},s.evaluate=function(t,e,a,n,i,r,s,o,l){if(t.keyframes.length<=0)return l;if(r<0&&s<0)return l+(t.evaluate(e)-l)*o;var u=(r<0?n:r<d.EPSILON?1:_.getEasingSine(e/r))*(s<0?i:s<d.EPSILON?1:_.getEasingSine(a/s));return l+(t.evaluate(e)-l)*u},s.onEnable=function(){this.refresh()},s.lateUpdate=function(t){this.hasUpdateController||this.onLateUpdate(t)},a(n,[{key:"destinationParameters",get:function(){return this._destinationParameters},set:function(t){this._destinationParameters=t}},{key:"destinationParts",get:function(){return this._destinationParts},set:function(t){this._destinationParts=t}},{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(t){this._hasUpdateController=t}},{key:"executionOrder",get:function(){return g.CUBISM_FADE_CONTROLLER}},{key:"needsUpdateOnEditing",get:function(){return!1}}]),n}(m)).prototype,"cubismFadeMotionList",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(T.prototype,"_hasUpdateController",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=T))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/CubismFadeCurveType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"64b6bpd9otIIL1OnJZ/1QyN","CubismFadeCurveType",void 0);var r=e("default",function(e){return e[e.Parameter=0]="Parameter",e[e.Part=1]="Part",e}(r||{}));t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismFadeMath.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var n;e._RF.push({},"49450AHKPdKt5M542I0EPpt","CubismFadeMath",void 0),(n||(n={})).getEasingSine=function(t){return t<0?0:t>1?1:.5-.5*Math.cos(t*Math.PI)};t("default",n);e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismFadeMotionData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismMotion3Json.ts","./CubismSerializableCurve.ts","./CubismSerializableKeyFrame.ts"],(function(e){var r,t,a,n,i,l,o,u,m,s,f,d;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,o=e.CCString,u=e.CCFloat,m=e.Asset},function(e){s=e.default},function(e){f=e.default},function(e){d=e.default}],execute:function(){var v,p,c,g,h,T,y,b,C,I,F,w,A,O,z,P,L,S,D;i._RF.push({},"4d581b8x49CpoJsh+kPQxAi","CubismFadeMotionData",void 0);var J,M=l.ccclass,N=l.property;e("default",(v=M("CubismFadeMotionData"),p=N(o),c=N(u),g=N(u),h=N([o]),T=N([f]),y=N([u]),b=N([u]),C=N(u),v((w=r((F=function(e){t(i,e);var r=i.prototype;function i(r,t,i,l,o,u,m,s){var f;return f=e.call(this)||this,a(f,"motionName",w,n(f)),a(f,"fadeInTime",A,n(f)),a(f,"fadeOutTime",O,n(f)),a(f,"parameterIds",z,n(f)),f.parameterCurves=void 0,a(f,"internalParameterCurves",P,n(f)),a(f,"parameterFadeInTimes",L,n(f)),a(f,"parameterFadeOutTimes",S,n(f)),a(f,"motionLength",D,n(f)),f.motionName=null!=r?r:"",f.fadeInTime=null!=t?t:0,f.fadeOutTime=null!=i?i:0,f.parameterIds=null!=l?l:new Array(0),f.internalParameterCurves=null!=o?o:new Array(0),f.parameterCurves=new Array(f.internalParameterCurves.length),f.parameterFadeInTimes=null!=u?u:new Array(0),f.parameterFadeOutTimes=null!=m?m:new Array(0),f.motionLength=null!=s?s:0,f.internalConvertToCurves(),f}return r.onLoaded=function(){this.internalConvertToCurves()},r.internalConvertToCurves=function(){for(var e=this.internalParameterCurves,r=new Array(e.length),t=0;t<e.length;t++){var a=e[t];r[t]=a.toRealCurve()}this.parameterCurves=r},i.createInstance=function(e,r,t,a,n){void 0===a&&(a=!1),void 0===n&&(n=!1);var l=new i,o=e.curves.length;return l.parameterIds=new Array(o),l.parameterFadeInTimes=new Array(o),l.parameterFadeOutTimes=new Array(o),l.parameterCurves=new Array(o),this.toSetInstance(l,e,r,t,a,n)},i.toSetInstance=function(e,r,t,a,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),e.motionName=t,e.motionLength=a,e.fadeInTime=r.meta.fadeInTime<0?1:r.meta.fadeInTime,e.fadeOutTime=r.meta.fadeOutTime<0?1:r.meta.fadeOutTime;var l=r.curves,o=e.parameterIds,u=e.parameterFadeInTimes,m=e.parameterFadeOutTimes,v=e.parameterCurves,p=e.internalParameterCurves;if(null!=o&&null!=u&&null!=m){v.length=v.length<l.length?l.length:v.length,p.length=p.length<l.length?l.length:p.length;for(var c=0;c<l.length;c++){var g=l[c];if("PartOpacity"!=g.target||!n||i){o[c]=g.id,u[c]=g.fadeInTime<0?-1:g.fadeInTime,m[c]=g.fadeOutTime<0?-1:g.fadeOutTime;var h=s.convertCurveSegmentsToKeyframes(g.segments);p[c]=new f(h.length);for(var T=0;T<h.length;T++){var y=h[T],b=y[0],C=y[1],I=new d(b,C.value,C.leftTangent,C.leftTangentWeight,C.rightTangent,C.rightTangentWeight);p[c].setKeyFrame(T,I)}}}}return e.onLoaded(),e},i.deserializeFromJson=function(e){var r=e.motionName;if(_(r)){var t=e.fadeInTime;if(x(t)){var a=e.fadeOutTime;if(x(a)){var n=K(e.parameterIds,_);if(n){var l=J.instantiateFromJson(e.internalParameterCurves);if(l){var o=K(e.parameterFadeInTimes,x);if(o){var u=K(e.parameterFadeOutTimes,x);if(u){var m=e.motionLength;if(x(m))return new i(r,t,a,n,l,o,u,m)}}}}}}}},i}(m)).prototype,"motionName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=r(F.prototype,"fadeInTime",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=r(F.prototype,"fadeOutTime",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=r(F.prototype,"parameterIds",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=r(F.prototype,"internalParameterCurves",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=r(F.prototype,"parameterFadeInTimes",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=r(F.prototype,"parameterFadeOutTimes",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=r(F.prototype,"motionLength",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=F))||I));function _(e){return"string"==typeof e}function x(e){return"number"==typeof e}function K(e,r){if(Array.isArray(e)&&e.every(r))return e}(J||(J={})).instantiateFromJson=function(e){if(Array.isArray(e)){for(var r=new Array(e.length),t=0;t<e.length;t++){var a=f.instantiateFromJson(e[t]);if(null==a)return;r[t]=a}return r}},i._RF.pop()}}}));

System.register("chunks:///_virtual/CubismFadeMotionList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismFadeMotionData.ts"],(function(e){var t,i,n,r,o,a,s,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.CCInteger,c=e.Asset},function(e){u=e.default}],execute:function(){var l,d,p,b,f,m,y;o._RF.push({},"e4ddfoqWFdNCrpBzoKbjnsV","CubismFadeMotionList",void 0);var F=a.ccclass,g=a.property;e("default",(l=F("CubismFadeMotionList"),d=g([s]),p=g([u]),l((m=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"motionInstanceIds",m,r(t)),n(t,"cubismFadeMotionObjects",y,r(t)),t}return i(t,e),t}(c)).prototype,"motionInstanceIds",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),y=t(f.prototype,"cubismFadeMotionObjects",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),b=f))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismFadePlayingMotion.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismFadeMotionData.ts"],(function(i){var e,t,r,n,o,a;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.initializerDefineProperty},function(i){r=i.cclegacy,n=i._decorator,o=i.CCFloat},function(i){a=i.default}],execute:function(){var l,u,s,b,c,p,f,m,h,d,g,y,w,z,F;r._RF.push({},"b2f76VOBQNCVI4xUAsiwyFI","CubismFadePlayingMotion",void 0);var v=n.property;i("default",(l=v(o),u=v(o),s=v(o),b=v({type:Number,slide:!0,min:0,max:Number.MAX_VALUE}),c=v(a),p=v(Boolean),f=v({serializable:!1,visible:!1}),h=e((m=function(){t(this,"startTime",h,this),t(this,"endTime",d,this),t(this,"fadeInStartTime",g,this),t(this,"speed",y,this),t(this,"motion",w,this),t(this,"isLooping",z,this),t(this,"weight",F,this)}).prototype,"startTime",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=e(m.prototype,"endTime",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=e(m.prototype,"fadeInStartTime",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=e(m.prototype,"speed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=e(m.prototype,"motion",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(m.prototype,"isLooping",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=e(m.prototype,"weight",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m));r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismFadeStateObserver.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,e,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,o=t.animation}],execute:function(){var s;n._RF.push({},"877a8QJxKtKt5Yz/nVzDxqJ","CubismFadeStateObserver",void 0);var a=e.ccclass;t("default",a("CubismFadeStateObserver")(s=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this)._cubismFadeMotionList=null,i._playingMotions=null,i._isDefaulState=!1,i._layerIndex=0,i._layerWeight=0,i._isStateTransitionFinished=!1,i}i(n,t);var e=n.prototype;return e.getPlayingMotions=function(){return this._playingMotions},e.isDefaultState=function(){return this._isDefaulState},e.getLayerWeight=function(){return this._layerWeight},e.getStateTransitionFinished=function(){return this._isStateTransitionFinished},e.setStateTransitionFinished=function(t){this._isStateTransitionFinished=t},e.stopAnimation=function(t){null!=this._playingMotions&&(this._playingMotions=this._playingMotions.splice(t,1))},e.onEnable=function(){this._isStateTransitionFinished=!1,null==this._playingMotions&&(this._playingMotions=new Array)},e.onMotionStateEnter=function(i,n){t.prototype.onMotionStateEnter.call(this,i,n)},e.onMotionStateExit=function(i,n){t.prototype.onMotionStateExit.call(this,i,n),this._isStateTransitionFinished=!0},n}(o.StateMachineComponent))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismGeometry.ts",["cc","./CubismVector.ts"],(function(t){var h,n,i;return{setters:[function(t){h=t.cclegacy,n=t.geometry},function(t){i=t.CubismVector3}],execute:function(){h._RF.push({},"e23a0UI8ThEwI1Ogfvga217","CubismGeometry",void 0);t("CubismBounds",function(){function t(t,h,n,i,s,c){this.cx=void 0,this.cy=void 0,this.cz=void 0,this.hw=void 0,this.hh=void 0,this.hd=void 0,this.cx=t,this.cy=h,this.cz=n,this.hw=i,this.hh=s,this.hd=c}var h=t.prototype;return h.center=function(){return new i(this.cx,this.cy,this.cz)},h.extents=function(){return new i(this.hw,this.hh,this.hd)},h.min=function(){return this.center().subtract(this.extents())},h.max=function(){return this.center().add(this.extents())},h.contains=function(t){var h=this.min(),n=this.max();return n.x>=t.x&&n.y>=t.y&&n.z>=t.z&&h.x<=t.x&&h.y<=t.y&&h.z<=t.z},h.copyWith=function(h){var n,i,s,c,e,u;return void 0===h&&(h={}),new t(null!=(n=h.cx)?n:this.cx,null!=(i=h.cy)?i:this.cy,null!=(s=h.cz)?s:this.cz,null!=(c=h.hw)?c:this.hw,null!=(e=h.hh)?e:this.hh,null!=(u=h.hd)?u:this.hd)},h.equals=function(t){return this===t||this.cx===t.cx&&this.cy===t.cy&&this.cz===t.cz&&this.hw===t.hw&&this.hh===t.hh&&this.hd===t.hd},h.strictEquals=function(t){return this===t},h.toAABB=function(){return new n.AABB(this.cx,this.cy,this.cz,this.hw,this.hh,this.hd)},t.from6f=function(h){var n,i,s,c,e,u;return void 0===h&&(h={}),new t(null!=(n=h.cx)?n:0,null!=(i=h.cy)?i:0,null!=(s=h.cz)?s:0,null!=(c=h.hw)?c:0,null!=(e=h.hh)?e:0,null!=(u=h.hd)?u:0)},t.fromVector=function(h,n){return new t(h.x,h.y,h.z,.5*n.x,.5*n.y,.5*n.z)},t.fromAABB=function(h){return new t(h.center.x,h.center.y,h.center.z,h.halfExtents.x,h.halfExtents.y,h.halfExtents.z)},t}());h._RF.pop()}}}));

System.register("chunks:///_virtual/CubismHarmonicMotionController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismParameterBlendMode.ts","./CubismParameter.ts","./ICubismUpdatable.ts","./CubismUpdateExecutionOrder.ts","./CubismHarmonicMotionParameter.ts","./CubismUpdateController.ts","./ComponentExtensionMethods.ts","./ComponentExtensionMethods2.ts","./CubismParameterExtensionMethods.ts"],(function(e){var t,n,i,s,o,r,a,l,u,c,d,h,f,p,C,m,b,y,g;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,i=e.applyDecoratedDescriptor,s=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Enum,u=e.CCFloat,c=e.Component},function(e){d=e.default},function(e){h=e.default},function(e){f=e.default},function(e){p=e.default},function(e){C=e.default},function(e){m=e.default},function(e){b=e.default},function(e){y=e.default},function(e){g=e.default}],execute:function(){var M,U,_,v,O,L,T,z,E,w;r._RF.push({},"05db38wRmhC3qluCX3qcZm5","CubismHarmonicMotionController",void 0);var k=a.ccclass,x=a.property;e("default",(U=k("CubismHarmonicMotionController"),_=x({type:l(d),serializable:!0,visible:!0}),v=x({type:[u],serializable:!0,visible:!0}),O=x({serializable:!0,visible:!1}),U((M=f.SYMBOL,z=i((T=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).defaultChannelCount=1,s(t,"blendMode",z,o(t)),s(t,"channelTimescales",E,o(t)),t._sources=[],t._destinations=[],s(t,"_hasUpdateController",w,o(t)),t.bindedOnLateUpdate=t.onLateUpdate.bind(o(t)),t[M]=f.SYMBOL,t}t(i,e);var r=i.prototype;return r.refresh=function(){var e=y.findCubismModel(this);if(null!=e&&null!=e.parameters){this.sources=b.getComponentsMany(e.parameters,C),this.destinations=new Array(this.sources.length);for(var t=0;t<this.sources.length;++t)this.destinations[t]=this.sources[t].getComponent(h);this.hasUpdateController=null!=this.getComponent(m)}},r.onLateUpdate=function(e){if(this.enabled&&null!=this.sources)for(var t=0;t<this.sources.length;++t)this.sources[t].play(this.channelTimescales),g.blendToValue(this.destinations[t],this.blendMode,this.sources[t].evaluate())},r.start=function(){this.refresh()},r.lateUpdate=function(e){this.hasUpdateController||this.onLateUpdate(e)},r.resetInEditor=function(){this.channelTimescales=new Array(this.defaultChannelCount);for(var e=0;e<this.defaultChannelCount;++e)this.channelTimescales[e]=1},n(i,[{key:"sources",get:function(){return this._sources},set:function(e){this._sources=e}},{key:"destinations",get:function(){return this._destinations},set:function(e){this._destinations=e}},{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(e){this._hasUpdateController=e}},{key:"executionOrder",get:function(){return p.CUBISM_HARMONIC_MOTION_CONTROLLER}},{key:"needsUpdateOnEditing",get:function(){return!1}}]),i}(c)).prototype,"blendMode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.Additive}}),E=i(T.prototype,"channelTimescales",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=i(T.prototype,"_hasUpdateController",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=T))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismHarmonicMotionDirection.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"c9c6aKYNPpK/YLMRJDvNKqZ","CubismHarmonicMotionDirection",void 0);var c=t("default",function(t){return t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Centric=2]="Centric",t}(c||{}));i._RF.pop()}}}));

System.register("chunks:///_virtual/CubismHarmonicMotionParameter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismHarmonicMotionDirection.ts","./CubismParameter.ts"],(function(i){var e,t,a,n,u,r,l,m,s,o,c,h,g,f,b;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,a=i.initializerDefineProperty,n=i.assertThisInitialized,u=i.createClass},function(i){r=i.cclegacy,l=i._decorator,m=i.CCInteger,s=i.Enum,o=i.CCFloat,c=i.game,h=i.math,g=i.Component},function(i){f=i.default},function(i){b=i.default}],execute:function(){var p,d,v,V,z,y,R,_,x,C,k,M,P;r._RF.push({},"1a54e+kVJ9NVaEU7UWfcDRv","CubismHarmonicMotionParameter",void 0);var w=l.ccclass,I=l.property;i("default",(p=w("CubismHarmonicMotionParameter"),d=I({type:m,serializable:!0,visible:!0}),v=I({type:s(f),serializable:!0,visible:!0}),V=I({type:o,slide:!0,range:[0,1,.01],serializable:!0,visible:!0}),z=I({type:o,slide:!0,range:[0,1,.01],serializable:!0,visible:!0}),y=I({type:o,slide:!0,range:[.01,10,.01],serializable:!0,visible:!0}),p((x=e((_=function(i){function e(){for(var e,t=arguments.length,u=new Array(t),r=0;r<t;r++)u[r]=arguments[r];return e=i.call.apply(i,[this].concat(u))||this,a(e,"channel",x,n(e)),a(e,"direction",C,n(e)),a(e,"normalizedOrigin",k,n(e)),a(e,"normalizedRange",M,n(e)),a(e,"duration",P,n(e)),e._maximumValue=0,e._minimumValue=0,e._valueRange=0,e._t=0,e}t(e,i);var r=e.prototype;return r.initialize=function(){var i=this.getComponent(b);null!==i&&(this.maximumValue=i.maximumValue,this.minimumValue=i.minimumValue,this.valueRange=this.maximumValue-this.minimumValue)},r.play=function(i){for(this.t+=c.deltaTime*i[this.channel];this.t>this.duration;)this.t-=this.duration},r.evaluate=function(){this.isInitialized||this.initialize();var i=this.minimumValue+this.normalizedOrigin*this.valueRange,e=this.normalizedRange*this.valueRange,t=this.clamp(i,e);return(i=t[0])+(e=t[1])*Math.sin(this.t*(2*Math.PI)/this.duration)},r.clamp=function(i,e){switch(this.direction){case f.Left:i-e>=this.minimumValue?i-=e/=2:(e=(i-this.minimumValue)/2,i=this.minimumValue+e,this.normalizedRange=2*e/this.valueRange);break;case f.Right:i+e<=this.maximumValue?i+=e/=2:(e=(this.maximumValue-i)/2,i=this.maximumValue-e,this.normalizedRange=2*e/this.valueRange);break;case f.Centric:break;default:this.direction}return i-e<this.minimumValue?(e=i-this.minimumValue,this.normalizedRange=e/this.valueRange):i+e>this.maximumValue&&(e=this.maximumValue-i,this.normalizedRange=e/this.valueRange),[i,e]},u(e,[{key:"isInitialized",get:function(){return Math.abs(this.valueRange)>=h.EPSILON}},{key:"maximumValue",get:function(){return this._maximumValue},set:function(i){this._maximumValue=i}},{key:"minimumValue",get:function(){return this._minimumValue},set:function(i){this._minimumValue=i}},{key:"valueRange",get:function(){return this._valueRange},set:function(i){this._valueRange=i}},{key:"t",get:function(){return this._t},set:function(i){this._t=i}}]),e}(g)).prototype,"channel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=e(_.prototype,"direction",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Left}}),k=e(_.prototype,"normalizedOrigin",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),M=e(_.prototype,"normalizedRange",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),P=e(_.prototype,"duration",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),R=_))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismHitDrawable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,n;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,i=t._decorator,n=t.Component}],execute:function(){var s;r._RF.push({},"f2455hKz0lJIIVCP3ks0BH9","CubismHitDrawable",void 0);var u=i.ccclass;t("default",u("CubismHitDrawable")(s=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r}(n))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismLookAxis.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"fbe33SWBttK2oowNZUGpzSX","CubismLookAxis",void 0);var u=t("default",function(t){return t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z",t}(u||{}));e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismLookController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./CubismParameter.ts","./Utils.ts","./ComponentExtensionMethods.ts","./CubismParameterBlendMode.ts","./CubismParameterExtensionMethods.ts","./CubismUpdateController.ts","./CubismUpdateExecutionOrder.ts","./ICubismUpdatable.ts","./ObjectExtensionMethods.ts","./CubismLookParameter.ts","./ICubismLookTarget.ts"],(function(t){var e,n,i,o,r,s,a,l,u,c,p,f,h,g,d,m,b,y,C,_,v,I,P,O,U,k;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,i=t.applyDecoratedDescriptor,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,l=t.Enum,u=t.CCObject,c=t.Component,p=t.Node,f=t.Asset,h=t.CCFloat,g=t.math},function(t){d=t.default},function(t){m=t.default},function(t){b=t.MathExtensions},function(t){y=t.default},function(t){C=t.default},function(t){_=t.default},function(t){v=t.default},function(t){I=t.default},function(t){P=t.default},function(t){O=t.default},function(t){U=t.default},function(t){k=t.default}],execute:function(){var L,w,M,E,z,A,N,x,j,B,D,V,R,T,S,F,Z,Y;s._RF.push({},"738e4XIt+xJL4ncemjnca3E","CubismLookController",void 0);var H=a.ccclass,J=a.property;t("CubismLookController",(w=H("CubismLookController"),M=J({type:l(C),serializable:!0,visible:!0}),E=J({type:u,serializable:!0,visible:!1}),z=J({type:u,visible:!0}),A=J({type:c,visible:!0}),N=J({type:p,visible:!0}),x=J({type:f,visible:!0}),j=J({type:p,serializable:!0,visible:!0}),B=J({type:h,serializable:!0,visible:!0}),D=J({serializable:!0,visible:!1}),w((L=P.SYMBOL,T=i((R=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,o(e,"blendMode",T,r(e)),o(e,"_target",S,r(e)),e._targetInterface=null,o(e,"center",F,r(e)),o(e,"damping",Z,r(e)),e._sources=new Array(0),e._destinations=new Array(0),e._lastPosition=g.Vec3.ZERO.clone(),e._goalPosition=g.Vec3.ZERO.clone(),e.velocityBuffer=g.Vec3.ZERO.clone(),o(e,"_hasUpdateController",Y,r(e)),e.bindedOnLateUpdate=e.onLateUpdate.bind(r(e)),e[L]=P.SYMBOL,e}e(i,t);var s=i.prototype;return s.refresh=function(){var t=d.findCubismModel(this);if(null!=t&&null!=t.parameters){this.sources=y.getComponentsMany(t.parameters,U),this.destinations=new Array(this.sources.length);for(var e=0;e<this.sources.length;e++)this.destinations[e]=this.sources[e].getComponent(m);this.hasUpdateController=null!=this.getComponent(v)}},s.onLateUpdate=function(){if(this.enabled&&null!=this.destinations){var t=this.targetInterface;if(null!=t&&t.isActive()&&null!=this.center){var e=this.lastPosition,n=this.node.inverseTransformPoint(new g.Vec3,t.getPosition());if(this.goalPosition=g.Vec3.subtract(new g.Vec3,n,this.center.position),e!=this.goalPosition){var i=b.Vec3.smoothDamp(e,this.goalPosition,this.velocityBuffer,this.damping);e=i[0],this.velocityBuffer=i[1]}for(var o=0;o<this.destinations.length;o++)_.blendToValue(this.destinations[o],this.blendMode,this.sources[o].tickAndEvaluate(e));this.lastPosition=e}}},s.start=function(){null==this.center&&(this.center=this.node),this.refresh()},s.lateUpdate=function(){this.hasUpdateController||this.onLateUpdate()},n(i,[{key:"target",get:function(){return this._target},set:function(t){this._target=O.toNullUnlessImplementsInterface(t,k.isImplements)}},{key:"targetComponent",get:function(){return this._target instanceof c?this._target:null},set:function(t){this._target=O.toNullUnlessImplementsInterface(t,k.isImplements)}},{key:"targetNode",get:function(){return p.isNode(this._target)?this._target:null},set:function(t){this._target=O.toNullUnlessImplementsInterface(t,k.isImplements)}},{key:"targetAsset",get:function(){return this._target instanceof f?this._target:null},set:function(t){this._target=O.toNullUnlessImplementsInterface(t,k.isImplements)}},{key:"targetInterface",get:function(){return null==this._targetInterface&&(this._targetInterface=null==this.target?null:O.getInterface(this.target,k.isImplements)),this._targetInterface}},{key:"sources",get:function(){return this._sources},set:function(t){this._sources=t}},{key:"destinations",get:function(){return this._destinations},set:function(t){this._destinations=t}},{key:"lastPosition",get:function(){return this._lastPosition},set:function(t){this._lastPosition=t}},{key:"goalPosition",get:function(){return this._goalPosition},set:function(t){this._goalPosition=t}},{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(t){this._hasUpdateController=t}},{key:"executionOrder",get:function(){return I.CUBISM_LOOK_CONTROLLER}},{key:"needsUpdateOnEditing",get:function(){return!1}}]),i}(c)).prototype,"blendMode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.Additive}}),S=i(R.prototype,"_target",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i(R.prototype,"target",[z],Object.getOwnPropertyDescriptor(R.prototype,"target"),R.prototype),i(R.prototype,"targetComponent",[A],Object.getOwnPropertyDescriptor(R.prototype,"targetComponent"),R.prototype),i(R.prototype,"targetNode",[N],Object.getOwnPropertyDescriptor(R.prototype,"targetNode"),R.prototype),i(R.prototype,"targetAsset",[x],Object.getOwnPropertyDescriptor(R.prototype,"targetAsset"),R.prototype),F=i(R.prototype,"center",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(R.prototype,"damping",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),Y=i(R.prototype,"_hasUpdateController",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=R))||V));s._RF.pop()}}}));

System.register("chunks:///_virtual/CubismLookParameter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismParameter.ts","./CubismLookAxis.ts"],(function(t){var e,i,r,a,n,o,s,u,l,c,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,s=t.Enum,u=t.CCFloat,l=t.Component},function(t){c=t.default},function(t){f=t.default}],execute:function(){var p,m,h,b,y,v,x;n._RF.push({},"355e349ZkpCIrvsNuTAsQSU","CubismLookParameter",void 0);var C=o.ccclass,d=o.property;t("default",(p=C("CubismLookParameter"),m=d({type:s(f),serializable:!0,visible:!0}),h=d({type:u,serializable:!0,visible:!0}),p((v=e((y=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,r(e,"axis",v,a(e)),r(e,"factor",x,a(e)),e}i(e,t);var n=e.prototype;return n.reset=function(){var t=this.getComponent(c);null!=t&&(g(t.name,"Y")?this.axis=f.Y:g(t.name,"Z")?this.axis=f.Z:this.axis=f.X,this.factor=t.maximumValue)},n.tickAndEvaluate=function(t){return(this.axis==f.X?t.x:this.axis==f.Z?t.z:t.y)*this.factor},e}(l)).prototype,"axis",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.X}}),x=e(y.prototype,"factor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=y))||b));function g(t,e){return t.length>0&&t[t.length-1]==e}n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismLookTargetBehaviour.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ICubismLookTarget.ts"],(function(t){var o,e,r,n,i;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,n=t.Component},function(t){i=t.default}],execute:function(){var u,a;e._RF.push({},"e90f9lG7QxK3Y6khOJ4EjEY","CubismLookTargetBehaviour",void 0);var c=r.ccclass;t("default",c("CubismLookTargetBehaviour")((u=i.SYMBOL,a=function(t){function e(){for(var o,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(o=t.call.apply(t,[this].concat(r))||this)[u]=i.SYMBOL,o}o(e,t);var r=e.prototype;return r.getPosition=function(){return this.node.worldPosition},r.isActive=function(){return this.enabledInHierarchy},e}(n)))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMaskCommandBuffer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismMaskTexture.ts"],(function(e){var n,r,t,o,s,a,i,u,l,c,f,d,m;return{setters:[function(e){n=e.inheritsLoose,r=e.createClass},function(e){t=e.cclegacy,o=e._decorator,s=e.Camera,a=e.CCObject,i=e.director,u=e.Node,l=e.MeshRenderer,c=e.renderer,f=e.math,d=e.Component},function(e){m=e.default}],execute:function(){var h,C;t._RF.push({},"9d204vBAeVOE7Neav3CsD/3","CubismMaskCommandBuffer",void 0);var g=o.ccclass,b=o.executeInEditMode,v=o.disallowMultiple,p=o.requireComponent,y=(e("default",g("CubismMaskCommandBuffer")(h=v(h=p([s])(h=b(((C=function(e){function t(){for(var n,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return(n=e.call.apply(e,[this].concat(t))||this)._camera=null,n}n(t,e),t.initialize=function(){var e="cubism_MaskCommandBuffer",n=null,r=i._persistRootNodes;for(var o in r){var s=Reflect.get(r,o);if(s.name==e){n=s;break}}null==n&&(n=new u(e),i.addPersistRootNode(n),t._instance=n.addComponent(t),console.assert(t._instance)),n.hideFlags=_},t.addSource=function(e){t.initialize(),this.sources.includes(e)||this.sources.push(e)},t.removeSource=function(e){t.initialize();for(var n=0,r=0;r<this.sources.length;r++)this.sources[r]!=e&&(this.sources[n]=this.sources[r],n++);this.sources.length=n},t.refreshCommandBuffer=function(){if(t.instance){for(var e=t.instance.getComponentsInChildren(l),n=0;n<e.length;n++){var r=Reflect.get(e[n],t.metadataPropertySymbol);r&&(r.enabled=!1)}for(var o=0;o<this.sources.length;o++)this.sources[o].addToCommandBuffer(t.instance);for(var s=0;s<e.length;s++){var a=Reflect.get(e[s],t.metadataPropertySymbol);a&&(e[s].enabled=a.enabled)}}else console.warn("CubismMaskCommandBuffer.instance is null.")};var o=t.prototype;return o.onLoad=function(){var e,n;console.info("CubismMaskCommandBuffer.onLoad()");var r=this.getComponent(s);null==r&&(r=this.addComponent(s)),console.assert(r),(r=r).priority=Number.MIN_SAFE_INTEGER,this.node.layer=0|y,r.projection=c.scene.CameraProjection.ORTHO,r.visibility=0|y,r.clearFlags=s.ClearFlag.SOLID_COLOR,r.clearColor=new f.Color(0,0,0,0),r.orthoHeight=1,r.near=-.5,r.far=.5;var t=null!=(e=null==(n=m.globalMaskTexture)?void 0:n.getTextureReference())?e:null;null!=t?(r.targetTexture=t,console.assert(r.targetTexture),this._camera=r):console.error("CubismMaskCommandBuffer.onLoad(): CubismMaskTexture.globalMaskTexture is null.")},o.lateUpdate=function(e){var n=i.getScene();null!=n?null!=n.renderScene?t.containsSources&&t.refreshCommandBuffer():console.error("director.getScene().renderScene is null."):console.error("director.getScene() failed.")},r(t,[{key:"camera",get:function(){return this._camera}}],[{key:"instance",get:function(){return t._instance||t.initialize(),t._instance}},{key:"sources",get:function(){return this._sources},set:function(e){this._sources=e}},{key:"buffer",get:function(){return this._buffer},set:function(e){this._buffer=e}},{key:"containsSources",get:function(){return this.sources.length>0}}]),t}(d))._instance=null,C._sources=new Array,C._buffer=new Map,C.metadataPropertySymbol=Symbol.for("CubismMaskCommandBufferMetadata"),h=C))||h)||h)||h)||h),e("CubismMaskCommandBufferMetadata",(function(){this.enabled=!1,this.cubismRenderer=null,this.meshRenderer=null})),524288),_=a.Flags.DontSave|a.Flags.EditorOnly|a.Flags.DontDestroy|a.Flags.HideInHierarchy;t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMaskController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./CubismUpdateController.ts","./CubismUpdateExecutionOrder.ts","./ICubismUpdatable.ts","./CubismRenderer.ts","./CubismMaskMaskedJunction.ts","./CubismMaskRenderer.ts","./CubismMaskTexture.ts"],(function(e){var t,n,s,i,r,o,a,l,u,d,c,f,h,m,k,p;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,s=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Component},function(e){u=e.default},function(e){d=e.default},function(e){c=e.default},function(e){f=e.default},function(e){h=e.default},function(e){m=e.default},function(e){k=e.default},function(e){p=e.default}],execute:function(){var C,v,b,g,y,M,x,T,w;o._RF.push({},"a8010gm5vNNBbXfEqGF7gvd","CubismMaskController",void 0);var j=a.ccclass,_=a.property,R=a.executeInEditMode,U=(e("default",(v=j("CubismMaskController"),b=_({type:p,serializable:!0,visible:!1}),g=_({type:p,visible:!0,readonly:!0}),y=_({serializable:!0,visible:!1}),v(M=R((C=f.SYMBOL,T=s((x=function(e){function s(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,i(t,"_maskTexture",T,r(t)),t._junctions=null,i(t,"_hasUpdateController",w,r(t)),t.bindedOnLateUpdate=t.onLateUpdate.bind(r(t)),t[C]=f.SYMBOL,t}t(s,e);var o=s.prototype;return o.tryRevive=function(){this.isRevived||this.forceRevive()},o.forceRevive=function(){var e=u.findCubismModel(this);if(null!=e){var t=e.drawables;if(null!=t){for(var n=new L,s=0;s<t.length;s++)if(t[s].isMasked){var i=t[s].masks.filter((function(e){return null!=e}));0!=i.length&&n.add(t[s],i)}this.junctions=new Array(n.entries.length);for(s=0;s<this.junctions.length;++s){for(var r=new Array(n.entries[s].masks.length),o=0;o<r.length;++o)r[o]=(new k).setMainRenderer(n.entries[s].masks[o]);if(null==this.maskTexture)return void console.warn("CubismMaskController.maskTexture is null.");this.junctions[s]=(new m).setMasks(r).setMaskeds(n.entries[s].maskeds).setMaskTexture(this.maskTexture)}}else console.warn("ComponentExtensionMethods.findCubismModel().drawables is null.")}else console.warn("ComponentExtensionMethods.findCubismModel() failed.")},o.onLateUpdate=function(){if(this.enabled&&this.isRevived)if(null!=this.junctions)for(var e=0;e<this.junctions.length;e++)this.junctions[e].update();else console.error("CubismMaskController.junctions is null.")},o.start=function(){null!=this.maskTexture&&(this.maskTexture.addSource(this),this.hasUpdateController=null!=this.getComponent(d))},o.lateUpdate=function(){this.hasUpdateController||this.onLateUpdate()},o.onDestroy=function(){null!=this.maskTexture&&this.maskTexture.removeSource(this)},o.getNecessaryTileCount=function(){this.tryRevive();var e=this.junctions;return null==e?(console.warn("CubismMaskController.junctions is null."),0):e.length},o.setTiles=function(e){var t=this.junctions;if(null!=t)for(var n=0;n<t.length;n++)t[n].setMaskTile(e[n]);else console.error("CubismMaskController.junctions is null.")},o.addToCommandBuffer=function(e){var t=this.junctions;if(null!=t)for(var n=0;n<t.length;n++)t[n].addToCommandBuffer(e);else console.error("CubismMaskController.junctions is null.")},n(s,[{key:"maskTexture",get:function(){return null==this._maskTexture&&(this._maskTexture=p.globalMaskTexture),this._maskTexture},set:function(e){e!=this._maskTexture&&(this._maskTexture=e,this.onDestroy(),this.start())}},{key:"junctions",get:function(){return this._junctions},set:function(e){this._junctions=e}},{key:"isRevived",get:function(){return null!=this.junctions}},{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(e){this._hasUpdateController=e}},{key:"executionOrder",get:function(){return c.CUBISM_MASK_CONTROLLER}},{key:"needsUpdateOnEditing",get:function(){return!0}}]),s}(l)).prototype,"_maskTexture",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s(x.prototype,"maskTexture",[g],Object.getOwnPropertyDescriptor(x.prototype,"maskTexture"),x.prototype),w=s(x.prototype,"_hasUpdateController",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=x))||M)||M)),e("MasksMaskedsPair",(function(e){var t,n;void 0===e&&(e={}),this.masks=void 0,this.maskeds=void 0,this.masks=null!=(t=e.masks)?t:new Array(0),this.maskeds=null!=(n=e.maskeds)?n:new Array(0)}))),L=e("MasksMaskedsPairs",function(){function e(){this.entries=new Array}return e.prototype.add=function(e,t){for(var n=0;n<this.entries.length;n++){var s=this.entries[n].masks.length==t.length;if(s){for(var i=0;i<this.entries[n].masks.length;i++)if(this.entries[n].masks[i]!=t[i].getComponent(h)){s=!1;break}if(s){var r=e.getComponent(h);return null==r?void console.warn("masked.getComponent(CubismRenderer) failed."):void this.entries[n].maskeds.push(r)}}}for(var o=new Array(t.length),a=0;a<t.length;a++){var l=t[a].getComponent(h);if(null==l)return void console.warn("masks[i].getComponent(CubismRenderer) failed.");o[a]=l}var u=e.getComponent(h);null!=u?this.entries.push(new U({masks:o,maskeds:new Array(u)})):console.warn("masked.getComponent(CubismRenderer) failed.")},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMaskMaskedJunction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismMaskProperties.ts","./CubismMaskRendererExtensionMethods.ts","./CubismMaskTile.ts","./CubismMaskTransform.ts"],(function(s){var e,t,a,r,n,i,o;return{setters:[function(s){e=s.createClass},function(s){t=s.cclegacy,a=s.math},function(s){r=s.default},function(s){n=s.default},function(s){i=s.default},function(s){o=s.default}],execute:function(){t._RF.push({},"dcd2b5v9S9FHp+S7mz9Lec0","CubismMaskMaskedJunction",void 0),s("default",function(){function s(){this._masks=new Array(0),this._maskeds=new Array(0),this._maskTexture=null,this._maskTile=new i,this._maskTransform=null,null==s.sharedMaskProperties&&(s.sharedMaskProperties=new r)}var t=s.prototype;return t.setMasks=function(s){return this.masks=s,this},t.setMaskeds=function(s){return this.maskeds=s,this},t.setMaskTexture=function(s){return this.maskTexture=s,this},t.setMaskTile=function(s){return this.maskTile=s,this},t.addToCommandBuffer=function(s){this.recalculateMaskTransform();var e=this.maskTile,t=this.maskTransform;if(null!=e)if(null!=t)for(var a=0;a<this.masks.length;a++)this.masks[a].setMaskTile(e).setMaskTransform(t).addToCommandBuffer(s);else console.error("CubismMaskMaskedJunction.addToCommandBuffer(): maskTransform is null.");else console.error("CubismMaskMaskedJunction.addToCommandBuffer(): maskTile is null.")},t.update=function(){if(this.recalculateMaskTransform(),console.assert(this.maskTransform),null!=this.maskTransform){for(var e=0;e<this.masks.length;e++)this.masks[e].setMaskTransform(this.maskTransform);var t=s.sharedMaskProperties;t.texture=this.maskTexture,t.tile=this.maskTile,t.transform=this.maskTransform;for(var a=0;a<this.maskeds.length;a++)this.maskeds[a].onMaskPropertiesDidChange(t)}},t.recalculateMaskTransform=function(){var s=n.getBounds(this.masks),e=s.extents(),t=e.x>e.y?2*e.x:2*e.y,r=s.center();this.maskTransform=new o({offset:new a.Vec2(r.x,r.y),scale:1/t})},e(s,[{key:"masks",get:function(){return this._masks},set:function(s){this._masks=s}},{key:"maskeds",get:function(){return this._maskeds},set:function(s){this._maskeds=s}},{key:"maskTexture",get:function(){return this._maskTexture},set:function(s){this._maskTexture=s}},{key:"maskTile",get:function(){return this._maskTile},set:function(s){this._maskTile=s}},{key:"maskTransform",get:function(){return this._maskTransform},set:function(s){this._maskTransform=s}}],[{key:"sharedMaskProperties",get:function(){return this._sharedMaskProperties},set:function(s){this._sharedMaskProperties=s}}]),s}())._sharedMaskProperties=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMaskProperties.ts",["cc","./CubismMaskTile.ts","./CubismMaskTransform.ts"],(function(t){var s,e,i;return{setters:[function(t){s=t.cclegacy},function(t){e=t.default},function(t){i=t.default}],execute:function(){s._RF.push({},"1793dl7/WFAzJp+ZTLP+8s3","CubismMaskProperties",void 0);t("default",(function(){this.texture=null,this.tile=new e,this.transform=new i}));s._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMaskRenderer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismDrawable.ts","./CubismShaderVariables.ts","./CubismMaskCommandBuffer.ts","./CubismResources.ts"],(function(e){var n,r,s,a,t,i,l,u,o,m,d;return{setters:[function(e){n=e.createClass},function(e){r=e.cclegacy,s=e.MeshRenderer,a=e.Node,t=e.renderer,i=e.math},function(e){l=e.default},function(e){u=e.default},function(e){o=e.default,m=e.CubismMaskCommandBufferMetadata},function(e){d=e.default}],execute:function(){r._RF.push({},"306f5d0LslKdLIgQv0wHCm9","CubismMaskRenderer",void 0);e("default",function(){function e(){this._maskTile=i.Vec4.ZERO.clone(),this._maskTransform=i.Vec4.ZERO.clone(),this._mainRenderer=null,this._maskMaterial=null,this._maskCullingMaterial=null,this._isCulling=!1,this.maskMaterial=d.getMaskMaterial(),this.maskCullingMaterial=d.getMaskCullingMaterial()}var r=e.prototype;return r.setMainRenderer=function(e){var n;return this.mainRenderer=e,this.isCulling=!(null!=(n=this.mainRenderer.node.getComponent(l))&&n.isDoubleSided),this},r.setMaskTile=function(e){return this._maskTile=e.toVec4(),this},r.setMaskTransform=function(e){return this._maskTransform=e.toVec4(),this},r.addToCommandBuffer=function(e){var n=this.mainRenderer;if(null!=n){var r=n.mainTexture,i=n.mesh;if(null!=r)if(null!=i)if(null!=n.meshRenderer)if(null!=n.meshRenderer.material){console.assert(this.maskMaterial);var d=o.metadataPropertySymbol;if(o.instance){var f=function(e){for(var r=0;r<e.length;r++){var s=Reflect.get(e[r],d);if(s&&s.cubismRenderer==n)return s}}(o.instance.getComponentsInChildren(s));if(!f){var c;f=new m;null!=(c=n.node.getComponent(l))&&c.isDoubleSided;var h=new a(n.node.name);e.node.addChild(h),h.layer=524288,f.cubismRenderer=n,f.meshRenderer=h.addComponent(s);var C=this.maskMaterial;f.meshRenderer.setMaterial(C,0),o.buffer.set(n,f.meshRenderer)}var k=f.meshRenderer,R=k.getMaterial(0);console.assert(R);var M=new t.MaterialInstance({parent:R});M.setProperty(u.mainTexture,r),M.setProperty(u.maskTile,this._maskTile),M.setProperty(u.maskTransform,this._maskTransform),k.setMaterialInstance(M,0),console.assert(k),k.mesh=i.createMesh(),f.enabled=!0,Reflect.set(k,d,f),k.enabled=!0}else console.warn("CubismMaskCommandBuffer.instance is null.")}else console.error("CubismMaskRenderer.addToCommandBuffer(): mainRenderer.meshRenderer.material is null.");else console.error("CubismMaskRenderer.addToCommandBuffer(): mainRenderer.meshRenderer is null.");else console.error("CubismMaskRenderer.addToCommandBuffer(): mainRenderer.mesh is null.");else console.error("CubismMaskRenderer.addToCommandBuffer(): mainRenderer.mainTexture is null.")}else console.error("CubismMaskRenderer.addToCommandBuffer(): mainRenderer is null.")},n(e,[{key:"mainRenderer",get:function(){return this._mainRenderer},set:function(e){this._mainRenderer=e}},{key:"maskMaterial",get:function(){return this._maskMaterial},set:function(e){this._maskMaterial=e}},{key:"maskCullingMaterial",get:function(){return this._maskCullingMaterial},set:function(e){this._maskCullingMaterial=e}},{key:"isCulling",get:function(){return this._isCulling},set:function(e){this._isCulling=e}},{key:"meshBounds",get:function(){return this._mainRenderer.mesh.calculateBounds()}}]),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMaskRendererExtensionMethods.ts",["cc","./CubismGeometry.ts","./CubismVector.ts"],(function(e){var n,s,t;return{setters:[function(e){n=e.cclegacy},function(e){s=e.CubismBounds},function(e){t=e.CubismVector3}],execute:function(){var u;n._RF.push({},"25baeXZSeNCKKW2nmwfqHO7","CubismMaskRendererExtensionMethods",void 0),(u||(u={})).getBounds=function(e){for(var n=e[0].meshBounds.min(),u=n.x,r=n.y,o=n.z,i=e[0].meshBounds.max(),m=i.x,c=i.y,a=i.z,d=1;d<e.length;d++){var f=e[d].meshBounds.min(),h=f.x,x=f.y;h<u&&(u=h),x<r&&(r=x);var b=e[d].meshBounds.max(),v=b.x,y=b.y;v>m&&(m=v),y>c&&(c=y)}var l=new t(u,r,o),C=new t(m,c,a).subtract(l);return s.fromVector(C.multiplySingle(.5).add(l),C)};e("default",u);n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMaskTexture.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismMaskCommandBuffer.ts","./CubismMaskTilePool.ts","./Utils.ts","./CubismMaskTile.ts"],(function(e){var i,s,t,r,n,o,u,l,c,a,h,f,d,v,T,b,x,y;return{setters:[function(e){i=e.applyDecoratedDescriptor,s=e.inheritsLoose,t=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.createClass},function(e){o=e.cclegacy,u=e._decorator,l=e.CCInteger,c=e.game,a=e.Game,h=e.assetManager,f=e.RenderTexture,d=e.Asset},function(e){v=e.default},function(e){T=e.default},function(e){b=e.MathExtensions,x=e.ArrayExtensions},function(e){y=e.default}],execute:function(){var _,k,g,p,m,M,C,P;o._RF.push({},"35687g6IiJGDpUQG5fyUc/n","CubismMaskTexture",void 0);var w=u.ccclass,z=u.property,R=e("default",(_=w("CubismMaskTexture"),k=z({type:l,serializable:!0,visible:!1}),g=z({type:l,serializable:!0,visible:!1}),_(((P=function(e){s(o,e);var i=o.prototype;function o(i,s){var n;return n=e.call(this)||this,t(n,"_size",M,r(n)),t(n,"_subdivisions",C,r(n)),n._tilePool=null,n._renderTexture=null,n._sources=new Array(0),void 0!==i&&(n._size=i),void 0!==s&&(n._subdivisions=s),n}return i.getTextureReference=function(){return this.renderTexture},o.initGlobalMaskTexture=function(){c.once(a.EVENT_GAME_INITED,(function(){h.loadBundle("Live2DCubismBuiltinResource",(function(e,i){null!=e?console.error(e):i.load("GlobalMaskTexture",(function(e,i){null!=e&&console.error(e)}))}))}))},i.addSource=function(e){if(this.tryRevive(),null==this.sources)this.sources=new Array;else if(-1!=this.sources.findIndex((function(i,s,t){return i.source==e})))return;if(null!=this.tilePool){var i=this.tilePool.acquireTiles(e.getNecessaryTileCount());if(null!=i){var s=new E({source:e,tiles:i});this.sources.push(s),e.setTiles(s.tiles)}else console.warn("CubismMaskTexture.tilePool.acquireTiles() failed.")}else console.warn("CubismMaskTexture.tilePool is null.")},i.removeSource=function(e){if(this.containsSources){var i=this.sources.findIndex((function(i,s,t){return i.source==e}));-1!=i&&(null!=this.tilePool?(this.tilePool.returnTiles(this.sources[i].tiles),this.sources.splice(i,1)):console.warn("CubismMaskTexture.tilePool is null."))}},i.tryRevive=function(){this.isRevived||this.refreshRenderTexture()},i.reinitializeSources=function(){if(this.containsSources){if(null==this.tilePool)return void console.warn("CubismMaskTexture.tilePool is null.");for(var e=0;e<this.sources.length;e++){var i=this.sources[e];if(null==i.source)return void console.warn("CubismMaskTexture.sources[i].source is null.");var s=this.tilePool.acquireTiles(i.source.getNecessaryTileCount());if(null==s)return void console.warn("CubismMaskTexture.tilePool.acquireTiles() failed.");i.source.setTiles(s),this.sources[e]=i.copyWith({source:i.source,tiles:s})}}},i.refreshRenderTexture=function(){this._renderTexture=new f,this._renderTexture.initialize({width:this.size,height:this.size,name:"CubismMaskTextureInstance"}),this.tilePool=new T(this.subdivisions,this.channels),this.reinitializeSources()},i.onLoaded=function(){e.prototype.onLoaded.call(this),o._globalMaskTexture=this,v.addSource(this)},o.reviveInEditor=function(){console.info("reviveInEditor")},i.destroy=function(){return o._globalMaskTexture=null,v.removeSource(this),e.prototype.destroy.call(this)},i.addToCommandBuffer=function(e){if(this.containsSources)for(var i=0;i<this.sources.length;i++){var s;null==(s=this.sources[i].source)||s.addToCommandBuffer(e)}},o.generateCubismMaskTexture=function(e,i){return void 0===e&&(e=512),void 0===i&&(i=3),b.isPowerOfTwo(e)?new o(e,i):null},n(o,[{key:"size",get:function(){return this._size},set:function(e){e!=this._size&&b.isPowerOfTwo(e)&&(this._size=e,this.refreshRenderTexture())}},{key:"channels",get:function(){return 4}},{key:"subdivisions",get:function(){return this._subdivisions},set:function(e){e!=this._subdivisions&&(this._subdivisions=e,this.refreshRenderTexture())}},{key:"tilePool",get:function(){return this._tilePool},set:function(e){this._tilePool=e}},{key:"renderTexture",get:function(){return null==this._renderTexture&&this.refreshRenderTexture(),this._renderTexture},set:function(e){this._renderTexture=e}},{key:"sources",get:function(){return this._sources},set:function(e){this._sources=e}},{key:"isRevived",get:function(){return null!=this.tilePool}},{key:"containsSources",get:function(){return null!=this.sources&&this.sources.length>0}}],[{key:"globalMaskTexture",get:function(){return o._globalMaskTexture}}]),o}(d))._globalMaskTexture=null,M=i((m=P).prototype,"_size",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1024}}),C=i(m.prototype,"_subdivisions",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),p=m))||p)),E=function(){function e(e){var i,s;void 0===e&&(e={}),this.source=void 0,this.tiles=void 0,this.source=null!=(i=e.source)?i:null,this.tiles=null!=(s=e.tiles)?s:new Array(0)}var i=e.prototype;return i.copyWith=function(i){var s;return void 0===i&&(i={}),new e({source:void 0!==i.source?i.source:this.source,tiles:null!=(s=i.tiles)?s:this.tiles})},i.equals=function(e){return this===e||this.source===e.source&&x.isEquals(y.isEquals,this.tiles,e.tiles)},i.strictEquals=function(e){return this===e},e}();R.initGlobalMaskTexture(),o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMaskTile.ts",["cc"],(function(n){var i,t;return{setters:[function(n){i=n.cclegacy,t=n.math}],execute:function(){i._RF.push({},"022d2CJYtJATJJ3IDWsspc6","CubismMaskTile",void 0);var s=function(){var n=i.prototype;function i(n){var i,t,s,e;void 0===n&&(n={}),this.channel=void 0,this.column=void 0,this.row=void 0,this.size=void 0,this.channel=null!=(i=n.channel)?i:0,this.column=null!=(t=n.column)?t:0,this.row=null!=(s=n.row)?s:0,this.size=null!=(e=n.size)?e:0}return n.toVec4=function(){return new t.Vec4(this.channel,this.column,this.row,this.size)},n.copyWith=function(n){var t,s,e,u;return void 0===n&&(n={}),new i({channel:null!=(t=n.channel)?t:this.channel,column:null!=(s=n.column)?s:this.column,row:null!=(e=n.row)?e:this.row,size:null!=(u=n.size)?u:this.size})},n.equals=function(n){return this===n||this.channel==n.channel&&this.column==n.column&&this.row==n.row&&this.size==n.size},n.strictEquals=function(n){return this===n},i.isEquals=function(n,i){return n.equals(i)},i}();(s||(s={})).DEFAULT=new s;n("default",s);i._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMaskTilePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismMaskTile.ts"],(function(s){var t,i,n;return{setters:[function(s){t=s.createClass},function(s){i=s.cclegacy},function(s){n=s.default}],execute:function(){i._RF.push({},"9e9cdi/745El7s5DLD8lpG2","CubismMaskTilePool",void 0);s("default",function(){function s(s,t){this._subdivisions=0,this._slots=new Array(0),this.subdivisions=s,this.slots=new Array(Math.pow(4,s)*t)}var i=s.prototype;return i.acquireTiles=function(s){for(var t=new Array(s),i=0;i<s;i++){for(var n=!1,o=0;o<this.slots.length;o++)if(!this.slots[o]){t[i]=this.toTile(o),this.slots[o]=!0,n=!0;break}if(!n)return null}return t},i.returnTiles=function(s){for(var t=0;t<s.length;t++)this.slots[this.toIndex(s[t])]=!1},i.toTile=function(s){var t=Math.trunc,i=Math.pow,o=t(i(4,this.subdivisions-1)),e=t(i(2,this.subdivisions-1)),u=1/e,r=t(s/o),l=s-r*o,c=t(l/e);return new n({channel:r,column:c,row:l%e,size:u})},i.toIndex=function(s){var t=Math.trunc,i=Math.pow,n=t(i(4,this.subdivisions-1)),o=t(i(2,this.subdivisions-1));return t(s.channel*n+s.column*o+s.row)},t(s,[{key:"subdivisions",get:function(){return this._subdivisions},set:function(s){this._subdivisions=s}},{key:"slots",get:function(){return this._slots},set:function(s){this._slots=s}}]),s}());i._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMaskTransform.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,s,n;return{setters:[function(t){e=t.createClass},function(t){s=t.cclegacy,n=t.math}],execute:function(){s._RF.push({},"50fe2SNGq1Dj4C9/tbs0MW6","CubismMaskTransform",void 0);var u=function(){var t=s.prototype;function s(t){var e,s;void 0===t&&(t={}),this.offset=void 0,this.scale=void 0,this.offset=null!=(e=t.offset)?e:n.Vec2.ZERO.clone(),this.scale=null!=(s=t.scale)?s:0}return t.toVec4=function(){return new n.Vec4(this.offset.x,this.offset.y,this.scale,s.uniqueId)},t.equals=function(t){return this===t||this.offset.equals(t.offset)&&this.scale==t.scale},t.strictEquals=function(t){return this===t},t.copyWith=function(t){var e,n;return void 0===t&&(t={}),new s({offset:null!=(e=t.offset)?e:this.offset,scale:null!=(n=t.scale)?n:this.scale})},e(s,null,[{key:"uniqueId",get:function(){return this._uniqueId>1024&&(this._uniqueId=0),this._uniqueId++}}]),s}();u._uniqueId=0,(u||(u={})).DEFAULT=new u;t("default",u);s._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMeshPrimitive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismGeometry.ts"],(function(t){var r,e,i,n,o,s,a,l,u,h,c;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.createClass,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t._decorator,s=t.CCFloat,a=t.CCInteger,l=t.math,u=t.Color,h=t.utils},function(t){c=t.CubismBounds}],execute:function(){var w,f,y,g,_,v,p,C,d,m,z;n._RF.push({},"9015etHzgxH0ZwKDWd2/Gv8","CubismMeshPrimitive",void 0);var P=o.ccclass,x=o.property;t("default",(w=P("CubismMeshPrimitive"),f=x({type:[s]}),y=x({type:[s]}),g=x({type:[s]}),_=x({type:[a]}),w((C=r((p=function(){var t=r.prototype;function r(t,r,e,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===e&&(e=[]),void 0===n&&(n=[]),i(this,"_rawPositions",C,this),i(this,"_rawUvs",d,this),i(this,"_rawColors",m,this),i(this,"_rawIndices",z,this),this._rawPositions=t,this._rawUvs=r,this._rawColors=e,this._rawIndices=n}return t.setColors=function(t){this._rawColors.length=4*t.length;for(var r=0;r<t.length;r++)this._rawColors[4*r+0]=t[r].x,this._rawColors[4*r+1]=t[r].y,this._rawColors[4*r+2]=t[r].z,this._rawColors[4*r+3]=t[r].w},t.setColorsFromRaw=function(t){this._rawColors.length=t.length;for(var r=0;r<t.length;r++)this._rawColors[r]=t[r]},t.getIndices=function(){return this._rawIndices},t.setIndices=function(t){this._rawIndices.length=t.length;for(var r=0;r<t.length;r++)this._rawIndices[r]=t[r]},r.from=function(t,e,i){var n=t.length/3;return n!=e.length/2||n!=i.length/4?null:new r(Array.from(t),Array.from(e),Array.from(i))},r.makeEmpty=function(){return new r([],[],[])},t.getPositions=function(){for(var t=this._rawPositions,r=new Array(t.length/3),e=0;e<r.length;e++){var i=3*e;r[e]=new l.Vec3(t[i+0],t[i+1],t[i+2])}return r},t.setPositions=function(t){this._rawPositions.length=3*t.length;for(var r=0;r<t.length;r++)this._rawPositions[3*r+0]=t[r].x,this._rawPositions[3*r+1]=t[r].y,this._rawPositions[3*r+2]=t[r].z},t.getUvs=function(){for(var t=this._rawUvs,r=new Array(t.length/4),e=0;e<r.length;e++){var i=2*e;r[e]=new l.Vec2(t[i+0],t[i+1])}return r},t.getColors=function(){for(var t=this._rawColors,r=new Array(t.length/4),e=0;e<r.length;e++){var i=4*e;r[e]=new u(t[i+0],t[i+1],t[i+2],t[i+3])}return r},t.createRuntimeMeshPrimitive=function(){return{positions:this._rawPositions,uvs:this._rawUvs,colors:this._rawColors,indices:this._rawIndices}},t.createMesh=function(){return 0==this._rawPositions.length?null:h.MeshUtils.createMesh(this.createRuntimeMeshPrimitive(),void 0,{calculateBounds:!0})},t.calculateBounds=function(){var t=this._rawPositions;if(0==t.length)return new c(0,0,0,0,0,0);for(var r={x:t[0],y:t[1],z:t[2]},e={x:r.x,y:r.y,z:r.z},i=Math.trunc(t.length/3),n=1;n<i;n++){var o=t[3*n+0],s=t[3*n+1],a=t[3*n+2];r.x=o<r.x?o:r.x,r.y=s<r.y?s:r.y,r.z=a<r.z?a:r.z,e.x=o>e.x?o:e.x,e.y=s>e.y?s:e.y,e.z=a>e.z?a:e.z}var u={x:0,y:0,z:0};return l.Vec3.lerp(u,r,e,.5),new c(u.x,u.y,u.z,.5*(e.x-r.x),.5*(e.y-r.y),.5*(e.z-r.z))},e(r,[{key:"indexCount",get:function(){return this._rawIndices.length}},{key:"vertexCount",get:function(){return this._rawPositions.length/3}}]),r}()).prototype,"_rawPositions",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),d=r(p.prototype,"_rawUvs",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),m=r(p.prototype,"_rawColors",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),z=r(p.prototype,"_rawIndices",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),v=p))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMoc.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismCore.ts"],(function(e){var t,n,i,r,s,o,u,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){o=e.cclegacy,u=e._decorator,a=e.Asset},function(e){c=e.Moc}],execute:function(){var l,f,h,y,b,g,d;o._RF.push({},"da146+EXyNKE4wiHugfvWbA","CubismMoc",void 0);var v=u.ccclass,m=u.property;e("default",(l=v("CubismMoc"),f=m({serializable:!1,visible:!1}),h=m({serializable:!1,visible:!1}),l((g=t((b=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this)._bytes=void 0,i(t,"_unmanagedMoc",g,r(t)),i(t,"referenceCount",d,r(t)),t}n(t,e);var o=t.prototype;return o.hasMocConsistency=function(e){return 1===c.hasMocConsistency(e)},t.createFrom=function(e){var n=new t;return n._bytes=e,n},o.acquireUnmanagedMoc=function(){return this.referenceCount++,this.revive(),this.unmanagedMoc},o.releaseUnmanagedMoc=function(){var e;(this.referenceCount--,0==this.referenceCount)?(null==(e=this.unmanagedMoc)||e._release(),this.unmanagedMoc=null):this.referenceCount<0&&(this.referenceCount=0)},o.revive=function(){this.isRevived||this.bytes.byteLength<=0||(this.unmanagedMoc=c.fromArrayBuffer(this.bytes))},o.validate=function(){return!!this._bytes},s(t,[{key:"bytes",get:function(){return this._bytes},set:function(e){this._bytes=e}},{key:"_nativeAsset",get:function(){return this._bytes},set:function(e){this._bytes=e}},{key:"unmanagedMoc",get:function(){return this._unmanagedMoc},set:function(e){this._unmanagedMoc=e}},{key:"isRevived",get:function(){return null!=this.unmanagedMoc}}]),t}(a)).prototype,"_unmanagedMoc",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(b.prototype,"referenceCount",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=b))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismDrawable.ts","./CubismParameter.ts","./CubismPart.ts","./ArrayExtensionMethods2.ts","./CubismCanvasInformation.ts","./CubismParameterStore.ts","./CubismTaskableModel.ts","./CubismMoc.ts"],(function(e){var t,n,a,i,s,o,l,r,u,d,c,h,f,b,m,p,v,M,k,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,s=e.createClass},function(e){o=e.cclegacy,l=e._decorator,r=e.Node,u=e.director,d=e.Director,c=e.game,h=e.Component},function(e){f=e.default},function(e){b=e.default},function(e){m=e.default},function(e){p=e.default},function(e){v=e.default},function(e){M=e.default},function(e){k=e.default},function(e){_=e.default}],execute:function(){var w,g,C,y,D,F,U,T,E,I,A,z,P,R,J,S;o._RF.push({},"2c000q4f7ZLroQv8TE46Apl","CubismModel",void 0);var N=l.ccclass,O=l.property,x=l.executeInEditMode,L=function(){function e(){this.functions=Array(0)}var t=e.prototype;return t.add=function(e){this.functions.push(e)},t.remove=function(e){this.functions=this.functions.filter((function(t){return t!=e}))},t.invoke=function(){for(var e=0;e<this.functions.length;e++)this.functions[e]()},e}(),V=e("default",(w=N("CubismModel"),g=O({type:_,serializable:!0,visible:!0}),C=O({serializable:!1,visible:!1}),y=O({serializable:!1,visible:!1}),D=O({serializable:!1,visible:!1}),F=O({serializable:!1,visible:!1}),U=O({serializable:!1,visible:!1}),w(T=x(((S=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this)._onDynamicDrawableData=new W,a(t,"_moc",I,i(t)),t._taskableModel=null,a(t,"_parameters",A,i(t)),a(t,"_parts",z,i(t)),a(t,"_drawables",P,i(t)),a(t,"_canvasInformation",R,i(t)),t._parameterStore=null,t.wasAttachedModelUpdateFunction=!1,t._wasJustEnabled=!1,t._lastTick=0,t.bindedOnModelUpdateFunc=t.onModelUpdate.bind(i(t)),t}n(t,e),t.instantiateFrom=function(e){var n=new r("Model").addComponent(t);return n.reset(e),n};var o=t.prototype;return o.resetMocReference=function(e,t){e.moc=t},o.revive=function(){if(!this.isRevived)if(null!=this.moc){var e=k.createTaskableModel(this.moc);null!=e?(this.taskableModel=e,this.parameters=this.getComponentsInChildren(b),null!=this.taskableModel&&p.reviveParameters(this.parameters,e.unmanagedModel),this.parts=this.getComponentsInChildren(m),null!=this.taskableModel&&p.reviveParts(this.parts,e.unmanagedModel),this.drawables=this.getComponentsInChildren(f),null!=this.taskableModel&&p.reviveDrawables(this.drawables,e.unmanagedModel),null!=e.unmanagedModel?(this.canvasInformation=v.instantiate(e.unmanagedModel),this._parameterStore=this.getComponent(M)):console.error("CubismModel.revive(): this.taskableModel.unmanagedModel is null.")):console.error("CubismModel.revive(): CubismTaskableModel.createTaskableModel() failed.")}else console.error("CubismModel.revive(): this.moc is null.")},o.reset=function(e){if(this.moc=e,this.name=e.name,this.taskableModel=k.createTaskableModel(e),null!=this.taskableModel){console.assert(null!=this.taskableModel.unmanagedModel);var t=this.taskableModel.unmanagedModel,n=b.createParameters(t),a=m.createParts(t),i=f.createDrawables(t);this.node.addChild(n),this.node.addChild(a),this.node.addChild(i),this.parameters=n.getComponentsInChildren(b),this.parts=a.getComponentsInChildren(m),this.drawables=i.getComponentsInChildren(f),this.canvasInformation=v.instantiate(t)}else console.error("CubismModel.reset(): CubismTaskableModel.createTaskableModel() failed.")},o.forceUpdateNow=function(){this.wasJustEnabled=!0,this.lastTick=-1,this.revive(),this.onModelUpdate()},t.onModelsUpdate=function(){null!=t._modelUpdateFunctions&&t._modelUpdateFunctions.invoke()},t.registerCallbackFunction=function(){u.off(d.EVENT_AFTER_DRAW,t.onModelsUpdate),u.on(d.EVENT_AFTER_DRAW,t.onModelsUpdate)},o.update=function(e){this.wasAttachedModelUpdateFunction||(t._modelUpdateFunctions.add(this.bindedOnModelUpdateFunc),this.wasAttachedModelUpdateFunction=!0),this.wasJustEnabled||this.isRevived&&(null!=this.taskableModel?null!=this.parameters?this.taskableModel.didExecute&&(this.taskableModel.tryReadParameters(this.parameters),null!=this._parameterStore&&this._parameterStore.restoreParameters(),null!=this.onDynamicDrawableData&&this._onDynamicDrawableData.invoke(this,this.taskableModel.dynamicDrawableData)):console.error("CubismModel.update(): this.parameters is null."):console.error("CubismModel.update(): this.taskableModel is null."))},o.onModelUpdate=function(){if(this.isRevived){var e=u.getTotalFrames();if(this.lastTick!=e)if(this.lastTick=e,null!=this.taskableModel)if(null!=this.parameters)if(null!=this.parts){if(this.taskableModel.tryWriteParametersAndParts(this.parameters,this.parts),this.wasJustEnabled)return this.taskableModel.updateNow(),this.wasJustEnabled=!1,void this.update(c.deltaTime);this.taskableModel.update()}else console.error("CubismModel.update(): this.parts is null.");else console.error("CubismModel.update(): this.parameters is null.");else console.warn("CubismModel.taskableModel is null.")}},o.onEnable=function(){this.wasJustEnabled=!0,this.revive()},o.onDisable=function(){this.wasAttachedModelUpdateFunction&&(t.modelUpdateFunctions.remove(this.bindedOnModelUpdateFunc),this.wasAttachedModelUpdateFunction=!1)},o.onDestroy=function(){this.isRevived&&(this.taskableModel=null)},o.onValidate=function(){this.onEnable()},s(t,[{key:"onDynamicDrawableData",get:function(){return this._onDynamicDrawableData}},{key:"moc",get:function(){return this._moc},set:function(e){this._moc=e}},{key:"taskableModel",get:function(){return this._taskableModel},set:function(e){this._taskableModel=e}},{key:"parameters",get:function(){return null==this._parameters&&this.revive(),this._parameters},set:function(e){this._parameters=e}},{key:"parts",get:function(){return null==this._parts&&this.revive(),this._parts},set:function(e){this._parts=e}},{key:"drawables",get:function(){return null==this._drawables&&this.revive(),this._drawables},set:function(e){this._drawables=e}},{key:"canvasInformation",get:function(){return null==this._canvasInformation&&this.revive(),this._canvasInformation},set:function(e){this._canvasInformation=e}},{key:"isRevived",get:function(){return null!=this.taskableModel}},{key:"canRevive",get:function(){return null!=this._moc}},{key:"wasJustEnabled",get:function(){return this._wasJustEnabled},set:function(e){this._wasJustEnabled=e}},{key:"lastTick",get:function(){return this._lastTick},set:function(e){this._lastTick=e}}],[{key:"modelUpdateFunctions",get:function(){return this._modelUpdateFunctions}}]),t}(h))._modelUpdateFunctions=new L,I=t((E=S).prototype,"_moc",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(E.prototype,"_parameters",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(E.prototype,"_parts",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(E.prototype,"_drawables",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"_canvasInformation",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(E,"_modelUpdateFunctions",[U],(J=(J=Object.getOwnPropertyDescriptor(E,"_modelUpdateFunctions"))?J.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return J}}),E),T=E))||T)||T)),W=function(){function e(){this.functions=Array(0)}var t=e.prototype;return t.add=function(e){this.functions.push(e)},t.remove=function(e){this.functions=this.functions.filter((function(t){return t!=e}))},t.invoke=function(e,t){for(var n=0;n<this.functions.length;n++)this.functions[n](e,t)},e}();V.registerCallbackFunction(),o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismModel3Json.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismMoc.ts","./CubismModel.ts","./CubismRenderController.ts","./CubismMaskController.ts","./Utils.ts","./CubismDisplayInfoParameterName.ts","./CubismDisplayInfoPartName.ts","./CubismEyeBlinkController.ts","./CubismEyeBlinkParameter.ts","./CubismHitDrawable.ts","./CubismParameterStore.ts","./CubismUpdateController.ts","./CubismExpressionController.ts","./CubismFadeController.ts","./CubismMouthController.ts","./CubismMouthParameter.ts","./CubismPhysicsController.ts","./CubismPoseController.ts","./CubismRaycastable.ts","./CubismUserDataTag.ts","./CubismUserDataTargetType.ts","./CubismDisplayInfo3Json.ts","./CubismExp3Json.ts","./CubismPhysics3Json.ts","./CubismPose3Json.ts","./CubismUserData3Json.ts","./CubismBuiltinPickers.ts","./JsonParseUtils.ts","./CubismParametersInspector.ts","./CubismPartsInspector.ts","./CubismPosePart.ts","./ArrayExtensionMethods2.ts"],(function(e){var t,n,r,s,i,o,a,u,l,c,f,p,d,h,m,v,b,g,x,y,C,J,w,A,k,P,F,I,T,z,S,M,D,E,R,O,_,N,j,U,q,G,B,L,H,W;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.createClass,r=e.createForOfIteratorHelperLoose,s=e.asyncToGenerator,i=e.regeneratorRuntime,o=e.initializerDefineProperty},function(e){a=e.cclegacy,u=e._decorator,l=e.CCInteger,c=e.path,f=e.animation,p=e.Texture2D,d=e.resources,h=e.JsonAsset,m=e.BufferAsset},function(e){v=e.default},function(e){b=e.default},function(e){g=e.default},function(e){x=e.default},function(e){y=e.ArrayExtensions,C=e.isNullOrEmpty},function(e){J=e.default},function(e){w=e.default},function(e){A=e.default},function(e){k=e.default},function(e){P=e.default},function(e){F=e.default},function(e){I=e.default},function(e){T=e.default},function(e){z=e.default},function(e){S=e.default},function(e){M=e.default},function(e){D=e.default},function(e){E=e.default},function(e){R=e.default},function(e){O=e.default},function(e){_=e.default},function(e){N=e.default},function(e){j=e.default},function(e){U=e.default},function(e){q=e.default},function(e){G=e.default},function(e){B=e.default},function(e){L=e.default},null,null,function(e){H=e.default},function(e){W=e.default}],execute:function(){var V,K,Q,X,Y,Z,$,ee,te,ne,re,se,ie,oe,ae;e("CubismModelNodeGenerator",void 0),a._RF.push({},"930c2vGv29PALBF0voMGMxr","CubismModel3Json",void 0);var ue=u.property,le=(V=ue({type:l,serializable:!0,visible:!0}),K=ue({serializable:!0}),Q=ue({serializable:!0}),X=ue({serializable:!0}),Y=ue({serializable:!1}),Z=ue({serializable:!1}),$=ue({serializable:!1}),te=t((ee=function(){function e(){this._assetPath=null,this._loadAssetAtPath=null,o(this,"version",te,this),o(this,"fileReferences",ne,this),o(this,"groups",re,this),o(this,"hitAreas",se,this),o(this,"_pose3Json",ie,this),o(this,"_expression3Jsons",oe,this),o(this,"_textures",ae,this)}e.loadAtPath=function(){var t=s(i().mark((function t(n,r){var s,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!=r||(r=e.builtinAssetAtPath),t.next=3,r(n,h);case 3:if(null!=(s=t.sent)&&null!=s.json){t.next=6;break}return t.abrupt("return",null);case 6:if(null!=(o=e.loadFromJson(s.json))){t.next=9;break}return t.abrupt("return",null);case 9:return o.assetPath=n,o._loadAssetAtPath=r,t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.loadFromJson=function(t){var n,r="CubismModel3Json.loadFromJson(): json parsing error.",s=e.SerializableFileReferences,i=e.SerializableGroup,o=e.SerializableHitArea,a=L.getNumber(t,"Version"),u=L.getObject(t,"FileReferences");if(void 0===a||void 0===u)return console.error(r),null;var l=null!=(n=s.instantiateFromJson(u))?n:void 0;if(void 0===l)return console.error(r),null;var c=L.getArray(t,"Groups"),f=L.getArray(t,"HitAreas"),p=new e;function d(e,t){var n;return void 0!==e&&null!=(n=L.arrayedInstantiateFromJson(e,t))?n:new Array(0)}return p.version=a,p.fileReferences=l,p.groups=d(c,i.instantiateFromJson),p.hitAreas=d(f,o.instantiateFromJson),p};var t=e.prototype;return t.loadAssetAtPath=function(){var e=s(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._loadAssetAtPath){e.next=2;break}return e.abrupt("return",Promise.reject(null));case 2:return e.abrupt("return",this._loadAssetAtPath(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.setLoadAssetAtPath=function(e){this._loadAssetAtPath=e},t.getMoc3=function(){var e=s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.fileReferences.moc){e.next=6;break}return e.next=3,this.loadArrayBuffer(this.fileReferences.moc);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=null;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getPose3Json=function(){var e=s(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this._pose3Json){e.next=2;break}return e.abrupt("return",this._pose3Json);case 2:if(0!=this.fileReferences.pose.length){e.next=6;break}e.t0=null,e.next=9;break;case 6:return e.next=8,this.loadJson(this.fileReferences.pose);case 8:e.t0=e.sent;case 9:return t=e.t0,this._pose3Json=null!=t?q.loadFromJson(t):null,e.abrupt("return",this._pose3Json);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getExpression3Jsons=function(){var e=s(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._expression3Jsons){e.next=16;break}this._expression3Jsons=new Array(this.fileReferences.expressions.length),t=0;case 3:if(!(t<this._expression3Jsons.length)){e.next=16;break}if(0!=this.fileReferences.expressions[t].file.length){e.next=8;break}e.t0=null,e.next=11;break;case 8:return e.next=10,this.loadJson(this.fileReferences.expressions[t].file);case 10:e.t0=e.sent;case 11:n=e.t0,this._expression3Jsons[t]=null!=n?j.loadFromJson(n):null;case 13:t++,e.next=3;break;case 16:return e.abrupt("return",this._expression3Jsons);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getPhysics3Json=function(){var e=s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C(this.fileReferences.physics)){e.next=4;break}e.t0=null,e.next=7;break;case 4:return e.next=6,this.loadJson(this.fileReferences.physics);case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getUserData3Json=function(){var e=s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C(this.fileReferences.userData)){e.next=4;break}e.t0=null,e.next=7;break;case 4:return e.next=6,this.loadJson(this.fileReferences.userData);case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getDisplayInfo3Json=function(){var e=s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C(this.fileReferences.displayInfo)){e.next=4;break}e.t0=null,e.next=7;break;case 4:return e.next=6,this.loadJson(this.fileReferences.displayInfo);case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getTexture=function(){var e=s(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this._textures)for(this._textures=new Array(this.fileReferences.textures.length),r=0;r<this._textures.length;r++)this._textures[r]=null;if(null==(n=this._textures)[t]){e.next=5;break}e.next=8;break;case 5:return e.next=7,this.loadTexture(this.fileReferences.textures[t]);case 7:n[t]=e.sent;case 8:return e.abrupt("return",this._textures[t]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.toModel=function(){var e=s(i().mark((function e(t){var n,r,s,o,a,u,l,c,f,p,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),o=null!=(n=t.shouldImportAsOriginalWorkflow)&&n,a=null!=(r=t.pickMaterial)?r:B.materialPicker,u=null!=(s=t.pickTexture)?s:B.texturePicker,e.next=6,this.getMoc3();case 6:if(null!=(l=e.sent)){e.next=9;break}return e.abrupt("return",null);case 9:return c=v.createFrom(l),e.next=12,this.getDisplayInfo3Json();case 12:return f=e.sent,e.next=15,this.getPhysics3Json();case 15:return p=e.sent,e.next=18,this.getUserData3Json();case 18:return d=e.sent,e.abrupt("return",ce.generateModel({model3Json:this,moc:c,materialPicker:a,texturePicker:u,displayInfo3Json:f,physics3Json:p,userData3Json:d,shouldImportAsOriginalWorkflow:o}));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.loadJson=function(){var e=s(i().mark((function e(t){var n,r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.assetPath){e.next=6;break}return r=c.dirname(this.assetPath)+"/"+t,e.next=4,this.loadAssetAtPath(r,h);case 4:return s=e.sent,e.abrupt("return",null!=(n=null==s?void 0:s.json)?n:null);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.loadArrayBuffer=function(){var e=s(i().mark((function e(t){var n,r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.assetPath){e.next=17;break}return s=c.dirname(this.assetPath)+"/"+t,e.next=4,this.loadAssetAtPath(s,m);case 4:if(e.t0=r=e.sent,null!=e.t0){e.next=9;break}e.t1=void 0,e.next=10;break;case 9:e.t1=r.buffer();case 10:if(e.t2=n=e.t1,null==e.t2){e.next=15;break}e.t3=n,e.next=16;break;case 15:e.t3=null;case 16:return e.abrupt("return",e.t3);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.loadTexture=function(){var e=s(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.assetPath){e.next=3;break}return n=c.dirname(this.assetPath)+"/"+t,e.abrupt("return",this.loadAssetAtPath(n,p));case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.builtinAssetAtPath=function(e,t){var n=c.extname(e);return e=e.substring(0,e.length-n.length),t==p&&(e=c.join(e,"texture")),new Promise((function(n,r){d.load(e,t,(function(e,t){null!=e?r(null):n(t)}))}))},t.isParameterInGroup=function(e,t){if(null==this.groups||0==this.groups.length)return!1;for(var n=0;n<this.groups.length;n++){var r=this.groups[n];if(r.name==t&&null!=r.ids)for(var s=r.ids,i=0;i<s.length;i++)if(s[i]==e.node.name)return!0}return!1},t.getBodyIndexById=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id==t)return n;return-1},n(e,[{key:"assetPath",get:function(){return this._assetPath},set:function(e){this._assetPath=e}}]),e}()).prototype,"version",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ne=t(ee.prototype,"fileReferences",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new le.SerializableFileReferences}}),re=t(ee.prototype,"groups",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),se=t(ee.prototype,"hitAreas",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),ie=t(ee.prototype,"_pose3Json",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(ee.prototype,"_expression3Jsons",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(ee.prototype,"_textures",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee);!function(e){var t=function(){function e(e){var t,n,r,s,i,a,u,l;void 0===e&&(e={}),this.moc=void 0,this.textures=void 0,this.pose=void 0,this.expressions=void 0,this.motions=void 0,this.physics=void 0,this.userData=void 0,this.displayInfo=void 0,this.moc=null!=(t=e.moc)?t:"",this.textures=null!=(n=e.textures)?n:new Array,this.pose=null!=(r=e.pose)?r:"",this.expressions=null!=(s=e.expressions)?s:new Array,this.motions=null!=(i=e.motions)?i:o.DEFAULT,this.physics=null!=(a=e.physics)?a:"",this.userData=null!=(u=e.userData)?u:"",this.displayInfo=null!=(l=e.displayInfo)?l:""}var t=e.prototype;return t.copyWith=function(t){var n,r,s,i,o,a,u,l;return void 0===t&&(t={}),new e({moc:null!=(n=t.moc)?n:this.moc,textures:null!=(r=t.textures)?r:this.textures,pose:null!=(s=t.pose)?s:this.pose,expressions:null!=(i=t.expressions)?i:this.expressions,motions:null!=(o=t.motions)?o:this.motions,physics:null!=(a=t.physics)?a:this.physics,userData:null!=(u=t.userData)?u:this.userData,displayInfo:null!=(l=t.displayInfo)?l:this.displayInfo})},t.equals=function(e){return this===e||this.moc==e.moc&&y.isEquals((function(e,t){return e==t}),this.textures,e.textures)&&this.pose==e.pose&&y.isEquals(i.isEquals,this.expressions,e.expressions)&&this.motions==e.motions&&this.physics==e.physics&&this.userData==e.userData&&this.displayInfo==e.displayInfo},t.strictEquals=function(e){return this===e},e.instantiateFromJson=function(t){var n,r,i=L.getString(t,"Moc"),a=L.getArray(t,"Textures");if(void 0===i||void 0===a)return console.error("SerializableFileReferences.instantiateFromJson(): json parsing error."),null;if(!a.every((function(e,t,n){return L.isString(e)})))return console.error("SerializableFileReferences.instantiateFromJson(): json parsing error."),null;var u=L.getString(t,"Pose"),l=L.getArray(t,"Expressions"),c=void 0!==l&&null!=(n=s.instantiateFromJson(l))?n:void 0,f=L.getObject(t,"Motions");return new e({moc:i,textures:a,pose:u,expressions:c,motions:void 0!==f&&null!=(r=o.instantiateFromJson(f))?r:void 0,physics:L.getString(t,"Physics"),userData:L.getString(t,"UserData"),displayInfo:L.getString(t,"DisplayInfo")})},e}();e.SerializableFileReferences=t;var n=function(){function e(e){var t,n,r;void 0===e&&(e={}),this.target=void 0,this.name=void 0,this.ids=void 0,this.target=null!=(t=e.target)?t:"",this.name=null!=(n=e.name)?n:"",this.ids=null!=(r=e.ids)?r:new Array(0)}var t=e.prototype;return t.copyWith=function(t){var n,r,s;return void 0===t&&(t={}),new e({target:null!=(n=t.target)?n:this.target,name:null!=(r=t.name)?r:this.name,ids:null!=(s=t.ids)?s:this.ids})},t.equals=function(e){return this===e||this.target==e.target&&this.name==e.name&&this.ids==e.ids},t.strictEquals=function(e){return this===e},e.instantiateFromJson=function(t){var n=L.getString(t,"Target"),r=L.getString(t,"Name"),s=L.getArray(t,"Ids");return void 0===n||void 0===r||void 0===s?(console.error("SerializableGroup.instantiateFromJson(): json parsing error. (Target: %s, Name: %s, Ids: %s)",n,r,s),null):s.every((function(e,t,n){return L.isString(e)}))?new e({target:n,name:r,ids:s}):(console.error("SerializableGroup.instantiateFromJson(): json parsing error."),null)},e}();e.SerializableGroup=n;var s,i=function(){function e(e){var t,n,r,s;void 0===e&&(e={}),this.name=void 0,this.file=void 0,this.fadeInTime=void 0,this.fadeOutTime=void 0,this.name=null!=(t=e.name)?t:"",this.file=null!=(n=e.file)?n:"",this.fadeInTime=null!=(r=e.fadeInTime)?r:0,this.fadeOutTime=null!=(s=e.fadeOutTime)?s:0}var t=e.prototype;return t.copyWith=function(t){var n,r,s,i;return void 0===t&&(t={}),new e({name:null!=(n=t.name)?n:this.name,file:null!=(r=t.file)?r:this.file,fadeInTime:null!=(s=t.fadeInTime)?s:this.fadeInTime,fadeOutTime:null!=(i=t.fadeOutTime)?i:this.fadeOutTime})},t.equals=function(e){return this===e||this.name==e.name&&this.file==e.file&&this.fadeInTime==this.fadeOutTime&&this.fadeOutTime==e.fadeOutTime},t.strictEquals=function(e){return this===e},e.isEquals=function(e,t){return e.equals(t)},e.instantiateFromJson=function(t){var n=L.getString(t,"Name"),r=L.getString(t,"File");return void 0===n||void 0===r?(console.error("SerializableExpression.instantiateFromJson(): json parsing error. (Name: %s, File: %s)",n,r),null):new e({name:n,file:r,fadeInTime:L.getNumber(t,"FadeInTime"),fadeOutTime:L.getNumber(t,"FadeOutTime")})},e}();e.SerializableExpression=i,(s||(s=e.SerializableExpressions||(e.SerializableExpressions={}))).instantiateFromJson=function(e){for(var t="SerializableExpressions.instantiateFromJson(): json parsing error.",n=new Array(e.length),r=0;r<e.length;r++){if(!L.isObject(e[r]))return console.error(t),null;var s=i.instantiateFromJson(e[r]);if(null==s)return console.error(t),null;n[r]=s}return n};var o=function(){var e=t.prototype;function t(e){if(void 0===e&&(e={}),this.motions=new Map,this.groupNames=void 0,null!=e.motions){if(!Object.isFrozen(e.motions)){this.motions=new Map,this.groupNames=new Array(e.motions.size);for(var t,n=0,s=r(e.motions.entries());!(t=s()).done;){var i=t.value;this.motions.set(i[0],i[1]),this.groupNames[n++]=i[0]}return}this.motions=e.motions,this.groupNames=new Array(e.motions.size);for(var o,a=0,u=r(e.motions.keys());!(o=u()).done;){var l=o.value;this.groupNames[a++]=l}}else this.motions=new Map,this.groupNames=new Array(0)}return e.get=function(e){var t;return null!=(t=this.motions.get(e))?t:null},e.copyWith=function(e){var n;return void 0===e&&(e={}),new t({motions:null!=(n=e.motions)?n:this.motions})},e.equals=function(e){if(this===e)return!0;if(this.motions===e.motions)return!0;if(this.motions.size!=e.motions.size)return!1;for(var t,n=r(this.motions.keys());!(t=n()).done;){var s=t.value;if(this.motions.get(s)!=e.motions.get(s))return!1}return!0},e.strictEquals=function(e){return this===e},t.instantiateFromJson=function(e){for(var n="SerializableMotions.instantiateFromJson(): json parsing error.",r=Object.keys(e),s=new Map,i=0;i<r.length;i++){var o=L.getArray(e,r[i]);if(void 0===o)return console.error(n),null;for(var u=new Array(o.length),l=0;l<u.length;l++){if(null==o[l])return console.error(n),null;var c=a.instantiateFromJson(o[l]);if(null==c)return console.error(n),null;u[l]=c}s.set(r[i],u)}return new t({motions:s})},t}();e.SerializableMotions=o;var a=function(){function e(e){var t,n,r,s;void 0===e&&(e={}),this.file=void 0,this.sound=void 0,this.fadeInTime=void 0,this.fadeOutTime=void 0,this.file=null!=(t=e.file)?t:"",this.sound=null!=(n=e.sound)?n:"",this.fadeInTime=null!=(r=e.fadeInTime)?r:0,this.fadeOutTime=null!=(s=e.fadeOutTime)?s:0}var t=e.prototype;return t.copyWith=function(t){var n,r,s,i;return void 0===t&&(t={}),new e({file:null!=(n=t.file)?n:this.file,sound:null!=(r=t.sound)?r:this.sound,fadeInTime:null!=(s=t.fadeInTime)?s:this.fadeInTime,fadeOutTime:null!=(i=t.fadeOutTime)?i:this.fadeOutTime})},t.equals=function(e){return this===e||this.file==e.file&&this.sound==e.sound&&this.fadeInTime==e.fadeInTime&&this.fadeOutTime==e.fadeOutTime},t.strictEquals=function(e){return this===e},e.instantiateFromJson=function(t){var n=L.getString(t,"File");return void 0===n?(console.error("SerializableMotion.instantiateFromJson(): json parsing error."),null):new e({file:n,sound:L.getString(t,"Sound"),fadeInTime:L.getNumber(t,"FadeInTime"),fadeOutTime:L.getNumber(t,"FadeOutTime")})},e}();e.SerializableMotion=a;var u=function(){function e(e){var t,n;void 0===e&&(e={}),this.name=void 0,this.id=void 0,this.name=null!=(t=e.name)?t:"",this.id=null!=(n=e.id)?n:""}var t=e.prototype;return t.copyWith=function(t){return void 0===t&&(t={}),new e({name:t.name?t.name:this.name,id:t.id?t.id:this.id})},t.equals=function(e){return this===e||this.name==e.name&&this.id==e.id},t.strictEquals=function(e){return this===e},e.instantiateFromJson=function(t){var n="SerializableHitArea.instantiateFromJson(): json parsing error.",r=L.getString(t,"Name");if(void 0===r)return console.error(n),null;var s=L.getString(t,"Id");return void 0===s?(console.error(n),null):new e({name:r,id:s})},e}();e.SerializableHitArea=u,(n||(n=e.SerializableGroup||(e.SerializableGroup={}))).DEFAULT=new n,(i||(i=e.SerializableExpression||(e.SerializableExpression={}))).DEFAULT=new i,(o||(o=e.SerializableMotions||(e.SerializableMotions={}))).DEFAULT=new o,(a||(a=e.SerializableMotion||(e.SerializableMotion={}))).DEFAULT=new a,(u||(u=e.SerializableHitArea||(e.SerializableHitArea={}))).DEFAULT=new u}(le||(le={}));var ce,fe;e("default",le);!function(e){function t(){return(t=s(i().mark((function e(t){var n,r,s,o,a,u,l,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null!=(n=t.shouldImportAsOriginalWorkflow)&&n,o=t.model3Json,null!=(a=b.instantiateFrom(t.moc))){e.next=6;break}return console.error("CubismModelNodeGenerator.generateModel(): CubismModel.instantiateFrom() failed."),e.abrupt("return",null);case 6:return a.name=c.basename(o.fileReferences.moc),u=fe.setupCubismRenderController(a),console.assert(u),console.assert(u.renderers),l=u.renderers,console.assert(a.drawables),f=a.drawables,e.next=16,fe.setupMaterialsAndTextures(o,f,l,t.materialPicker,t.texturePicker);case 16:return null!=o.hitAreas&&fe.setupHitAreas(f,o),fe.setupFromDisplayInfo3Json(null!=(r=t.displayInfo3Json)?r:null,a,o),fe.setupMaskController(a,f),s&&fe.setupOriginalWorkflow(a,t.expList),null!=t.physics3Json&&fe.setupPhysicsController(t.physics3Json,a),null!=t.pose3Json&&fe.setupCubismPosePart(t.pose3Json,a),null!=t.userData3Json&&fe.setupUserDataTag(t.userData3Json,o,f),fe.setupAnimationController(a),fe.finalize(a),e.abrupt("return",a);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.generateModel=function(e){return t.apply(this,arguments)}}(ce||(ce=e("CubismModelNodeGenerator",{}))),function(e){function t(){return(t=s(i().mark((function e(t,n,r,s,o){var a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<r.length)){e.next=8;break}return e.next=4,s(t,n[a]);case 4:r[a].material=e.sent;case 5:a++,e.next=1;break;case 8:u=0;case 9:if(!(u<r.length)){e.next=16;break}return e.next=12,o(t,n[u]);case 12:r[u].mainTexture=e.sent;case 13:u++,e.next=9;break;case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.setupCubismRenderController=function(e){var t=e.addComponent(g);if(console.assert(t),!Reflect.has(t,"onEnable"))return console.error("Internal.setupCubismRenderController(): rendererController.onEnable is undefined."),null;var n=Reflect.get(t,"onEnable"),r="function"==typeof n?n:void 0;return r?(r.call(t),t):(console.error("Internal.setupCubismRenderController(): rendererController.onEnable is not function property."),null)},e.setupMaterialsAndTextures=function(e,n,r,s,i){return t.apply(this,arguments)},e.setupHitAreas=function(e,t){for(var n=0;n<t.hitAreas.length;n++)for(var r=0;r<e.length;r++)if(e[r].id==t.hitAreas[n].id){var s=t.hitAreas[n],i=e[r].addComponent(P);console.assert(null!=i),i.name=s.name;var o=e[r].addComponent(R);console.assert(null!=o);break}},e.setupFromDisplayInfo3Json=function(e,t,n){var r=N.loadFromJson(e);console.assert(t.parameters);for(var s=t.parameters,i=0;i<s.length;i++){if(n.isParameterInGroup(s[i],"EyeBlink")){var o,a=null!=(o=t.getComponent(A))?o:t.addComponent(A);console.assert(a);var u=s[i].addComponent(k);console.assert(u)}if(n.isParameterInGroup(s[i],"LipSync")){var l,c=null!=(l=t.getComponent(S))?l:t.addComponent(S);console.assert(c);var f=s[i].addComponent(M);console.assert(f)}if(null!=r){var p=s[i].addComponent(J);console.assert(p);for(var d=0;d<r.parameters.length;d++)if(r.parameters[d].id==s[i].id){p.parameterName=r.parameters[d].name;break}p.displayName=""}}if(null!=r){console.assert(t.parts);for(var h=t.parts,m=0;m<h.length;m++){var v=h[m].addComponent(w);console.assert(v);for(var b=0;b<r.parts.length;b++)if(r.parts[b].id==h[m].id){v.partName=r.parts[b].name;break}v.displayName=""}}},e.setupMaskController=function(e,t){if(t.some((function(e,t,n){return e.isMasked}))){var n=e.addComponent(x);console.assert(n)}},e.setupOriginalWorkflow=function(e,t){var n,r,s,i,o,a=null!=(n=e.getComponent(I))?n:e.addComponent(I);console.assert(a);var u=null!=(r=e.getComponent(F))?r:e.addComponent(F);console.assert(u);var l=null!=(s=e.getComponent(E))?s:e.addComponent(E);console.assert(l);var c=null!=(i=e.getComponent(T))?i:e.addComponent(T);console.assert(c),t&&(c.expressionsList=t);var f=null!=(o=e.getComponent(z))?o:e.addComponent(z);console.assert(f)},e.setupPhysicsController=function(e,t){var n,r=U.loadFromJson(e);if(null!=r){var s=null!=(n=t.getComponent(D))?n:t.addComponent(D);console.assert(s),s.initialize(r.toRig())}},e.setupUserDataTag=function(e,t,n){var r=G.loadFromJson(e);if(null!=r)for(var s=r.toBodyArray(_.ArtMesh),i=0;i<n.length;i++){var o=t.getBodyIndexById(s,n[i].id);if(o>=0){var a,u=null!=(a=n[i].getComponent(O))?a:n[i].addComponent(O);console.assert(u),u.initialize(s[o])}}},e.setupCubismPosePart=function(e,t){var n=q.loadFromJson(e);if(null!=n){var r=t.parts,s=n.groups;if(null!=r&&null!=s)for(var i=0;i<s.length;i++){var o=s[i];if(null!=o)for(var a=0;a<o.length;a++){var u,l=W.findByIdFromParts(r,o[a].id);if(null!=l){var c=null!=(u=l.getComponent(H))?u:l.addComponent(H);console.assert(c),c.groupIndex=i,c.partIndex=a,c.link=o[a].link}}}}},e.setupAnimationController=function(e){var t,n=null!=(t=e.getComponent(f.AnimationController))?t:e.addComponent(f.AnimationController);console.assert(n)},e.finalize=function(e){e.forceUpdateNow()}}(fe||(fe={})),a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMotion3Json.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismParameter.ts","./CubismPart.ts","./CubismRenderController.ts","./CubismEyeBlinkController.ts","./CubismMouthController.ts","./JsonParseUtils.ts","./Utils.ts"],(function(t){var e,n,i,r,a,s,o,u,l,m,f,h,d,c,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.createClass,i=t.initializerDefineProperty},function(t){r=t.cclegacy,a=t._decorator,s=t.CCInteger,o=t.AnimationClip,u=t.animation},function(t){l=t.default},function(t){m=t.default},function(t){f=t.default},function(t){h=t.default},function(t){d=t.default},function(t){c=t.default},function(t){v=t.ArrayExtensions}],execute:function(){var g,p,C,T,y,S,b,D,z,P,w,A,I,O;r._RF.push({},"436b1ycY7ROkb8ZD7JOTCiG","CubismMotion3Json",void 0);var F,M=a.ccclass,J=a.property,B=c.asArray,U=c.asBoolean,E=c.asNumber,k=c.asString;(F||(F={})).instantiate=function(t){return{value:t,rightTangent:0,rightTangentWeight:0,leftTangent:0,leftTangentWeight:0}};var R=t("SerializableMeta",M("CubismMotion3Json.SerializableMeta")(g=function(){function t(t){var e,n,i,r,a,s,o,u,l,m,f;void 0===t&&(t={}),this.duration=void 0,this.fps=void 0,this.loop=void 0,this.curveCount=void 0,this.totalSegmentCount=void 0,this.totalPointCount=void 0,this.areBeziersRestricted=void 0,this.userDataCount=void 0,this.totalUserDataSize=void 0,this.fadeInTime=void 0,this.fadeOutTime=void 0,this.duration=null!=(e=t.duration)?e:0,this.fps=null!=(n=t.fps)?n:0,this.loop=null!=(i=t.loop)&&i,this.curveCount=null!=(r=t.curveCount)?r:0,this.totalSegmentCount=null!=(a=t.totalSegmentCount)?a:0,this.totalPointCount=null!=(s=t.totalPointCount)?s:0,this.areBeziersRestricted=null!=(o=t.areBeziersRestricted)&&o,this.userDataCount=null!=(u=t.userDataCount)?u:0,this.totalUserDataSize=null!=(l=t.totalUserDataSize)?l:0,this.fadeInTime=null!=(m=t.fadeInTime)?m:-1,this.fadeOutTime=null!=(f=t.fadeOutTime)?f:-1}var e=t.prototype;return e.copyWith=function(e){var n,i,r,a,s,o,u,l,m,f,h;return void 0===e&&(e={}),new t({duration:null!=(n=e.duration)?n:this.duration,fps:null!=(i=e.fps)?i:this.fps,loop:null!=(r=e.loop)?r:this.loop,curveCount:null!=(a=e.curveCount)?a:this.curveCount,totalSegmentCount:null!=(s=e.totalSegmentCount)?s:this.totalSegmentCount,totalPointCount:null!=(o=e.totalPointCount)?o:this.totalPointCount,areBeziersRestricted:null!=(u=e.areBeziersRestricted)?u:this.areBeziersRestricted,userDataCount:null!=(l=e.userDataCount)?l:this.userDataCount,totalUserDataSize:null!=(m=e.totalUserDataSize)?m:this.totalUserDataSize,fadeInTime:null!=(f=e.fadeInTime)?f:this.fadeInTime,fadeOutTime:null!=(h=e.fadeOutTime)?h:this.fadeOutTime})},e.equals=function(t){return this===t||this.duration==t.duration&&this.fps==t.fps&&this.loop==t.loop&&this.curveCount==t.curveCount&&this.totalSegmentCount==t.totalSegmentCount&&this.totalPointCount==t.totalPointCount&&this.areBeziersRestricted==t.areBeziersRestricted&&this.userDataCount==t.userDataCount&&this.totalUserDataSize==t.totalUserDataSize&&this.fadeInTime==t.fadeInTime&&this.fadeOutTime==t.fadeOutTime},e.strictEquals=function(t){return this===t},t.instantiateFromJson=function(e){if(null!=e){var n=E(e.Duration),i=E(e.Fps),r=E(e.CurveCount),a=E(e.TotalSegmentCount),s=E(e.TotalPointCount);if(void 0!==n&&void 0!==i&&void 0!==r&&void 0!==a){var o=U(e.Loop),u=U(e.AreBeziersRestricted),l=E(e.FadeInTime),m=E(e.FadeOutTime);return new t({duration:n,fps:i,loop:o,areBeziersRestricted:u,curveCount:r,totalSegmentCount:a,totalPointCount:s,userDataCount:E(e.UserDataCount),totalUserDataSize:E(e.TotalUserDataSize),fadeInTime:l,fadeOutTime:m})}}},t}())||g),L=t("SerializableCurve",M("CubismMotion3Json.SerializableCurve")(p=function(){function t(t){var e,n,i,r,a;void 0===t&&(t={}),this.target=void 0,this.id=void 0,this.segments=void 0,this.fadeInTime=void 0,this.fadeOutTime=void 0,this.target=null!=(e=t.target)?e:"",this.id=null!=(n=t.id)?n:"",this.segments=null!=(i=t.segments)?i:new Array(0),this.fadeInTime=null!=(r=t.fadeInTime)?r:-1,this.fadeOutTime=null!=(a=t.fadeOutTime)?a:-1}var e=t.prototype;return e.copyWith=function(e){var n,i,r,a,s;return void 0===e&&(e={}),new t({target:null!=(n=e.target)?n:this.target,id:null!=(i=e.id)?i:this.id,segments:null!=(r=e.segments)?r:this.segments,fadeInTime:null!=(a=e.fadeInTime)?a:this.fadeInTime,fadeOutTime:null!=(s=e.fadeOutTime)?s:this.fadeOutTime})},e.equals=function(t){return this===t||this.target==t.target&&this.id==t.id&&v.isEquals((function(t,e){return t==e}),this.segments,t.segments)&&this.fadeInTime==t.fadeInTime&&this.fadeOutTime==t.fadeOutTime},e.strictEquals=function(t){return this===t},t.instantiateFromJson=function(e){if(null!=e){var n=k(e.Target),i=k(e.Id),r=B(e.Segments);if(void 0!==n&&void 0!==i&&void 0!==r){for(var a=new Array(r.length),s=0;s<r.length;s++){var o=E(r[s]);if(void 0===o)return;a[s]=o}return new t({target:n,id:i,segments:a,fadeInTime:E(e.FadeInTime),fadeOutTime:E(e.FadeOutTime)})}}},t}())||p),q=t("SerializableUserData",M("CubismMotion3Json.SerializableUserData")(C=function(){function t(t){var e,n;void 0===t&&(t={}),this.time=void 0,this.value=void 0,this.time=null!=(e=t.time)?e:0,this.value=null!=(n=t.value)?n:""}var e=t.prototype;return e.copyWith=function(e){var n,i;return void 0===e&&(e={}),new t({time:null!=(n=e.time)?n:this.time,value:null!=(i=e.value)?i:this.value})},e.equals=function(t){return this===t||this.time==t.time&&this.value==t.value},e.strictEquals=function(t){return this===t},t.instantiateFromJson=function(e){if(null!=e){var n=E(e.Time),i=k(e.Value);if(void 0!==n&&void 0!==i)return new t({time:n,value:i})}},t}())||C);(R||(R=t("SerializableMeta",{}))).DEFAULT=new R,(L||(L=t("SerializableCurve",{}))).DEFAULT=new L,(q||(q=t("SerializableUserData",{}))).DEFAULT=new q;t("default",(T=M("CubismMotion3Json"),y=J(s),S=J(R),b=J([L]),D=J([q]),T((w=e((P=function(){function t(){i(this,"version",w,this),i(this,"meta",A,this),i(this,"curves",I,this),i(this,"userData",O,this)}t.loadFrom=function(t){var e=c.parse(t);return e?this.loadFromJson(e):null},t.loadFromJsonAsset=function(t){return null==t.json?null:this.loadFromJson(t.json)},t.loadFromJson=function(e){var n;if(null==e)return null;var i=E(e.Version),r=R.instantiateFromJson(e.Meta),a=null!=(n=c.arrayedInstantiateFromJson(e.UserData,q.instantiateFromJson))?n:new Array(0),s=c.arrayedInstantiateFromJson(e.Curves,L.instantiateFromJson);if(void 0===i||void 0===r||void 0===s)return null;var o=new t;return o.version=i,o.meta=r,o.userData=a,o.curves=s,o},t.convertCurveSegmentsToKeyframes=function(t){if(t.length<1)return new Array(0);var e=new Array(1);e[0]=[t[0],F.instantiate(t[1])];for(var n=2;n<t.length;)n=this.parsers(t[n])(t,e,n);return e},t.convertSteppedCurveToLinerCurver=function(e,n){n=n<0?.5:n;for(var i=e.segments,r=2,a=2;a<i.length;a+=3){var s=2==e.segments[a],o=a==e.segments.length-3,u=!o&&2==e.segments[a+3],l=!o&&a+3==e.segments.length-3;s&&(u||l)?(i.length+=3,i[r+0]=0,i[r+1]=e.segments[a+1],i[r+2]=e.segments[a-1],i[r+3]=0,i[r+4]=e.segments[a+1]+n,i[r+5]=e.segments[a+2],r+=6):1==e.segments[a]?(i[r+0]=e.segments[a+0],i[r+1]=e.segments[a+1],i[r+2]=e.segments[a+2],i[r+3]=e.segments[a+3],i[r+4]=e.segments[a+4],i[r+5]=e.segments[a+5],i[r+6]=e.segments[a+6],a+=4,r+=7):(i[r+0]=e.segments[a+0],i[r+1]=e.segments[a+1],i[r+2]=e.segments[a+2],r+=3)}return t.convertCurveSegmentsToKeyframes(i)};var e=t.prototype;return e.toAnimationClipA=function(t,e,n,i){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=null),this.meta.areBeziersRestricted||console.warn("Béziers are not restricted and curves might be off. Please export motions from Cubism in restricted mode for perfect match.");var r=new o;return this.toAnimationClipB(r,t,e,n,i)},e.toAnimationClipB=function(e,n,i,r,a){var s=this;void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===a&&(a=null),i&&(!n||r&&n)&&e.clearTracks(),e.sample=this.meta.fps;for(var c=0;c<this.curves.length;c++){var v=this.curves[c];if("PartOpacity"!=v.target||!n||r){var g=new u.TrackPath,p=t.convertCurveSegmentsToKeyframes(v.segments);if("Model"==v.target)"Opacity"==v.id?g=(new u.TrackPath).toComponent(f).toProperty("opacity"):"EyeBlink"==v.id?g=(new u.TrackPath).toComponent(h).toProperty("EyeOpening"):"LipSync"==v.id&&(g=(new u.TrackPath).toComponent(d).toProperty("MouthOpening"));else if("Parameter"==v.target)g=(new u.TrackPath).toHierarchy("Parameters/"+v.id).toComponent(l).toProperty("value");else if("PartOpacity"==v.target&&(g=(new u.TrackPath).toHierarchy("Parts/"+v.id).toComponent(m).toProperty("opacity"),n&&null!=a&&0!=a.fadeInTime))t.convertSteppedCurveToLinerCurver(v,a.fadeInTime);var C=H(e,g);C||((C=new u.RealTrack).path=g,e.addTrack(C)),C.channel.curve.assignSorted(p)}}if(e.duration=this.meta.duration,this.meta.loop?e.wrapMode=o.WrapMode.Loop:e.wrapMode=o.WrapMode.Default,this.userData.length>0)for(var T=function(){var t=new Array;t.push(s.userData[y].value);var n=s.userData[y].time,i=e.events.findIndex((function(t){return t.frame===n}));-1===i?e.events.push({frame:n,func:"CubismMotionEvent",params:t}):e.events[i]={frame:n,func:"CubismMotionEvent",params:t}},y=0;y<this.userData.length;y++)T();return e},t.parsers=function(e){switch(e){case 0:return t.parseLinearSegment;case 1:return t.parseBezierSegment;case 2:return t.parseSteppedSegment;case 3:return t.parseInverseSteppedSegment;default:return console.warn("CubismMotion3Json.Parsers: Called default case in switch statement."),t.parseLinearSegment}},t.parseLinearSegment=function(t,e,n){var i=t[n+1]-e[e.length-1][0],r=(t[n+2]-e[e.length-1][1].value)/i,a=r,s=[e[e.length-1][0],F.instantiate(e[e.length-1][1].value)];return s[1].leftTangent=e[e.length-1][1].leftTangent,s[1].rightTangent=r,e[e.length-1]=s,(s=[t[n+1],F.instantiate(t[n+2])])[1].leftTangent=a,s[1].rightTangent=0,e.push(s),n+3},t.parseBezierSegment=function(t,e,n){var i=Math.abs(e[e.length-1][0]-t[n+5])*(1/3),r=(t[n+2]-e[e.length-1][1].value)/i,a=(t[n+6]-t[n+4])/i,s=[e[e.length-1][0],F.instantiate(e[e.length-1][1].value)];return s[1].leftTangent=e[e.length-1][1].leftTangent,s[1].rightTangent=r,e[e.length-1]=s,(s=[t[n+5],F.instantiate(t[n+6])])[1].leftTangent=a,s[1].rightTangent=0,e.push(s),n+7},t.parseSteppedSegment=function(t,e,n){var i=[t[n+1],F.instantiate(t[n+2])];return i[1].leftTangent=Number.POSITIVE_INFINITY,e.push(i),n+3},t.parseInverseSteppedSegment=function(e,n,i){var r=n[n.length-1],a=Math.atan2(e[i+2]-r[1].value,e[i+1]-r[0]);return r[1].rightTangent=a,n[n.length-1]=r,(r=[r[0]+t.offsetGranularity,F.instantiate(e[i+2])])[1].leftTangent=a,r[1].rightTangent=0,n.push(r),(r=[e[i+1],F.instantiate(e[i+2])])[1].leftTangent=0,n.push(r),i+3},n(t,null,[{key:"offsetGranularity",get:function(){return.01}}]),t}()).prototype,"version",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=e(P.prototype,"meta",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new R}}),I=e(P.prototype,"curves",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),O=e(P.prototype,"userData",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),z=P))||z));function H(t,e){for(var n=0;n<t.tracksCount;n++){var i=t.getTrack(n);if(W(i.path,e)&&i instanceof u.RealTrack)return i}}function W(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t.isHierarchyAt(n)){if(!e.isHierarchyAt(n))return!1;if(t.parseHierarchyAt(n)!=e.parseHierarchyAt(n))return!1}else if(t.isComponentAt(n)){if(!e.isComponentAt(n))return!1;if(t.parseComponentAt(n)!=e.parseComponentAt(n))return!1}else if(t.isPropertyAt(n)){if(!e.isPropertyAt(n))return!1;if(t.parsePropertyAt(n)!=e.parsePropertyAt(n))return!1}else if(t.isElementAt(n)){if(!e.isElementAt(n))return!1;if(t.parseElementAt(n)!=e.parseElementAt(n))return!1}else;return!0}r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMotionApplier.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ICubismUpdatable.ts","./CubismModel.ts","./CubismParameter.ts","./CubismPart.ts","./CubismUpdateExecutionOrder.ts"],(function(e){var t,a,r,n,l,i,o,u,s,c,p,f,h,d,m,v,N;return{setters:[function(e){t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose,r=e.createClass,n=e.applyDecoratedDescriptor,l=e.assertThisInitialized,i=e.initializerDefineProperty},function(e){o=e.cclegacy,u=e._decorator,s=e.animation,c=e.math,p=e.Node,f=e.Component},function(e){h=e.default},function(e){d=e.default},function(e){m=e.default},function(e){v=e.default},function(e){N=e.default}],execute:function(){var C,b,y,g,V,U,A,w;o._RF.push({},"e37a2n90jBL1oVF3mK4mb/0","CubismMotionApplier",void 0);var S=u.ccclass,L=u.property,M=u.requireComponent,P=function(e){this.ref=void 0,this.value=Number.NaN,this.calcValue=Number.NaN,this.ref=e};e("default",(b=S("CubismMotionApplier"),y=M(s.AnimationController),g=M(d),V=L({serializable:!0,visible:!1}),b(U=y(U=g((C=h.SYMBOL,w=n((A=function(e){function n(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).animCtrl=null,t.parameters=new Map,t.parts=new Map,t.bindedOnLateUpdate=t.onLateUpdate.bind(l(t)),i(t,"_hasUpdateController",w,l(t)),t[C]=h.SYMBOL,t}t(n,e);var o=n.prototype;return o.refresh=function(){if(this.animCtrl=this.getComponent(s.AnimationController),null==this.animCtrl)return console.error("Not found AnimationController."),void(this.enabled=!1);var e=this.getComponent(d);if(null==e)return console.error("Not found CubismModel."),void(this.enabled=!1);var t=e.parameters,a=e.parts;if(null!=t)for(var r=0;r<t.length;r++){var n=k(t[r],e);this.parameters.set(n,new P(t[r]))}if(null!=a)for(var l=0;l<a.length;l++){var i=k(a[l],e);this.parts.set(i,new P(a[l]))}},o.valueUpdate=function(e,t,r){void 0===r&&(r=1);for(var n,l=a(e);!(n=l()).done;)for(var i,o=n.value,u=o.clip.duration*t,s=a(o.clip.tracks);!(i=s()).done;){var c=i.value,p=_(c,u);Number.isNaN(p)||this.setCache(c,p,r)}},o.setCache=function(e,t,a){for(var r="",n="",l="",i=0;i<e.path.length;i++)e.path.isHierarchyAt(i)?r=e.path.parseHierarchyAt(i):e.path.isComponentAt(i)?n=e.path.parseComponentAt(i):e.path.isPropertyAt(i)&&(l=e.path.parsePropertyAt(i));switch(n){case m.prototype.name:this.setParameterCache(r,l,t,a);break;case v.prototype.name:this.setPartCache(r,l,t,a);break;default:console.warn("Not supported component.")}},o.setParameterCache=function(e,t,a,r){if("value"==t){var n=this.parameters.get(e);null!=n&&(Number.isNaN(n.calcValue)?n.calcValue=a:n.calcValue=c.lerp(n.calcValue,a,r))}else console.warn("Not supported property.")},o.setPartCache=function(e,t,a,r){if("opacity"==t){var n=this.parts.get(e);null!=n&&(Number.isNaN(n.calcValue)?n.calcValue=a:n.calcValue=c.lerp(n.calcValue,a,r))}else console.warn("Not supported property.")},o.calcCache=function(e){this.parameters.forEach((function(t,a,r){Number.isNaN(t.value)?t.value=t.calcValue:Number.isNaN(t.calcValue)||(t.value=c.lerp(t.value,t.calcValue,e)),t.calcValue=Number.NaN})),this.parts.forEach((function(t,a,r){Number.isNaN(t.value)?t.value=t.calcValue:Number.isNaN(t.calcValue)||(t.value=c.lerp(t.value,t.calcValue,e)),t.calcValue=Number.NaN}))},o.applyValues=function(){this.parameters.forEach((function(e,t,a){Number.isNaN(e.value)||(e.ref.value=e.value),e.value=Number.NaN})),this.parts.forEach((function(e,t,a){Number.isNaN(e.value)||(e.ref.opacity=e.value),e.value=Number.NaN}))},o.onLateUpdate=function(e){var t=this.animCtrl;if(null!=t&&null!=t.graph)if(t.isValid){for(var a=0;a<t.layerCount;a++){var r=t.getCurrentStateStatus(a);if(null!=r){var n=t.getCurrentClipStatuses(a);this.valueUpdate(n,r.progress);var l=t.getCurrentTransition(a);if(null!=l){var i=t.getNextStateStatus(a);if(null==i)console.warn("NextStateStatus is null.");else{var o=0==l.duration?1:l.time/l.duration,u=t.getNextClipStatuses(a);this.valueUpdate(u,i.progress,o)}}this.calcCache(t.getLayerWeight(a))}else console.warn("CurrentStateStatus is null.")}this.applyValues()}else console.warn("AnimationController invalid.")},o.start=function(){this.refresh()},o.lateUpdate=function(e){this.hasUpdateController||this.onLateUpdate(e)},r(n,[{key:"executionOrder",get:function(){return N.CUBISM_MOTION_APPLIER}},{key:"needsUpdateOnEditing",get:function(){return!1}},{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(e){this._hasUpdateController=e}}]),n}(f)).prototype,"_hasUpdateController",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=A))||U)||U)||U));function _(e,t){for(var r,n=a(e.channels());!(r=n()).done;){var l=r.value.curve.evaluate(t);if("number"==typeof l)return l;break}return Number.NaN}function k(e,t){var a=e.node,r="";do{if(r=a.name+"/"+r,!p.isNode(a.parent))break;a=a.parent}while(a!=t.node);return r.slice(0,-1)}o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMouthController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismMouthParameter.ts","./CubismParameterBlendMode.ts","./CubismUpdateController.ts","./CubismUpdateExecutionOrder.ts","./CubismParameter.ts","./ComponentExtensionMethods2.ts","./CubismParameterExtensionMethods.ts","./ComponentExtensionMethods.ts","./ICubismUpdatable.ts"],(function(t){var e,n,i,o,r,a,s,l,u,d,p,c,f,h,C,b,m,g,y;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,i=t.applyDecoratedDescriptor,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,l=t.Enum,u=t.CCFloat,d=t.Component},function(t){p=t.default},function(t){c=t.default},function(t){f=t.default},function(t){h=t.default},function(t){C=t.default},function(t){b=t.default},function(t){m=t.default},function(t){g=t.default},function(t){y=t.default}],execute:function(){var M,U,_,v,O,L,E,x,z,P;a._RF.push({},"1ab7eFJi9NEvae7Anj+Ah54","CubismMouthController",void 0);var k=s.ccclass,w=s.property;t("default",(U=k("CubismMouthController"),_=w({type:l(c)}),v=w({type:u,slide:!0,range:[0,1,.01]}),O=w({serializable:!1,visible:!1}),U((M=y.SYMBOL,x=i((E=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"blendMode",x,r(e)),o(e,"mouthOpening",z,r(e)),e._destinations=[],o(e,"_hasUpdateController",P,r(e)),e.bindedOnLateUpdate=e.onLateUpdate.bind(r(e)),e[M]=y.SYMBOL,e}e(i,t);var a=i.prototype;return a.refresh=function(){var t=b.findCubismModel(this);if(null!=t&&null!=t.parameters){var e=g.getComponentsMany(t.parameters,p);this.destinations=new Array(e.length);for(var n=0;n<e.length;++n)this.destinations[n]=e[n].getComponent(C);this.hasUpdateController=null!=this.getComponent(f)}},a.onLateUpdate=function(t){this.enabled&&null!=this.destinations&&m.blendToValueArray(this.destinations,this.blendMode,this.mouthOpening)},a.start=function(){this.refresh()},a.lateUpdate=function(t){this.hasUpdateController||this.onLateUpdate(t)},n(i,[{key:"destinations",get:function(){return this._destinations},set:function(t){this._destinations=t}},{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(t){this._hasUpdateController=t}},{key:"executionOrder",get:function(){return h.CUBISM_MOUTH_CONTROLLER}},{key:"needsUpdateOnEditing",get:function(){return!1}}]),i}(d)).prototype,"blendMode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Multiply}}),z=i(E.prototype,"mouthOpening",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),P=i(E.prototype,"_hasUpdateController",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=E))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismMouthParameter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,u,n;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,u=t._decorator,n=t.Component}],execute:function(){var o;r._RF.push({},"8f85ay8eslF1LsUvKfM/caQ","CubismMouthParameter",void 0);var s=u.ccclass;t("default",s("CubismMouthParameter")(o=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r}(n))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismParameter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,a,t,r,i,u,l,o,s,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.inheritsLoose,t=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass},function(e){u=e.cclegacy,l=e._decorator,o=e.CCFloat,s=e.Node,d=e.Component}],execute:function(){var m,c,p,v,g,h,f,y;u._RF.push({},"bdbcbN38FdAZ5pTDllAGPFv","CubismParameter",void 0);var b=l.ccclass,P=l.property,I=l.executeInEditMode;e("default",(m=b("CubismParameter"),c=P({serializable:!0,visible:!1}),p=P({type:o,serializable:!0,visible:!0,readonly:!1}),v=P({type:o,visible:!0,readonly:!1}),m(g=I((f=n((h=function(e){function n(){for(var n,a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return(n=e.call.apply(e,[this].concat(i))||this)._unmanagedParameters=null,t(n,"_unmanagedIndex",f,r(n)),t(n,"value",y,r(n)),n._model=null,n}a(n,e),n.createParameters=function(e){for(var a=new s("Parameters"),t=e.parameters,r=new Array(t.count),i=0;i<r.length;i++){var u=new s;r[i]=u.addComponent(n),a.addChild(u),r[i].reset(e,i)}return a};var u=n.prototype;return u.revive=function(e){var n;this.unmanagedParameters=null!=(n=e.parameters)?n:null},u.reset=function(e,n){this.revive(e),this.unmanagedIndex=n,this.node.name=this.id,this.value=this.defaultValue},i(n,[{key:"unmanagedParameters",get:function(){return this._unmanagedParameters},set:function(e){this._unmanagedParameters=e}},{key:"unmanagedIndex",get:function(){return this._unmanagedIndex},set:function(e){this._unmanagedIndex=e}},{key:"id",get:function(){var e,n;return null!=(e=null==(n=this.unmanagedParameters)?void 0:n.ids[this.unmanagedIndex])?e:""}},{key:"minimumValue",get:function(){var e,n;return null!=(e=null==(n=this.unmanagedParameters)?void 0:n.minimumValues[this.unmanagedIndex])?e:0}},{key:"maximumValue",get:function(){var e,n;return null!=(e=null==(n=this.unmanagedParameters)?void 0:n.maximumValues[this.unmanagedIndex])?e:0}},{key:"defaultValue",get:function(){var e,n;return null!=(e=null==(n=this.unmanagedParameters)?void 0:n.defaultValues[this.unmanagedIndex])?e:0}},{key:"valueInEditor",set:function(e){var n;this.value!==e&&(this.value=e,null==(n=this._model)||n.forceUpdateNow())}}]),n}(d)).prototype,"_unmanagedIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),y=n(h.prototype,"value",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n(h.prototype,"valueInEditor",[v],Object.getOwnPropertyDescriptor(h.prototype,"valueInEditor"),h.prototype),g=h))||g)||g));u._RF.pop()}}}));

System.register("chunks:///_virtual/CubismParameterBlendMode.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"11b40C5M4NEEYdtsMIYylpk","CubismParameterBlendMode",void 0);var r=e("default",function(e){return e[e.Override=0]="Override",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e}(r||{}));t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismParameterExtensionMethods.ts",["cc","./CubismParameterBlendMode.ts"],(function(l){var e,u;return{setters:[function(l){e=l.cclegacy},function(l){u=l.default}],execute:function(){var t,n;e._RF.push({},"db4a4tiC5FIJLDn21PRmFBl","CubismParameterExtensionMethods",void 0),(n=t||(t={})).addToValue=function(l,e,u){void 0===u&&(u=1),null!=l&&(l.value+=e*u)},n.multiplyValueBy=function(l,e,u){void 0===u&&(u=1),null!=l&&(l.value*=1+(e-1)*u)},n.blendToValue=function(l,e,n){null!=l&&(e!=u.Additive?e!=u.Multiply?l.value=n:t.multiplyValueBy(l,n):t.addToValue(l,n))},n.blendToValueArray=function(l,e,n){if(null!=l)if(e!=u.Additive)if(e!=u.Multiply)for(var a=0;a<l.length;++a){var i=l[a];null!=i&&(i.value=n)}else for(var o=0;o<l.length;++o)null!=l[o]&&t.multiplyValueBy(l[o],n);else for(var r=0;r<l.length;++r)null!=l[r]&&t.addToValue(l[r],n)};l("default",t);e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismParametersInspector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./CubismDisplayInfoParameterName.ts"],(function(e){var u,n,r,t,a,i;return{setters:[function(e){u=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,t=e.Component},function(e){a=e.default},function(e){i=e.default}],execute:function(){var o;n._RF.push({},"7471eDPXypMFbkncpIW4VCX","CubismParametersInspector",void 0);e("default",r.ccclass("CubismParametersInspector")(o=function(e){function n(){return e.apply(this,arguments)||this}return u(n,e),n.prototype.getParameters=function(){var e=a.findCubismModel(this);if(null==e)return console.error("Find CubismModel failed."),null;var u=e.parameters;if(null==u)return console.error("CubismModel.parameters is null."),null;for(var n=new Array(u.length),r=0;r<u.length;r++){var t=void 0,o=u[r].getComponent(i);null!=o&&((t=o.displayName)||(t=o.parameterName)),t||(t=u[r].id),n[r]={nodeUuid:u[r].node.uuid,componentUuid:u[r].uuid,id:u[r].id,minimumValue:u[r].minimumValue,maximumValue:u[r].maximumValue,defaultValue:u[r].defaultValue,value:u[r].value,displayName:t}}return{cubismModel:e.uuid,parameters:n}},n}(t))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismParameterStore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./CubismUpdateController.ts","./CubismUpdateExecutionOrder.ts","./ICubismUpdatable.ts"],(function(t){var e,a,i,n,s,r,l,o,u,h,p,d;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass,i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,o=t.Component},function(t){u=t.default},function(t){h=t.default},function(t){p=t.default},function(t){d=t.default}],execute:function(){var c,f,m,P,_,C;r._RF.push({},"80102+PUaZF97By00pueXq6","CubismParameterStore",void 0);var b=l.ccclass,v=l.property;t("default",(f=b("CubismParameterStore"),m=v({serializable:!1,visible:!1}),f((c=d.SYMBOL,C=i((_=function(t){function i(){for(var e,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._destinationParameters=null,e._destinationParts=null,e._parameterValues=null,e._partOpacities=null,n(e,"_hasUpdateController",C,s(e)),e.bindedOnLateUpdate=e.onLateUpdate.bind(s(e)),e[c]=d.SYMBOL,e}e(i,t);var r=i.prototype;return r.refresh=function(){var t,e,a,i;null==this.destinationParameters&&(this.destinationParameters=null!=(t=null==(e=u.findCubismModel(this))?void 0:e.parameters)?t:null);null==this.destinationParts&&(this.destinationParts=null!=(a=null==(i=u.findCubismModel(this))?void 0:i.parts)?a:null);this.hasUpdateController=null!=this.getComponent(h),this.saveParameters()},r.onLateUpdate=function(t){this.hasUpdateController&&this.saveParameters()},r.saveParameters=function(){if(this.enabled){if(null!=this.destinationParameters&&null==this._parameterValues&&(this._parameterValues=new Array(this.destinationParameters.length)),null!=this._parameterValues&&null!=this.destinationParameters)for(var t=0;t<this._parameterValues.length;++t)null!=this.destinationParameters[t]&&(this._parameterValues[t]=this.destinationParameters[t].value);if(null!=this.destinationParts&&null==this._partOpacities&&(this._partOpacities=new Array(this.destinationParts.length)),null!=this._partOpacities&&null!=this.destinationParts)for(var e=0;e<this._partOpacities.length;++e)this._partOpacities[e]=this.destinationParts[e].opacity}},r.restoreParameters=function(){if(this.enabled){if(null!=this._parameterValues&&null!=this.destinationParameters)for(var t=0;t<this._parameterValues.length;++t)this.destinationParameters[t].value=this._parameterValues[t];if(null!=this._partOpacities&&null!=this.destinationParts)for(var e=0;e<this._partOpacities.length;++e)this.destinationParts[e].opacity=this._partOpacities[e]}},r.onEnable=function(){this.refresh()},a(i,[{key:"destinationParameters",get:function(){return this._destinationParameters},set:function(t){this._destinationParameters=t}},{key:"destinationParts",get:function(){return this._destinationParts},set:function(t){this._destinationParts=t}},{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(t){this._hasUpdateController=t}},{key:"executionOrder",get:function(){return p.CUBISM_PARAMETER_STORE_SAVE_PARAMETERS}},{key:"needsUpdateOnEditing",get:function(){return!1}}]),i}(o)).prototype,"_hasUpdateController",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=_))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPart.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,a,o,s,u,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,s=e._decorator,u=e.CCFloat,l=e.Node,c=e.Component}],execute:function(){var p,d,y,f,h,g,m,v;o._RF.push({},"a66ca/f/pdOj50qgA+AG3z7","CubismPart",void 0);var b=s.ccclass,P=s.property;e("default",(p=b("CubismPart"),d=P({serializable:!0,visible:!1}),y=P({type:u,serializable:!0,visible:!1}),f=P({type:u,visible:!0,readonly:!1}),p((m=t((g=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).unmanagedParts=null,i(t,"_unmanagedIndex",m,r(t)),i(t,"opacity",v,r(t)),t._model=null,t}n(t,e),t.createParts=function(e){for(var n=new l("Parts"),i=e.parts,r=new Array(i.count),a=0;a<r.length;++a){var o=new l;r[a]=o.addComponent(t),n.addChild(o),r[a].reset(e,a)}return n};var o=t.prototype;return o.revive=function(e){var t;this.unmanagedParts=null!=(t=e.parts)?t:null},o.reset=function(e,t){this.revive(e),this._unmanagedIndex=t,this.node.name=this.id,this.opacity=this.unmanagedParts.opacities[t]},a(t,[{key:"unmanagedIndex",get:function(){return this._unmanagedIndex},set:function(e){this._unmanagedIndex=e}},{key:"id",get:function(){var e,t;return null!=(e=null==(t=this.unmanagedParts)?void 0:t.ids[this.unmanagedIndex])?e:""}},{key:"opacityInEditor",set:function(e){var t;this.opacity!==e&&(this.opacity=e,null==(t=this._model)||t.forceUpdateNow())}}]),t}(c)).prototype,"_unmanagedIndex",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=t(g.prototype,"opacity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(g.prototype,"opacityInEditor",[f],Object.getOwnPropertyDescriptor(g.prototype,"opacityInEditor"),g.prototype),h=g))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPartsInspector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./CubismDisplayInfoPartName.ts"],(function(t){var n,e,o,r,i,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Component},function(t){i=t.default},function(t){u=t.default}],execute:function(){var s;e._RF.push({},"5c2c46mWtNFHrE7MhGjVYTp","CubismPartsInspector",void 0);t("default",o.ccclass("CubismPartsInspector")(s=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.getParts=function(){var t=i.findCubismModel(this);if(null==t)return console.error("Find CubismModel failed."),null;var n=t.parts;if(null==n)return console.error("CubismModel.parts is null."),null;for(var e=new Array(n.length),o=0;o<n.length;o++){var r=void 0,s=n[o].getComponent(u);null!=s&&((r=s.displayName)||(r=s.partName)),r||(r=n[o].id),e[o]={nodeUuid:n[o].node.uuid,componentUuid:n[o].uuid,id:n[o].id,opacity:n[o].opacity,displayName:r}}return{cubismModel:t.uuid,parts:e}},e}(r))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysics.ts",["cc"],(function(e){var i,t;return{setters:[function(e){i=e.cclegacy,t=e.math}],execute:function(){var s,c;i._RF.push({},"d69e0fVkS9FTYVF3M0XT4LV","CubismPhysics",void 0),(c=s||(s={})).gravity=new t.Vec2(0,-1),c.wind=t.Vec2.ZERO,c.airResistance=5,c.maximumWeight=100,c.useFixedDeltaTime=!1,c.useAngleCorrection=!0,c.movementThreshold=.001,c.maxDeltaTime=5;e("default",s);i._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysics3Json.ts",["cc","./CubismPhysicsOutput.ts","./CubismPhysicsParticle.ts","./CubismPhysicsSourceComponent.ts","./CubismPhysicsInput.ts","./CubismPhysicsNormalization.ts","./CubismPhysicsRig.ts","./CubismPhysicsSubRig.ts","./JsonParseUtils.ts","./Utils.ts"],(function(t){var i,n,e,s,o,a,u,r,l,c,h,d,v;return{setters:[function(t){i=t.cclegacy,n=t.math,e=t.js},function(t){s=t.default},function(t){o=t.default},function(t){a=t.default},function(t){u=t.default},function(t){r=t.default,l=t.CubismPhysicsNormalizationTuplet},function(t){c=t.default},function(t){h=t.default},function(t){d=t.default},function(t){v=t.ArrayExtensions}],execute:function(){i._RF.push({},"d7259RrDqhNQ4Ro8ZT9refo","CubismPhysics3Json",void 0);var f=d.asBoolean,p=d.asNumber,m=d.asString,y=function(){function t(){this.version=0,this.meta=new t.SerializableMeta,this.physicsSettings=null}t.loadFrom=function(i){var n=d.parse(i);return n?t.loadFromJson(n):null},t.loadFromJsonAsset=function(i){return null==i.json?null:t.loadFromJson(i.json)},t.loadFromJson=function(i){var n=t.SerializableMeta,s=t.SerializablePhysicsSettings,o=new t;if(!e.isNumber(i.Version))return null;if(o.version=i.Version,null!=i.Meta){var a=n.instantiateFromJson(i.Meta);null!=a&&(o.meta=a)}if(Array.isArray(i.PhysicsSettings)){var u=d.arrayedInstantiateFromJson(i.PhysicsSettings,s.instantiateFromJson);null!=u&&(o.physicsSettings=u)}return o};var i=t.prototype;return i.toRig=function(){var t=new c;if(t.gravity=new n.Vec2(this.meta.effectiveForces.gravity.x,this.meta.effectiveForces.gravity.y),t.wind=new n.Vec2(this.meta.effectiveForces.wind.x,this.meta.effectiveForces.wind.y),null!=this.physicsSettings){this.physicsSettings.length!=this.meta.physicsSettingCount&&(console.warn("PhysicsSettings.Length and Meta.PhysicsSettingCount are unequaled."),console.warn("physicsSettings.length: %d, this.meta.physicsSettingCount: %d",this.physicsSettings.length,this.meta.physicsSettingCount),console.warn(this.physicsSettings)),console.trace(),t.fps=this.meta.fps,t.subRigs=new Array(this.physicsSettings.length);for(var i=0;i<t.subRigs.length;i++){var e=new h,s=this.physicsSettings[i];null!=s.input&&(e.input=this.readInput(s.input)),null!=s.output&&(e.output=this.readOutput(s.output)),null!=s.vertices&&(e.particles=this.readParticles(s.vertices)),null!=s.normalization&&(e.normalization=this.readNormalization(s.normalization)),t.subRigs[i]=e}}return t},i.readInput=function(t){for(var i=new Array(t.length),e=0;e<i.length;e++){var s;if(i[e]=new u,i[e].sourceId=t[e].source.id,i[e].angleScale=0,i[e].scaleOfTranslation=n.Vec2.ZERO,i[e].weight=t[e].weight,null==t[e].type)console.warn("source["+e+"].type is null."),i[e].sourceComponent=a.X;else i[e].sourceComponent=null!=(s=a.purse(t[e].type))?s:a.X;i[e].isInverted=t[e].reflect}return i},i.readOutput=function(t){for(var i=new Array(t.length),e=0;e<i.length;e++){var o;if(i[e]=new s,i[e].destinationId=t[e].destination.id,i[e].particleIndex=t[e].vertexIndex,i[e].translationScale=n.Vec2.ZERO,i[e].angleScale=t[e].scale,i[e].weight=t[e].weight,null==t[e].type)console.warn("source["+e+"].type is null."),i[e].sourceComponent=a.X;else i[e].sourceComponent=null!=(o=a.purse(t[e].type))?o:a.X;i[e].isInverted=t[e].reflect,i[e].valueBelowMinimum=0,i[e].valueExceededMaximum=0}return i},i.readParticles=function(t){for(var i=new Array(t.length),e=0;e<i.length;e++)i[e]=new o({initialPosition:new n.Vec2(t[e].position.x,t[e].position.y),mobility:t[e].mobility,delay:t[e].delay,acceleration:t[e].acceleration,radius:t[e].radius,position:n.Vec2.ZERO,lastPosition:n.Vec2.ZERO,lastGravity:new n.Vec2(0,1),force:n.Vec2.ZERO,velocity:n.Vec2.ZERO});return i},i.readNormalization=function(t){return new r({position:new l({maximum:t.position.maximum,minimum:t.position.minimum,defaultValue:t.position.default}),angle:new l({maximum:t.angle.maximum,minimum:t.angle.minimum,defaultValue:t.angle.default})})},t}();!function(t){var i=function(){function t(t){var i,n;void 0===t&&(t={}),this.x=void 0,this.y=void 0,this.x=null!=(i=t.x)?i:0,this.y=null!=(n=t.y)?n:0}var i=t.prototype;return i.clone=function(){return new t({x:this.x,y:this.y})},i.copyWith=function(i,n){return new t({x:null!=i?i:this.x,y:null!=n?n:this.y})},t.instantiateFromJson=function(i){if(null!=i){var n=p(i.X),e=p(i.Y);if(void 0!==n&&void 0!==e)return new t({x:n,y:e})}},i.equals=function(t){return this===t||this.x==t.x&&this.y==t.y},i.strictEquals=function(t){return this===t},t}();t.SerializableVector2=i;var n=function(){function t(t){var i,n,e;void 0===t&&(t={}),this.minimum=void 0,this.default=void 0,this.maximum=void 0,this.minimum=null!=(i=t.minimum)?i:0,this.default=null!=(n=t.defaultValue)?n:0,this.maximum=null!=(e=t.maximum)?e:0}var i=t.prototype;return i.copyWith=function(i){var n,e,s;return void 0===i&&(i={}),new t({minimum:null!=(n=i.minimum)?n:this.minimum,defaultValue:null!=(e=i.defaultValue)?e:this.default,maximum:null!=(s=i.maximum)?s:this.maximum})},i.equals=function(t){return this===t||this.minimum==t.minimum&&this.default==t.default&&this.maximum==t.maximum},i.strictEquals=function(t){return this===t},t.instantiateFromJson=function(i){if(null!=i){var n=p(i.Minimum),e=p(i.Default),s=p(i.Maximum);if(void 0!==n&&void 0!==e&&void 0!==s)return new t({minimum:n,defaultValue:e,maximum:s})}},t}();t.SerializableNormalizationValue=n;var e=function(){function t(t){var i,n;void 0===t&&(t={}),this.target=void 0,this.id=void 0,this.target=null!=(i=t.target)?i:"",this.id=null!=(n=t.id)?n:""}var i=t.prototype;return i.equals=function(t){return this===t||this.target==t.target&&this.id==t.id},i.strictEquals=function(t){return this===t},i.copyWith=function(i){return void 0===i&&(i={}),new t({target:void 0!==i.target?i.target:this.target,id:void 0!==i.id?i.id:this.id})},t.instantiateFromJson=function(i){if(null!=i){var n=m(i.Target),e=m(i.Id);if(void 0!==n&&void 0!==e)return new t({target:n,id:e})}},t}();t.SerializableParameter=e;var s=function(){function t(t){var i,n,s;void 0===t&&(t={}),this.source=void 0,this.weight=void 0,this.type=void 0,this.reflect=void 0,this.source=null!=t.source?t.source:e.DEFAULT,this.weight=null!=(i=t.weight)?i:0,this.type=null!=(n=t.type)?n:"",this.reflect=null!=(s=t.reflect)&&s}var i=t.prototype;return i.copyWith=function(i){var n,e,s,o;return void 0===i&&(i={}),new t({source:null!=(n=i.source)?n:this.source,weight:null!=(e=i.weight)?e:this.weight,type:null!=(s=i.type)?s:this.type,reflect:null!=(o=i.reflect)?o:this.reflect})},i.equals=function(t){return this===t||this.source.equals(t.source)&&this.weight==t.weight&&this.type==t.type&&this.reflect==t.reflect},i.strictEquals=function(t){return this===t},t.isEquals=function(t,i){return t.equals(i)},t.instantiateFromJson=function(i){if(null!=i){var n=e.instantiateFromJson(i.Source),s=p(i.Weight),o=m(i.Type),a=f(i.Reflect);if(void 0!==n&&void 0!==s&&void 0!==o&&void 0!==a)return new t({source:n,weight:s,type:o,reflect:a})}},t}();t.SerializableInput=s;var o=function(){function t(t){var i,n,s,o,a,u;void 0===t&&(t={}),this.destination=void 0,this.vertexIndex=void 0,this.scale=void 0,this.weight=void 0,this.type=void 0,this.reflect=void 0,this.destination=null!=(i=t.destination)?i:e.DEFAULT,this.vertexIndex=null!=(n=t.vertexIndex)?n:0,this.scale=null!=(s=t.scale)?s:0,this.weight=null!=(o=t.weight)?o:0,this.type=null!=(a=t.type)?a:"",this.reflect=null!=(u=t.reflect)&&u}var i=t.prototype;return i.equals=function(t){return this===t||this.destination.equals(t.destination)&&this.vertexIndex==t.vertexIndex&&this.scale==t.scale&&this.weight==t.weight&&this.type==t.type&&this.reflect==t.reflect},i.strictEquals=function(t){return this===t},i.copyWith=function(i){var n,e,s,o,a,u;return void 0===i&&(i={}),new t({destination:null!=(n=i.destination)?n:this.destination,vertexIndex:null!=(e=i.vertexIndex)?e:this.vertexIndex,scale:null!=(s=i.scale)?s:this.scale,weight:null!=(o=i.weight)?o:this.weight,type:null!=(a=i.type)?a:this.type,reflect:null!=(u=i.reflect)?u:this.reflect})},t.isEquals=function(t,i){return t.equals(i)},t.instantiateFromJson=function(i){if(null!=i){var n=e.instantiateFromJson(i.Destination),s=p(i.VertexIndex),o=p(i.Scale),a=p(i.Weight),u=m(i.Type),r=f(i.Reflect);if(void 0!==n&&void 0!==s&&void 0!==o&&void 0!==a&&void 0!==u&&void 0!==r)return new t({destination:n,vertexIndex:s,scale:o,weight:a,type:u,reflect:r})}},t}();t.SerializableOutput=o;var a=function(){function t(t){var n,e,s,o,a;void 0===t&&(t={}),this.position=void 0,this.mobility=void 0,this.delay=void 0,this.acceleration=void 0,this.radius=void 0,this.position=null!=(n=t.position)?n:i.DEFAULT,this.mobility=null!=(e=t.mobility)?e:0,this.delay=null!=(s=t.delay)?s:0,this.acceleration=null!=(o=t.acceleration)?o:0,this.radius=null!=(a=t.radius)?a:0}var n=t.prototype;return n.equals=function(t){return this===t||this.position.equals(t.position)&&this.mobility==t.mobility&&this.delay==t.delay&&this.acceleration==t.acceleration&&this.radius==t.radius},n.strictEquals=function(t){return this===t},n.copyWith=function(i){var n,e,s,o,a,u;return void 0===i&&(i={}),new t({position:null!=(n=null==(e=i.position)?void 0:e.clone())?n:this.position.clone(),mobility:null!=(s=i.mobility)?s:this.mobility,delay:null!=(o=i.delay)?o:this.delay,acceleration:null!=(a=i.acceleration)?a:this.acceleration,radius:null!=(u=i.radius)?u:this.radius})},t.isEquals=function(t,i){return t.equals(i)},t.instantiateFromJson=function(n){if(null!=n){var e=i.instantiateFromJson(n.Position),s=p(n.Mobility),o=p(n.Delay),a=p(n.Acceleration),u=p(n.Radius);if(void 0!==e&&void 0!==s&&void 0!==o&&void 0!==a&&void 0!==u)return new t({position:e,mobility:s,delay:o,acceleration:a,radius:u})}},t}();t.SerializableVertex=a;var u=function(){function t(t){var i,e;void 0===t&&(t={}),this.position=void 0,this.angle=void 0,this.position=null!=(i=t.position)?i:n.DEFAULT,this.angle=null!=(e=t.angle)?e:n.DEFAULT}var i=t.prototype;return i.copyWith=function(i){var n,e;return void 0===i&&(i={}),new t({position:null!=(n=i.position)?n:this.position,angle:null!=(e=i.angle)?e:this.angle})},i.equals=function(t){return this===t||this.position.equals(t.position)&&this.angle.equals(t.angle)},i.strictEquals=function(t){return this===t},t.instantiateFromJson=function(i){if(null!=i){var e=n.instantiateFromJson(i.Position),s=n.instantiateFromJson(i.Angle);if(void 0!==e&&void 0!==s)return new t({position:e,angle:s})}},t}();t.SerializableNormalization=u;var r=function(){function t(t){var i,n,e,s,o;void 0===t&&(t={}),this.id=void 0,this.input=void 0,this.output=void 0,this.vertices=void 0,this.normalization=void 0,this.id=null!=(i=t.id)?i:"",this.input=null!=(n=t.input)?n:new Array,this.output=null!=(e=t.output)?e:new Array,this.vertices=null!=(s=t.vertices)?s:new Array,this.normalization=null!=(o=t.normalization)?o:u.DEFAULT}var i=t.prototype;return i.copyWith=function(i){var n,e,s,o,a;return void 0===i&&(i={}),new t({id:null!=(n=i.id)?n:this.id,input:null!=(e=i.input)?e:this.input,output:null!=(s=i.output)?s:this.output,vertices:null!=(o=i.vertices)?o:this.vertices,normalization:null!=(a=i.normalization)?a:this.normalization})},i.equals=function(t){var i=v.isEquals;return this===t||this.id==t.id&&i(s.isEquals,this.input,t.input)&&i(o.isEquals,this.output,t.output)&&i(a.isEquals,this.vertices,t.vertices)&&this.normalization.equals(t.normalization)},i.strictEquals=function(t){return this===t},t.instantiateFromJson=function(i){if(null!=i){var n=d.asString,e=(d.asArray,n(i.Id)),r=d.arrayedInstantiateFromJson(i.Input,s.instantiateFromJson),l=d.arrayedInstantiateFromJson(i.Output,o.instantiateFromJson),c=d.arrayedInstantiateFromJson(i.Vertices,a.instantiateFromJson),h=u.instantiateFromJson(i.Normalization);if(void 0!==e&&void 0!==r&&void 0!==l&&void 0!==c&&void 0!==h)return new t({id:e,input:r,output:l,vertices:c,normalization:h})}},t}();t.SerializablePhysicsSettings=r;var l=function(){function t(t){var i,n,e,s,o,a;void 0===t&&(t={}),this.physicsSettingCount=void 0,this.totalInputCount=void 0,this.totalOutputCount=void 0,this.totalVertexCount=void 0,this.effectiveForces=void 0,this.fps=void 0,this.physicsSettingCount=null!=(i=t.physicsSettingCount)?i:0,this.totalInputCount=null!=(n=t.totalInputCount)?n:0,this.totalOutputCount=null!=(e=t.totalOutputCount)?e:0,this.totalVertexCount=null!=(s=t.totalVertexCount)?s:0,this.effectiveForces=null!=(o=t.effectiveForces)?o:c.DEFAULT,this.fps=null!=(a=t.fps)?a:0}var i=t.prototype;return i.copyWith=function(i){var n,e,s,o,a,u;return void 0===i&&(i={}),new t({physicsSettingCount:null!=(n=i.physicsSettingCount)?n:this.physicsSettingCount,totalInputCount:null!=(e=i.totalInputCount)?e:this.totalInputCount,totalOutputCount:null!=(s=i.totalOutputCount)?s:this.totalOutputCount,totalVertexCount:null!=(o=i.totalVertexCount)?o:this.totalVertexCount,effectiveForces:null!=(a=i.effectiveForces)?a:this.effectiveForces,fps:null!=(u=i.fps)?u:this.fps})},i.equals=function(t){return this===t||this.physicsSettingCount==t.physicsSettingCount&&this.totalInputCount==t.totalInputCount&&this.totalOutputCount==t.totalOutputCount&&this.totalVertexCount==t.totalVertexCount&&this.effectiveForces.equals(t.effectiveForces)&&this.fps==t.fps},i.strictEquals=function(t){return this===t},t.instantiateFromJson=function(i){if(null!=i){var n=p(i.PhysicsSettingCount),e=p(i.TotalInputCount),s=p(i.TotalOutputCount),o=p(i.VertexCount),a=c.instantiateFromJson(i.EffectiveForces);if(void 0!==n&&void 0!==e&&void 0!==s&&void 0!==o&&void 0!==a)return new t({physicsSettingCount:n,totalInputCount:e,totalOutputCount:s,totalVertexCount:o,effectiveForces:a,fps:p(i.Fps)})}},t}();t.SerializableMeta=l;var c=function(){function t(t){var n,e;void 0===t&&(t={}),this.gravity=void 0,this.wind=void 0,this.gravity=null!=(n=t.gravity)?n:i.DEFAULT,this.wind=null!=(e=t.wind)?e:i.DEFAULT}var n=t.prototype;return n.copyWith=function(i){var n,e;return void 0===i&&(i={}),new t({gravity:null!=(n=i.gravity)?n:this.gravity,wind:null!=(e=i.wind)?e:this.wind})},t.instantiateFromJson=function(n){if(null!=n){var e=i.instantiateFromJson(n.Gravity),s=i.instantiateFromJson(n.Wind);if(void 0!==e&&void 0!==s)return new t({gravity:e,wind:s})}},n.equals=function(t){return this===t||this.gravity.equals(t.gravity)&&this.wind.equals(t.wind)},n.strictEquals=function(t){return this===t},t}();t.SerializableEffectiveForces=c,(i||(i=t.SerializableVector2||(t.SerializableVector2={}))).DEFAULT=new i,(c||(c=t.SerializableEffectiveForces||(t.SerializableEffectiveForces={}))).DEFAULT=new c,(l||(l=t.SerializableMeta||(t.SerializableMeta={}))).DEFAULT=new l,(n||(n=t.SerializableNormalizationValue||(t.SerializableNormalizationValue={}))).DEFAULT=new n,(e||(e=t.SerializableParameter||(t.SerializableParameter={}))).DEFAULT=new e,(s||(s=t.SerializableInput||(t.SerializableInput={}))).DEFAULT=new s,(a||(a=t.SerializableVertex||(t.SerializableVertex={}))).DEFAULT=new a,(u||(u=t.SerializableNormalization||(t.SerializableNormalization={}))).DEFAULT=new u,(r||(r=t.SerializablePhysicsSettings||(t.SerializablePhysicsSettings={}))).DEFAULT=new r}(y||(y={}));t("default",y);i._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysicsController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismUpdateController.ts","./CubismUpdateExecutionOrder.ts","./CubismPhysics.ts","./CubismPhysicsRig.ts","./ComponentExtensionMethods2.ts","./ICubismUpdatable.ts","./CubismRenderController.ts","./CubismMaskController.ts"],(function(t){var e,i,n,r,o,a,s,l,u,c,p,d,f,h,g,C;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass,n=t.applyDecoratedDescriptor,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,l=t.Component},function(t){u=t.default},function(t){c=t.default},function(t){p=t.default},function(t){d=t.default},function(t){f=t.default},function(t){h=t.default},function(t){g=t.default},function(t){C=t.default}],execute:function(){var b,m,y,U,_,v,L,z;a._RF.push({},"ca488+/xMdDh79Zy3K3JcES","CubismPhysicsController",void 0);var M=s.ccclass,O=s.property;t("default",(m=M("CubismPhysicsController"),y=O({type:d,serializable:!0}),U=O({serializable:!1,visible:!1}),m((b=h.SYMBOL,L=n((v=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"_rig",L,o(e)),e._parameters=null,r(e,"_hasUpdateController",z,o(e)),e.bindedOnLateUpdate=e.onLateUpdate.bind(o(e)),e[b]=h.SYMBOL,e}e(n,t);var a=n.prototype;return a.onLateUpdate=function(t){var e,i=t;p.useFixedDeltaTime,null==(e=this.rig)||e.evaluate(i)},a.stabilization=function(){if(null!=this.rig){this.rig.stabilization();var t=this.getComponent(g),e=this.getComponent(C);console.assert(null!=t),null==t||t.onLateUpdate(),null==e||e.onLateUpdate()}},a.initialize=function(t){this.rig=t,this.onLoad()},a.onLoad=function(){var t,e;if(null!=this.rig){this.rig.controller=this;for(var i=this.rig.subRigs,n=0;n<i.length;n++){var r=i[n];null!=r&&(r.rig=this.rig)}this.parameters=null!=(t=null==(e=f.findCubismModel(this))?void 0:e.parameters)?t:null,this.rig.initialize()}},a.start=function(){this.hasUpdateController=null!=this.getComponent(u)},a.lateUpdate=function(t){this.hasUpdateController||this.onLateUpdate(t)},i(n,[{key:"rig",get:function(){return this._rig},set:function(t){this._rig=t}},{key:"parameters",get:function(){return this._parameters},set:function(t){this._parameters=t}},{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(t){this._hasUpdateController=t}},{key:"executionOrder",get:function(){return c.CUBISM_PHYSICS_CONTROLLER}},{key:"needsUpdateOnEditing",get:function(){return!1}}]),n}(l)).prototype,"_rig",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(v.prototype,"_hasUpdateController",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=v))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysicsInput.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismPhysicsMath.ts","./CubismPhysicsSourceComponent.ts"],(function(e){var i,t,r,a,n,l,o,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,a=e._decorator,n=e.Enum,l=e.math},function(e){o=e.default},function(e){u=e.default}],execute:function(){var s,m,c,p,b,h,f,d,g,z,y,P,V,v,I,w,N,C,F;r._RF.push({},"2562eepuVhJJrifFRsH94ha","CubismPhysicsInput",void 0);var x=a.property,T=a.ccclass;e("default",(s=T("CubismPhysicsInput"),m=x({serializable:!0}),c=x({serializable:!0}),p=x({serializable:!0}),b=x({serializable:!0}),h=x({type:n(u),serializable:!0}),f=x({serializable:!0}),d=x({serializable:!1,visible:!1}),g=x({serializable:!1,visible:!1}),s((P=i((y=function(){function e(){t(this,"sourceId",P,this),t(this,"scaleOfTranslation",V,this),t(this,"angleScale",v,this),t(this,"weight",I,this),t(this,"sourceComponent",w,this),t(this,"isInverted",N,this),t(this,"source",C,this),t(this,"getNormalizedParameterValue",F,this)}var i=e.prototype;return i.getInputTranslationXFromNormalizedParameterValue=function(e,i,t,r,a,n){var u=o.normalize(t,r,a.position.minimum,a.position.maximum,a.position.default,this.isInverted);return{translation:new l.Vec2(e.x+u.normalized*n,e.y),angle:i,parameterValue:u.clamped}},i.getInputTranslationYFromNormalizedParameterValue=function(e,i,t,r,a,n){var u=o.normalize(t,r,a.position.minimum,a.position.maximum,a.position.default,this.isInverted);return{translation:new l.Vec2(e.x,e.y+u.normalized*n),angle:i,parameterValue:u.clamped}},i.getInputAngleFromNormalizedParameterValue=function(e,i,t,r,a,n){var l=o.normalize(t,r,a.angle.minimum,a.angle.maximum,a.angle.default,this.isInverted);return{translation:e.clone(),angle:i+l.normalized*n,parameterValue:l.clamped}},i.initializeGetter=function(){switch(this.sourceComponent){case u.X:this.getNormalizedParameterValue=this.getInputTranslationXFromNormalizedParameterValue.bind(this);break;case u.Y:this.getNormalizedParameterValue=this.getInputTranslationYFromNormalizedParameterValue.bind(this);break;case u.Angle:this.getNormalizedParameterValue=this.getInputAngleFromNormalizedParameterValue.bind(this);break;default:this.sourceComponent}},e}()).prototype,"sourceId",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),V=i(y.prototype,"scaleOfTranslation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l.Vec2.ZERO.clone()}}),v=i(y.prototype,"angleScale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=i(y.prototype,"weight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=i(y.prototype,"sourceComponent",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.X}}),N=i(y.prototype,"isInverted",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=i(y.prototype,"source",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(y.prototype,"getNormalizedParameterValue",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=y))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysicsMath.ts",["cc"],(function(a){var t,n;return{setters:[function(a){t=a.cclegacy,n=a.math}],execute:function(){t._RF.push({},"85eb74F4XxGgJZUEtt0V8Ad","CubismPhysicsMath",void 0);a("default",function(){function a(){}return a.degreesToRadian=function(a){return a/180*Math.PI},a.directionToRadian=function(a,t){var n=Math.atan2(t.y,t.x),e=Math.atan2(a.y,a.x);return this.getAngleDiff(n,e)},a.getAngleDiff=function(a,t){for(var n=a-t;n<-Math.PI;)n+=2*Math.PI;for(;n>Math.PI;)n-=2*Math.PI;return n},a.radianToDirection=function(a){return new n.Vec2(Math.sin(a),Math.cos(a))},a.getRangeValue=function(a,t){var n=Math.max(a,t),e=Math.min(a,t);return Math.abs(n-e)},a.getDefaultValue=function(t,n){return Math.min(t,n)+a.getRangeValue(t,n)/2},a.normalize=function(t,e,i,u,r,c){void 0===c&&(c=!1);var h=0,m=Math.max(t.maximumValue,t.minimumValue),o=Math.min(t.maximumValue,t.minimumValue);e=n.clamp(e,o,m);var s=Math.min(i,u),f=Math.max(i,u),M=r,l=a.getDefaultValue(o,m),g=e-l;switch(Math.sign(g)){case 1:var d=m-l;0!=d&&(h=g*((f-M)/d),h+=M);break;case-1:var v=o-l;0!=v&&(h=g*((s-M)/v),h+=M);break;case 0:h=M}return{normalized:c?h:-1*h,clamped:e}},a}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysicsNormalization.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n,u;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){n=i.cclegacy,u=i._decorator}],execute:function(){var l,a,r,o,s,m,c,p,h,f,b,y,d,g,v,z;n._RF.push({},"cb269cEQRNKqqSv9b4/vK1p","CubismPhysicsNormalization",void 0);var w=u.property,x=u.ccclass,q=i("CubismPhysicsNormalizationTuplet",(l=x("CubismPhysicsNormalizationTuplet"),a=w({serializable:!0}),r=w({serializable:!0}),o=w({serializable:!0}),l((c=t((m=function(){function i(i){var t,n,u;void 0===i&&(i={}),e(this,"maximum",c,this),e(this,"minimum",p,this),e(this,"default",h,this),this.maximum=null!=(t=i.maximum)?t:0,this.minimum=null!=(n=i.minimum)?n:0,this.default=null!=(u=i.defaultValue)?u:0}var t=i.prototype;return t.equals=function(i){return this===i||this.default==i.default&&this.maximum==i.maximum&&this.minimum==this.minimum},t.strictEquals=function(i){return this===i},t.copyWith=function(t){var e,n,u;return void 0===t&&(t={}),new i({maximum:null!=(e=t.maximum)?e:this.maximum,minimum:null!=(n=t.minimum)?n:this.minimum,defaultValue:null!=(u=t.defaultValue)?u:this.default})},i}()).prototype,"maximum",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=t(m.prototype,"minimum",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=t(m.prototype,"default",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=m))||s)),P=(f=x("CubismPhysicsNormalization"),b=w({type:q,serializable:!0}),y=w({type:q,serializable:!0}),f((v=t((g=function(){function i(i){var t,n;void 0===i&&(i={}),e(this,"position",v,this),e(this,"angle",z,this),this.position=null!=(t=i.position)?t:new q,this.angle=null!=(n=i.angle)?n:new q}var t=i.prototype;return t.equals=function(i){return this===i||this.angle.equals(i.angle)&&this.position.equals(i.position)},t.strictEquals=function(i){return this===i},t.copyWith=function(t){var e,n;return void 0===t&&(t={}),new i({position:null!=(e=t.position)?e:this.position,angle:null!=(n=t.angle)?n:this.angle})},i}()).prototype,"position",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(g.prototype,"angle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=g))||d);(P||(P={})).DEFAULT=new P;i("default",P);(q||(q=i("CubismPhysicsNormalizationTuplet",{}))).DEFAULT=new q,n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysicsOutput.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismPhysics.ts","./CubismPhysicsMath.ts","./CubismPhysicsSourceComponent.ts","./Utils.ts"],(function(t){var e,i,n,a,r,s,u,l,o,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t._decorator,r=t.Enum,s=t.math},function(t){u=t.default},function(t){l=t.default},function(t){o=t.default},function(t){c=t.MathExtensions}],execute:function(){var h,p,b,g,f,d,m,y,S,v,O,z,w,C,x,V,I;n._RF.push({},"f6fc0W74C5NVYplhds4o6Hp","CubismPhysicsOutput",void 0);var T=a.property,P=a.ccclass,A=c.Vec2;t("default",(h=P("CubismPhysicsOutput"),p=T({serializable:!0}),b=T({serializable:!0}),g=T({serializable:!0}),f=T({serializable:!0}),d=T({serializable:!0}),m=T({type:r(o),serializable:!0,readonly:!1}),y=T({serializable:!0}),h((O=e((v=function(){function t(){i(this,"destinationId",O,this),i(this,"particleIndex",z,this),i(this,"translationScale",w,this),i(this,"angleScale",C,this),i(this,"weight",x,this),i(this,"sourceComponent",V,this),i(this,"isInverted",I,this),this.valueBelowMinimum=0,this.valueExceededMaximum=0,this.destination=null,this.getValue=null,this.getScale=null}var e=t.prototype;return e.getOutputTranslationX=function(t,e,i,n){var a=t.x;return this.isInverted&&(a*=-1),a},e.getOutputTranslationY=function(t,e,i,n){var a=t.y;return this.isInverted&&(a*=-1),a},e.getOutputAngle=function(t,e,i,n){var a=s.Vec2.ZERO;a=u.useAngleCorrection?i<2?new s.Vec2(n.x,-1*n.y):A.subtract(e[i-1].position,e[i-2].position):new s.Vec2(n.x,-1*n.y);var r=l.directionToRadian(a,t);return this.isInverted&&(r*=-1),r},e.getOutputScaleTranslationX=function(){return this.translationScale.x},e.getOutputScaleTranslationY=function(){return this.translationScale.y},e.getOutputScaleAngle=function(){return this.angleScale},e.initializeGetter=function(){switch(this.sourceComponent){case o.X:this.getScale=this.getOutputScaleTranslationX.bind(this),this.getValue=this.getOutputTranslationX.bind(this);break;case o.Y:this.getScale=this.getOutputScaleTranslationY.bind(this),this.getValue=this.getOutputTranslationY.bind(this);break;case o.Angle:this.getScale=this.getOutputScaleAngle.bind(this),this.getValue=this.getOutputAngle.bind(this);break;default:this.sourceComponent}},t}()).prototype,"destinationId",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=e(v.prototype,"particleIndex",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=e(v.prototype,"translationScale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.Vec2.ZERO.clone()}}),C=e(v.prototype,"angleScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=e(v.prototype,"weight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=e(v.prototype,"sourceComponent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return o.X}}),I=e(v.prototype,"isInverted",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=v))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysicsParticle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,l,e,o,n;return{setters:[function(i){t=i.applyDecoratedDescriptor,l=i.initializerDefineProperty},function(i){e=i.cclegacy,o=i._decorator,n=i.math}],execute:function(){var a,r,s,u,c,h,y,b,p,f,v,d,P,m,z,g,w,G,q,E,R;e._RF.push({},"5f186sAYFFB4JEQDBTmp9Us","CubismPhysicsParticle",void 0);var O=o.property,V=o.ccclass;i("default",(a=V("CubismPhysicsParticle"),r=O({serializable:!0}),s=O({serializable:!0}),u=O({serializable:!0}),c=O({serializable:!0}),h=O({serializable:!1}),y=O({serializable:!1}),b=O({serializable:!1}),p=O({serializable:!1}),f=O({serializable:!1}),a((P=t((d=function(){function i(i){var t,e,o,a,r,s,u,c,h,y,b,p,f,v,d,O;void 0===i&&(i={}),this.initialPosition=void 0,l(this,"mobility",P,this),l(this,"delay",m,this),l(this,"acceleration",z,this),l(this,"radius",g,this),l(this,"position",w,this),l(this,"lastPosition",G,this),l(this,"lastGravity",q,this),l(this,"force",E,this),l(this,"velocity",R,this);var V=n.Vec2.ZERO.clone();this.initialPosition=null!=(t=null==(e=i.initialPosition)?void 0:e.clone())?t:V,this.mobility=null!=(o=i.mobility)?o:0,this.delay=null!=(a=i.delay)?a:0,this.acceleration=null!=(r=i.acceleration)?r:0,this.radius=null!=(s=i.radius)?s:0,this.position=null!=(u=null==(c=i.position)?void 0:c.clone())?u:V,this.lastPosition=null!=(h=null==(y=i.lastPosition)?void 0:y.clone())?h:V,this.lastGravity=null!=(b=null==(p=i.lastGravity)?void 0:p.clone())?b:V,this.force=null!=(f=null==(v=i.force)?void 0:v.clone())?f:V,this.velocity=null!=(d=null==(O=i.velocity)?void 0:O.clone())?d:V}var t=i.prototype;return t.copyWith=function(t){var l,e,o,n,a,r,s,u,c,h;return void 0===t&&(t={}),new i({initialPosition:null!=(l=t.initialPosition)?l:this.initialPosition,mobility:null!=(e=t.mobility)?e:this.mobility,delay:null!=(o=t.delay)?o:this.delay,acceleration:null!=(n=t.acceleration)?n:this.acceleration,radius:null!=(a=t.radius)?a:this.radius,position:null!=(r=t.position)?r:this.position,lastPosition:null!=(s=t.lastPosition)?s:this.lastPosition,lastGravity:null!=(u=t.lastGravity)?u:this.lastGravity,force:null!=(c=t.force)?c:this.force,velocity:null!=(h=t.velocity)?h:this.velocity})},t.equals=function(i){return this===i||this.initialPosition.equals(i.initialPosition)&&this.mobility==i.mobility&&this.delay==i.delay&&this.acceleration==i.acceleration&&this.radius==i.radius&&this.position.equals(i.position)&&this.lastPosition.equals(i.lastPosition)&&this.lastGravity.equals(i.lastGravity)&&this.force.equals(i.force)&&this.velocity.equals(i.velocity)},t.strictEquals=function(i){return this===i},i}()).prototype,"mobility",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=t(d.prototype,"delay",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(d.prototype,"acceleration",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=t(d.prototype,"radius",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=t(d.prototype,"position",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n.Vec2.ZERO.clone()}}),G=t(d.prototype,"lastPosition",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n.Vec2.ZERO.clone()}}),q=t(d.prototype,"lastGravity",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n.Vec2.ZERO.clone()}}),E=t(d.prototype,"force",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n.Vec2.ZERO.clone()}}),R=t(d.prototype,"velocity",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n.Vec2.ZERO.clone()}}),v=d))||v));e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysicsRig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./CubismPhysics.ts","./CubismPhysicsSubRig.ts"],(function(e){var t,r,a,i,s,n,l,h,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,a=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e._decorator,n=e.CCFloat},function(e){l=e.default},function(e){h=e.default},function(e){u=e.default}],execute:function(){var c,o,p,m,f,g,_,C,b,v,y,R,z,I,w,d,T;i._RF.push({},"2e307FBn7ZNp4vJkS2N5cTK","CubismPhysicsRig",void 0);var A=s.property,P=s.ccclass;e("default",(c=P("CubismPhysicsRig"),o=A({type:[u],serializable:!0}),p=A({serializable:!0}),m=A({serializable:!0}),f=A({type:n,serializable:!0}),g=A({serializable:!1}),_=A({serializable:!1}),C=A({serializable:!1}),c((y=t((v=function(){function e(){a(this,"subRigs",y,this),a(this,"gravity",R,this),a(this,"wind",z,this),a(this,"fps",I,this),a(this,"_currentRemainTime",w,this),a(this,"_parametersCache",d,this),a(this,"_parametersInputCache",T,this),this._controller=null}var t=e.prototype;return t.initialize=function(){for(var e=0;e<this.subRigs.length;e++){var t;null==(t=this.subRigs[e])||t.initialize()}},t.stabilization=function(){var e=this.controller;if(null!=e){var t=e.parameters;if(null!=t){if(null==this._parametersCache&&(this._parametersCache=new Array(t.length).fill(0)),this._parametersCache.length<t.length){var r=this._parametersCache.length;this._parametersCache.length=t.length,this._parametersCache.fill(0,r)}if(null==this._parametersInputCache&&(this._parametersInputCache=new Array(t.length).fill(0)),this._parametersInputCache.length<t.length){var a=this._parametersInputCache.length;this._parametersInputCache.length=t.length,this._parametersInputCache.fill(0,a)}for(var i=0;i<t.length;i++)this._parametersCache[i]=t[i].value,this._parametersInputCache[i]=this._parametersCache[i];for(var s=0;s<this.subRigs.length;s++){var n=this.subRigs[s];null!=n?n.stabilization():console.assert(null!=n)}var h=l.findCubismModel(e);null!=h?h.forceUpdateNow():console.assert(null!=h)}else console.assert(null!=t)}else console.assert(null!=e)},t.evaluate=function(e){if(!(0>=e)){this._currentRemainTime+=e,this._currentRemainTime>h.maxDeltaTime&&(this._currentRemainTime=0);var t=0;t=this.fps>0?1/this.fps:e;var r=this.controller;if(null!=r){var a=r.parameters;if(null!=a){if(null==this._parametersCache&&(this._parametersCache=new Array(a.length).fill(0)),this._parametersCache.length<a.length){var i=this._parametersCache.length;this._parametersCache.length=a.length,this._parametersCache.fill(0,i)}if(null==this._parametersInputCache&&(this._parametersInputCache=new Array(a.length).fill(0)),this._parametersInputCache.length<a.length){var s=this._parametersInputCache.length;this._parametersInputCache.length=a.length,this._parametersInputCache.fill(0,s);for(var n=0;n<this._parametersInputCache.length;n++)this._parametersInputCache[n]=this._parametersCache[n]}for(;this._currentRemainTime>=t;){for(var l=t/this._currentRemainTime,u=0;u<a.length;u++)this._parametersCache[u]=this._parametersInputCache[u]*(1-l)+a[u].value*l,this._parametersInputCache[u]=this._parametersCache[u];for(var c=0;c<this.subRigs.length;c++){var o=this.subRigs[c];null!=o?o.evaluate(t):console.assert(null!=o)}this._currentRemainTime-=t}for(var p=this._currentRemainTime/t,m=0;m<this.subRigs.length;m++){var f=this.subRigs[m];null!=f?f.interpolate(p):console.assert(null!=f)}}else console.assert(null!=a)}else console.assert(null!=r)}},r(e,[{key:"parametersCache",get:function(){return this._parametersCache},set:function(e){this._parametersCache=e}},{key:"controller",get:function(){return this._controller},set:function(e){this._controller=e}}]),e}()).prototype,"subRigs",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),R=t(v.prototype,"gravity",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.gravity.clone()}}),z=t(v.prototype,"wind",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.wind.clone()}}),I=t(v.prototype,"fps",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=t(v.prototype,"_currentRemainTime",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=t(v.prototype,"_parametersCache",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),T=t(v.prototype,"_parametersInputCache",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),b=v))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysicsSourceComponent.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"dc0976I/YRDx5YGYleGTrJi","CubismPhysicsSourceComponent",void 0);var u=function(n){return n[n.X=0]="X",n[n.Y=1]="Y",n[n.Angle=2]="Angle",n}(u||{});!function(n){n.purse=function(n){var u;return null!=(u=e.get(n))?u:null};var e=new Map([["X",u.X],["Y",u.Y],["Angle",u.Angle]])}(u||(u={}));n("default",u);e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPhysicsSubRig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ArrayExtensionMethods2.ts","./CubismPhysics.ts","./CubismPhysicsInput.ts","./CubismPhysicsMath.ts","./CubismPhysicsNormalization.ts","./CubismPhysicsOutput.ts","./CubismPhysicsParticle.ts","./Utils.ts"],(function(t){var i,e,n,a,r,l,o,u,s,c,p,h,d,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.createClass,n=t.initializerDefineProperty},function(t){a=t.cclegacy,r=t._decorator,l=t.math},function(t){o=t.default},function(t){u=t.default},function(t){s=t.default},function(t){c=t.default},function(t){p=t.default},function(t){h=t.default},function(t){d=t.default},function(t){m=t.MathExtensions}],execute:function(){var v,f,g,y,b,V,P,z,R,w,x,O,M,_,S,W,C;a._RF.push({},"561c4QkwAhNk4Iil02SKqA/","CubismPhysicsSubRig",void 0);var I=r.property,E=r.ccclass,F=m.Vec2,T=(t("default",(v=E("CubismPhysicsSubRig"),f=I({type:[s],serializable:!0}),g=I({type:[h],serializable:!0}),y=I({type:[d],serializable:!0}),b=I({type:p,serializable:!0}),V=I({serializable:!1}),P=I({serializable:!1}),z=I({serializable:!1}),v((x=i((w=function(){function t(){n(this,"input",x,this),n(this,"output",O,this),n(this,"particles",M,this),n(this,"normalization",_,this),n(this,"_rig",S,this),n(this,"_currentRigOutput",W,this),n(this,"_previousRigOutput",C,this)}var i=t.prototype;return i.interpolate=function(t){var i=this.rig;if(null!=i){var e=i.controller;if(null!=e){var n=e.parameters;if(null!=n)for(var a=0;a<this.output.length;a++){var r,l=this.output[a];null!=l.destination||(l.destination=o.findByIdFromParameters(n,null!=(r=l.destinationId)?r:"")),null!=l.destination&&(l.destination.value=this.updateOutputParameterValue(l.destination,l.destination.value,this._previousRigOutput.output[a]*(1-t)+this._currentRigOutput.output[a]*t,this.output[a]))}else console.assert(null!=n)}else console.assert(null!=e)}else console.assert(null!=i)},i.updateOutputParameterValue=function(t,i,e,n){if(null==n.getScale)return console.assert(null!=n.getScale),i;var a=e*n.getScale();a<t.minimumValue?(a<n.valueBelowMinimum&&(n.valueBelowMinimum=a),a=t.minimumValue):a>t.maximumValue&&(a>n.valueExceededMaximum&&(n.valueExceededMaximum=a),a=t.maximumValue);var r=n.weight/u.maximumWeight;return r>=1?a:i*(1-r)+a*r},i.updateParticles=function(t,i,e,n,a,r){t[0]=t[0].copyWith({position:i});var o=c.degreesToRadian(e),s=c.radianToDirection(o);s.normalize();for(var p=function(i){var e=t[i].acceleration;t[i]=t[i].copyWith({force:F.add(F.multiplySingle(s,e),n),lastPosition:t[i].position});var o,p,h,d,m=t[i].delay*r*30,v=(o=F.subtract(t[i].position,t[i-1].position),p=c.directionToRadian(t[i].lastGravity,s)/u.airResistance,h=Math.cos(p)*o.x-o.y*Math.sin(p),d=Math.sin(p)*h+o.y*Math.cos(p),new l.Vec2(h,d));t[i]=t[i].copyWith({position:F.add(t[i-1].position,v)});var f=F.multiplySingle(t[i].velocity,m),g=F.multiplySingle(t[i].force,m*m);t[i]=t[i].copyWith({position:F.add(F.add(t[i].position,f),g)});var y=F.subtract(t[i].position,t[i-1].position).normalize();t[i]=t[i].copyWith({position:F.add(t[i-1].position,F.multiplySingle(y,t[i].radius))}),Math.abs(t[i].position.x)<a&&(t[i].position.x=0),0!=m&&(t[i]=t[i].copyWith({velocity:F.multiplySingle(F.divideSingle(F.subtract(t[i].position,t[i].lastPosition),m),t[i].mobility)})),t[i]=t[i].copyWith({force:l.Vec2.ZERO,lastGravity:s})},h=1;h<t.length;h++)p(h)},i.updateParticlesForStabilization=function(t,i,e,n,a){t[0]=t[0].copyWith({position:i});var r=c.degreesToRadian(e),o=c.radianToDirection(r);o.normalize();for(var u=1;u<t.length;u++){t[u]=t[u].copyWith({force:m.Vec2.add(m.Vec2.multiplySingle(o,t[u].acceleration),n),lastPosition:t[u].position,velocity:l.Vec2.ZERO});var s=t[u].force;s.normalize(),t[u]=t[u].copyWith({position:m.Vec2.add(t[u-1].position,m.Vec2.multiplySingle(s,t[u].radius))}),Math.abs(t[u].position.x)<a&&(t[u]=t[u].copyWith({position:new l.Vec2(0,t[u].position.y)})),t[u]=t[u].copyWith({force:l.Vec2.ZERO,lastGravity:o})}},i.initialize=function(){var t,i=this.particles,e=null==(t=this.rig)?void 0:t.gravity;if(null!=e){i[0]=i[0].copyWith({initialPosition:l.Vec2.ZERO.clone(),lastPosition:l.Vec2.ZERO.clone(),lastGravity:new l.Vec2(e.x,-1*e.y)});for(var n=1;n<i.length;n++){var a,r=null==(a=this.rig)?void 0:a.gravity;if(null==r)return void console.assert(null!=r);var o=new l.Vec2(0,i[n].radius),u=F.add(i[n-1].initialPosition,o),s=u.clone(),c=u.clone();i[n]=i[n].copyWith({initialPosition:u,position:s,lastPosition:c,lastGravity:new l.Vec2(r.x,-1*r.y)})}for(var p=0;p<this.input.length;p++)this.input[p].initializeGetter();this._previousRigOutput=new T,this._currentRigOutput=new T;for(var h=0;h<this.output.length;h++)this.output[h].initializeGetter()}else console.assert(null!=e)},i.evaluate=function(t){var i=0,e=l.Vec2.ZERO.clone(),n=this.rig,a=this.normalization,r=this.particles,s=this._currentRigOutput,p=this._previousRigOutput;if(null==n||null==a)return console.assert(null!=n),void console.assert(null!=a);var h=n.controller;if(null!=h){var d=h.parameters;if(null!=d){for(var m=0;m<this.input.length;m++){var v,f=this.input[m],g=f.weight/u.maximumWeight;if(null!=f.getNormalizedParameterValue){null!=f.source||(f.source=o.findByIdFromParameters(d,null!=(v=f.sourceId)?v:""));var y=f.source;if(null!=y){var b=d.indexOf(y),V=f.getNormalizedParameterValue(e,i,y,n.parametersCache[b],a,g);n.parametersCache[b]=V.parameterValue,e=V.translation,i=V.angle}else console.assert(null!=y)}else console.assert(null!=f.getNormalizedParameterValue)}var P=c.degreesToRadian(-i),z=e.x*Math.cos(P)-e.y*Math.sin(P),R=z*Math.sin(P)+e.y*Math.cos(P);e=new l.Vec2(z,R),this.updateParticles(r,e,i,n.wind,u.movementThreshold*a.position.maximum,t);for(var w=0;w<this.output.length;w++){var x,O=this.output[w],M=O.particleIndex;if(M<1||M>=r.length)break;null!=O.destination||(O.destination=o.findByIdFromParameters(d,null!=(x=O.destinationId)?x:""));var _=O.destination;if(null!=_){var S=d.indexOf(_),W=F.subtract(r[M].position,r[M-1].position),C=_;if(null==O.getValue)return void console.assert(null!=O.getValue);var I=O.getValue(W,r,M,n.gravity);s.output[w]=I,p.output[w]=I,_.value=this.updateOutputParameterValue(C,_.value,I,O),n.parametersCache[S]=C.value}else console.assert(null!=_)}}else console.assert(null!=d)}else console.assert(null!=h)},i.stabilization=function(){var t=this,i=this.rig,e=this.normalization,n=this.particles,a=this._previousRigOutput,r=this._currentRigOutput;if(null==i||null==e)return console.assert(null!=i),void console.assert(null!=e);var s=i.controller;if(null!=s){var p=s.parameters;if(null!=p){for(var h=0,d=l.Vec2.ZERO,v=function(n){var a,r=t.input[n];if(null==r.getNormalizedParameterValue)return console.assert(null!=r.getNormalizedParameterValue),0;var l=r.weight/u.maximumWeight;null!=r.source||(r.source=o.findByIdFromParameters(p,null!=(a=r.sourceId)?a:""));var s=r.source;if(null==s)return console.assert(null!=s),0;var c=p.findIndex((function(i,e,a){return i===t.input[n].source})),m=s,v=r.getNormalizedParameterValue(d,h,m,s.value,e,l);d=v.translation,h=v.angle,s.value=v.parameterValue,i.parametersCache[c]=s.value},f=0;f<this.input.length;f++)v(f);var g=c.degreesToRadian(-h),y=d.x*Math.cos(g)-d.y*Math.sin(g),b=y*Math.sin(g)+d.y*Math.cos(g);d=new l.Vec2(y,b),this.updateParticlesForStabilization(n,d,h,i.wind,u.movementThreshold*e.position.maximum);for(var V=0;V<this.output.length;V++){var P,z=this.output[V];if(null!=z.getValue){if(a.output[V]=r.output[V],null!=z.destination||(z.destination=o.findByIdFromParameters(p,null!=(P=z.destinationId)?P:"")),null!=z.destination){var R=z.particleIndex;if(!(R<1||R>=this.particles.length)){var w=p.indexOf(z.destination),x=m.Vec2.subtract(n[R].position,n[R-1].position),O=z.destination,M=z.getValue(x,n,R,i.gravity);r.output[V]=M,a.output[V]=M,z.destination.value=this.updateOutputParameterValue(O,z.destination.value,M,this.output[V]),i.parametersCache[w]=z.destination.value}}}else console.assert(null!=z.getValue)}}else console.assert(null!=p)}else console.assert(null!=s)},e(t,[{key:"rig",get:function(){return this._rig},set:function(t){this._rig=t}}]),t}()).prototype,"input",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=i(w.prototype,"output",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=i(w.prototype,"particles",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=i(w.prototype,"normalization",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(w.prototype,"_rig",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(w.prototype,"_currentRigOutput",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T}}),C=i(w.prototype,"_previousRigOutput",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T}}),R=w))||R)),function(){function t(t){var i;void 0===t&&(t={}),this.output=new Array(0),this.output=null!=(i=t.output)?i:new Array(0)}var i=t.prototype;return i.copyWith=function(i){var e;return void 0===i&&(i={}),new t({output:null!=(e=i.output)?e:this.output})},i.equals=function(t){return this===t||this.output==t.output},i.strictEquals=function(t){return this===t},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPlayingExpression.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ArrayExtensionMethods2.ts","./CubismParameter.ts","./CubismParameterBlendMode.ts"],(function(e){var i,r,t,n,a,l,s,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){t=e.cclegacy,n=e._decorator,a=e.CCFloat},function(e){l=e.default},function(e){s=e.default},function(e){u=e.default}],execute:function(){var o,b,p,f,c,m,y,d,h,g,v,w,z,T,x,P,C,E,A,I,O;t._RF.push({},"7cbb3xubLdJ8rbsSkgybYIT","CubismPlayingExpression",void 0);var F=n.ccclass,_=n.property;e("default",(o=F("CubismPlayingExpression"),b=_({serializable:!0,visible:!0}),p=_({type:a,serializable:!0,visible:!0}),f=_({type:a,serializable:!0,visible:!0}),c=_({type:a,serializable:!0,visible:!0,range:[0,1,.01]}),m=_({type:a,serializable:!0,visible:!0}),y=_({type:a,serializable:!0,visible:!0}),d=_({type:[s],serializable:!0,visible:!0}),h=_({type:[a],serializable:!0,visible:!0}),g=_({type:[u],serializable:!0,visible:!0}),o((z=i((w=function(){function e(){r(this,"type",z,this),r(this,"fadeInTime",T,this),r(this,"fadeOutTime",x,this),r(this,"weight",P,this),r(this,"expressionUserTime",C,this),r(this,"expressionEndTime",E,this),r(this,"destinations",A,this),r(this,"value",I,this),r(this,"blend",O,this)}return e.create=function(i,r){if(null==i||null==r)return null;var t=new e;t.type=r.type,t.fadeInTime=r.fadeInTime<0?1:r.fadeInTime,t.fadeOutTime=r.fadeOutTime<0?1:r.fadeOutTime,t.weight=0,t.expressionUserTime=0,t.expressionEndTime=0;var n=r.parameters.length;if(t.destinations=new Array(n),t.value=new Array(n),t.blend=new Array(n),null==i.parameters)return console.error("CubismPlayingExpression.create(): parameters is null."),null;for(var a=0;a<n;a++)t.destinations[a]=l.findByIdFromParameters(i.parameters,r.parameters[a].id),t.value[a]=r.parameters[a].value,t.blend[a]=r.parameters[a].blend;return t},e}()).prototype,"type",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=i(w.prototype,"fadeInTime",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=i(w.prototype,"fadeOutTime",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=i(w.prototype,"weight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=i(w.prototype,"expressionUserTime",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=i(w.prototype,"expressionEndTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=i(w.prototype,"destinations",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),I=i(w.prototype,"value",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),O=i(w.prototype,"blend",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),v=w))||v));t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPose3Json.ts",["cc","./JsonParseUtils.ts"],(function(n){var r,i;return{setters:[function(n){r=n.cclegacy},function(n){i=n.default}],execute:function(){r._RF.push({},"1f13aUgMmJDeZg4lGTUQ/gb","CubismPose3Json",void 0);var t,e,o=i.asArray,u=i.asNumber,s=i.asString,l=function(){function n(){this.type="",this.fadeInTime=0,this.groups=null}return n.loadFrom=function(r){var t=i.parse(r);return t?n.loadFromJson(t):null},n.loadFromJsonAsset=function(r){return null==r.json?null:n.loadFromJson(r.json)},n.loadFromJson=function(r){var i;if(null==r)return null;var t=s(r.Type),e=n.parseGroups(r.Groups);if(void 0===t||null==e)return null;var o=null!=(i=u(r.FadeInTime))?i:.5,l=new n;return l.type=t,l.groups=e,l.fadeInTime=o,l},n.parseGroups=function(r){var t=o(r);if(null!=t){for(var e=Array(t.length),u=0;u<e.length;u++){var s=i.arrayedInstantiateFromJson(t[u],n.SerializablePoseGroup.instantiateFromJson);if(null==s)return;e[u]=s}return e}},n}();t=l||(l={}),e=function(){function n(n){var r,i;void 0===n&&(n={}),this.id="",this.link=new Array(0),this.id=null!=(r=n.id)?r:"",this.link=null!=(i=n.link)?i:new Array(0)}var r=n.prototype;return r.copyWith=function(r){var i,t;return void 0===r&&(r={}),new n({id:null!=(i=r.id)?i:this.id,link:null!=(t=r.link)?t:this.link})},r.equals=function(n){return this===n||this.id==n.id&&this.link==n.link},r.strictEquals=function(n){return this===n},n.instantiateFromJson=function(r){var t=s(r.Id);if(void 0!==t)return new n({id:t,link:i.arrayedInstantiateFromJson(r.Link,s)})},n}(),t.SerializablePoseGroup=e;n("default",l);r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPoseController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./ComponentExtensionMethods.ts","./CubismPosePart.ts","./CubismPart.ts","./CubismUpdateController.ts","./CubismUpdateExecutionOrder.ts","./ArrayExtensionMethods2.ts","./ICubismUpdatable.ts","./CubismPoseData.ts"],(function(t){var e,a,o,n,i,r,s,l,p,u,c,f,h,d,y,v,g,C;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass,o=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.CCInteger,p=t.Component},function(t){u=t.default},function(t){c=t.default},function(t){f=t.default},function(t){h=t.default},function(t){d=t.default},function(t){y=t.default},function(t){v=t.default},function(t){g=t.default},function(t){C=t.default}],execute:function(){var _,b,P,m,D,U,O,x,k;r._RF.push({},"07045YhQjlBi7PjTiFfkNiw","CubismPoseController",void 0);var I=s.ccclass,w=s.property;t("default",(b=I("CubismPoseController"),P=w({type:l}),m=w({visible:!1}),D=w({visible:!1}),b((_=g.SYMBOL,x=o((O=function(t){function o(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"defaultPoseIndex",x,i(e)),e._model=null,n(e,"_hasUpdateController",k,i(e)),e._poseData=new Array(0),e.bindedOnLateUpdate=e.onLateUpdate.bind(i(e)),e[_]=g.SYMBOL,e}e(o,t);var r=o.prototype;return r.refresh=function(){if(this._model=u.findCubismModel(this),null!=this._model){var t=this._model.parts;if(null!=t){for(var e=c.getComponentsMany(t,f),a=0;a<e.length;a++){var o,n=e[a].groupIndex,i=e[a].partIndex;if(null==this._poseData)this._poseData=new Array(1),this._poseData[0]=new Array(0);else if(this._poseData.length<=n){var r=this._poseData.length;this._poseData.length=n+1,this._poseData.fill(new Array(0),r,n+1)}var s=this._poseData[n];if(s.length<=i){var l=s.length;s.length=i+1,s.fill(new C,l,i+1)}var p=s[i];if(p=p.copyWith({posePart:e[a],part:e[a].getComponent(h)}),s[i]=p,this.defaultPoseIndex=this.defaultPoseIndex<0?0:this.defaultPoseIndex,i!=this.defaultPoseIndex){var y=p.part;if(null==y){console.assert(y);continue}y.opacity=0}if(console.assert(p.part),p=p.copyWith({opacity:null==(o=p.part)?void 0:o.opacity}),s[i]=p,null!=e[a].link&&0!=e[a].link.length){for(var g=new Array(e[a].link.length),_=0;_<e[a].link.length;_++){var b=e[a].link[_],P=v.findByIdFromParts(t,b);g[_]=P}p=p.copyWith({linkParts:g}),s[i]=p}}this.hasUpdateController=null!=this.getComponent(d)}else console.assert(t)}},r.doFade=function(){for(var t=0;t<this._poseData.length;t++){for(var e=-1,a=1,o=this._poseData[t],n=0;n<o.length;n++){var i=o[n].part;if(i){if(i.opacity>o[n].opacity){e=n,a=i.opacity;break}}else console.assert(i)}if(e<0)return;for(var r=0;r<o.length;r++)if(r!=e){var s=o[r].part;if(s){var l=s.opacity;(1-l)*(1-a)>.15&&(l=1-.15/(1-a)),s.opacity>l&&(s.opacity=l)}else console.assert(s)}}},r.copyPartOpacities=function(){for(var t=0;t<this._poseData.length;t++)for(var e=this._poseData[t],a=0;a<e.length;a++){var o=e[a],n=o.linkParts,i=o.part;if(n.length)if(i)for(var r=i.opacity,s=0;s<n.length;s++){var l=n[s];l&&(l.opacity=r)}else console.assert(i)}},r.savePartOpacities=function(){for(var t=0;t<this._poseData.length;t++)for(var e=this._poseData[t],a=0;a<e.length;a++){var o=e[a],n=o.part;console.assert(n),o.copyWith({opacity:null==n?void 0:n.opacity})}},r.onLateUpdate=function(){this.enabled&&null!=this._model&&null!=this._poseData&&(this.doFade(),this.copyPartOpacities(),this.savePartOpacities())},r.onEnable=function(){this.refresh()},r.lateUpdate=function(){this.hasUpdateController||this.onLateUpdate()},a(o,[{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(t){this._hasUpdateController=t}},{key:"executionOrder",get:function(){return y.CUBISM_POSE_CONTROLLER}},{key:"needsUpdateOnEditing",get:function(){return!1}}]),o}(p)).prototype,"defaultPoseIndex",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=o(O.prototype,"_hasUpdateController",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o(O.prototype,"hasUpdateController",[D],Object.getOwnPropertyDescriptor(O.prototype,"hasUpdateController"),O.prototype),U=O))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPoseData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismPosePart.ts","./CubismPart.ts"],(function(t){var i,r,a,e,n,o,s;return{setters:[function(t){i=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){a=t.cclegacy,e=t._decorator,n=t.CCFloat},function(t){o=t.default},function(t){s=t.default}],execute:function(){var l,u,p,c,P,y,h,f,b,d,v;a._RF.push({},"7d2422W66xPM40ZlKRTEwgf","CubismPoseData",void 0);var k=e.ccclass,m=e.property;t("default",(l=k("CubismPoseData"),u=m({type:o}),p=m({type:s}),c=m({type:[s]}),P=m({type:n}),l((f=i((h=function(){function t(t){var i,a,e,n;void 0===t&&(t={}),r(this,"posePart",f,this),r(this,"part",b,this),r(this,"linkParts",d,this),r(this,"opacity",v,this),this.posePart=null!=(i=t.posePart)?i:null,this.part=null!=(a=t.part)?a:null,this.linkParts=null!=(e=t.linkParts)?e:new Array(0),this.opacity=null!=(n=t.opacity)?n:0}var i=t.prototype;return i.copyWith=function(i){var r,a;return void 0===i&&(i={}),new t({posePart:void 0!==i.posePart?i.posePart:this.posePart,part:void 0!==i.part?i.part:this.part,linkParts:null!=(r=i.linkParts)?r:this.linkParts,opacity:null!=(a=i.opacity)?a:this.opacity})},i.equals=function(t){return this===t||this.posePart==t.posePart&&this.part==t.part&&this.linkParts==t.linkParts&&this.opacity==t.opacity},i.strictEquals=function(t){return this===t},t}()).prototype,"posePart",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(h.prototype,"part",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=i(h.prototype,"linkParts",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),v=i(h.prototype,"opacity",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=h))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismPosePart.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,i,o,a,u,l,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.CCInteger,l=e.CCString,c=e.Component}],execute:function(){var p,s,b,f,y,d,g,h,m;o._RF.push({},"35deeGbvHpFQb1jOJcwsQxh","CubismPosePart",void 0);var C=a.ccclass,P=a.property;e("default",(p=C("CubismPosePart"),s=P({type:u}),b=P({type:u}),f=P({type:[l]}),p((g=r((d=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,n(r,"groupIndex",g,i(r)),n(r,"partIndex",h,i(r)),n(r,"link",m,i(r)),r}return t(r,e),r}(c)).prototype,"groupIndex",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=r(d.prototype,"partIndex",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=r(d.prototype,"link",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array(0)}}),y=d))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismRaycastable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismRaycastablePrecision.ts"],(function(e){var i,t,r,n,a,o,s,c,l;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Enum,c=e.Component},function(e){l=e.default}],execute:function(){var u,p,b,y,f;a._RF.push({},"36139PybiBJE6VaBjT3JvRB","CubismRaycastable",void 0);var d=o.ccclass,m=o.property;e("default",(u=d("CubismRaycastable"),p=m({type:s(l),serializable:!0,visible:!0,readonly:!1}),u((f=i((y=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,r(i,"precision",f,n(i)),i}return t(i,e),i}(c)).prototype,"precision",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l.boundingBox}}),b=y))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismRaycastablePrecision.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"650c9ea00JO4bOzmcEVKV4x","CubismRaycastablePrecision",void 0);var t=e("default",function(e){return e[e.boundingBox=0]="boundingBox",e[e.triangles=1]="triangles",e}(t||{}));n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismRaycaster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExtensionMethods2.ts","./CubismDrawable.ts","./CubismVector.ts","./CubismRenderer.ts","./CubismRaycastable.ts","./CubismRaycastablePrecision.ts","./CubismRaycastHit.ts"],(function(e){var t,s,n,r,a,i,o,l,c,u,f,y,d;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,n=e._decorator,r=e.geometry,a=e.math,i=e.Component},function(e){o=e.default},function(e){l=e.default},function(e){c=e.CubismVector3},function(e){u=e.default},function(e){f=e.default},function(e){y=e.default},function(e){d=e.default}],execute:function(){var h;s._RF.push({},"5d5fcnu8edOsYeXbsFK+3fP","CubismRaycaster",void 0);var m=n.ccclass;e("default",m("CubismRaycaster")(h=function(e){function s(){for(var t,s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).raycastables=null,t.raycastablePrecisions=null,t}t(s,e);var n=s.prototype;return n.refresh=function(){var e,t,s=null!=(e=null==(t=o.findCubismModel(this))?void 0:t.drawables)?e:null;if(null!=s){for(var n=new Array,r=new Array,a=0;a<s.length;a++)if(null!=s[a].getComponent(f)){var i=s[a].getComponent(u);console.assert(i),n.push(i);var l=s[a].getComponent(f);console.assert(l),console.assert(l.precision),r.push(l.precision)}this.raycastables=n,this.raycastablePrecisions=r}else console.error("CubismRaycaster.refresh(): candidates is null.")},n.start=function(){this.refresh()},n.raycast1=function(e,t,s,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),this.raycast2(r.Ray.create(e.x,e.y,e.z,t.x,t.y,t.z),s,n)},n.raycast2=function(e,t,s){void 0===s&&(s=Number.POSITIVE_INFINITY);var n=c.from(e.o),r=c.from(e.d),i=n.add(r.multiplySingle(r.z/n.z)),o=c.from(this.node.inverseTransformPoint(new a.Vec3,i.toBuiltinType()));o=o.copyWith({z:0});var u=i.magnitude();if(u>s)return 0;var f=0;console.assert(null!=this.raycastables);var h=this.raycastables;console.assert(null!=this.raycastablePrecisions);for(var m=this.raycastablePrecisions,b=0;b<h.length;b++){var v=h[b],p=m[b];if(console.assert(null!=v.meshRenderer),v.meshRenderer.enabled)if(v.mesh.calculateBounds().contains(o)&&(p!=y.triangles||this.containsInTriangles(v.mesh,o))&&(t[f]=new d({drawable:v.getComponent(l),distance:u,localPosition:o,worldPosition:i}),++f==t.length))break}return f},n.containsInTriangles=function(e,t){for(var s=e.getIndices(),n=e.getPositions(),r=0;r<s.length;r+=3){var a=n[s[r]],i=n[s[r+1]],o=n[s[r+2]],l=(i.x-a.x)*(t.y-i.y)-(i.y-a.y)*(t.x-i.x),c=(o.x-i.x)*(t.y-o.y)-(o.y-i.y)*(t.x-o.x),u=(a.x-o.x)*(t.y-a.y)-(a.y-o.y)*(t.x-a.x);if(l>0&&c>0&&u>0||l<0&&c<0&&u<0)return!0}return!1},s}(i))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/CubismRaycastHit.ts",["cc","./CubismVector.ts"],(function(i){var t,o;return{setters:[function(i){t=i.cclegacy},function(i){o=i.CubismVector3}],execute:function(){t._RF.push({},"3e457hn43ZJ5p627NM0/tUN","CubismRaycastHit",void 0);i("default",function(){function i(i){var t,s,n,l;void 0===i&&(i={}),this.drawable=void 0,this.distance=void 0,this.localPosition=void 0,this.worldPosition=void 0,this.drawable=null!=(t=i.drawable)?t:null,this.distance=null!=(s=i.distance)?s:0,this.localPosition=null!=(n=i.localPosition)?n:o.ZERO,this.worldPosition=null!=(l=i.worldPosition)?l:o.ZERO}var t=i.prototype;return t.copyWith=function(t){var o,s,n;return void 0===t&&(t={}),new i({drawable:void 0!==t.drawable?t.drawable:this.drawable,distance:null!=(o=t.distance)?o:this.distance,localPosition:null!=(s=t.localPosition)?s:this.localPosition,worldPosition:null!=(n=t.worldPosition)?n:this.worldPosition})},t.equals=function(i){return this===i||this.drawable===i.drawable&&this.distance==i.distance&&this.localPosition.equals(i.localPosition)&&this.worldPosition.equals(i.worldPosition)},t.strictEquals=function(i){return this===i},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismRenderController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismRenderer.ts","./CubismSortingMode.ts","./CubismUpdateExecutionOrder.ts","./CubismUpdateController.ts","./ObjectExtensionMethods.ts","./ICubismUpdatable.ts","./ComponentExtensionMethods2.ts","./ComponentExtensionMethods.ts","./ICubismDrawOrderHandler.ts","./ICubismOpacityHandler.ts","./ICubismBlendColorHandler.ts"],(function(e){var r,t,n,i,l,o,a,s,d,u,p,c,y,h,f,b,C,g,m,w,O,_,H,v,I,D,M;return{setters:[function(e){r=e.inheritsLoose,t=e.createClass,n=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.CCFloat,d=e.CCInteger,u=e.Enum,p=e.Camera,c=e.CCObject,y=e.Component,h=e.Asset,f=e.Node,b=e.math},function(e){C=e.default},function(e){g=e.default},function(e){m=e.default},function(e){w=e.default},function(e){O=e.default},function(e){_=e.default},function(e){H=e.default},function(e){v=e.default},function(e){I=e.default},function(e){D=e.default},function(e){M=e.default}],execute:function(){var z,S,k,F,U,R,L,P,E,T,N,j,B,A,x,V,W,Y,Z,q,G,J,K,Q,X,$,ee,re,te,ne,ie,le,oe,ae,se,de,ue,pe,ce,ye,he,fe,be,Ce,ge,me,we,Oe,_e,He,ve,Ie,De,Me,ze,Se,ke;o._RF.push({},"36506oa57NFwant5TLBspdm","CubismRenderController",void 0);var Fe=a.ccclass,Ue=a.property,Re=a.executeInEditMode;e("default",(S=Fe("CubismRenderController"),k=Ue({type:s,serializable:!0,visible:!0}),F=Ue({type:s,serializable:!0,visible:!0}),U=Ue({serializable:!0,visible:!1}),R=Ue({serializable:!0,visible:!1}),L=Ue({serializable:!0,visible:!1}),P=Ue({serializable:!0,visible:!1}),E=Ue({type:d,serializable:!0,visible:!0}),T=Ue({type:u(g),serializable:!0,visible:!1}),N=Ue({type:u(g),visible:!0}),j=Ue({type:d,serializable:!0,visible:!0}),B=Ue({type:d,visible:!1,readonly:!1}),A=Ue({type:p,serializable:!0,visible:!0}),x=Ue({type:c,serializable:!0,visible:!1}),V=Ue({type:c,visible:!1}),W=Ue({serializable:!1,visible:!1}),Y=Ue({type:c,serializable:!0,visible:!1}),Z=Ue({type:c,visible:!1}),q=Ue({serializable:!1,visible:!1}),G=Ue({type:c,visible:!1}),J=Ue({serializable:!1,visible:!1}),K=Ue({type:c,visible:!1}),Q=Ue({serializable:!1,visible:!1}),X=Ue({type:s,serializable:!0,visible:!0}),$=Ue({type:s,visible:!1}),ee=Ue({serializable:!1,visible:!1}),re=Ue({serializable:!1,visible:!0}),te=Ue({type:y}),ne=Ue({type:h}),ie=Ue({type:f}),le=Ue({type:y}),oe=Ue({type:h}),ae=Ue({type:f}),S(se=Re((z=_.SYMBOL,ue=n((de=function(e){function n(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r=e.call.apply(e,[this].concat(n))||this,i(r,"opacity",ue,l(r)),i(r,"_lastOpacity",pe,l(r)),i(r,"_isOverwrittenModelMultiplyColors",ce,l(r)),i(r,"_isOverwrittenModelScreenColors",ye,l(r)),i(r,"_modelMultiplyColor",he,l(r)),i(r,"_modelScreenColor",fe,l(r)),i(r,"_sortingLayerId",be,l(r)),i(r,"_sortingMode",Ce,l(r)),i(r,"_sortingOrder",ge,l(r)),i(r,"cameraToFace",me,l(r)),i(r,"_drawOrderHandler",we,l(r)),i(r,"_drawOrderHandlerInterface",Oe,l(r)),i(r,"_opacityHandler",_e,l(r)),i(r,"_opacityHandlerInterface",He,l(r)),i(r,"_multiplyColorHandler",ve,l(r)),i(r,"_multiplyColorHandlerInterface",Ie,l(r)),i(r,"_screenColorHandler",De,l(r)),i(r,"_screenColorHandlerInterface",Me,l(r)),i(r,"_depthOffset",ze,l(r)),r._drawablesRootTransform=null,i(r,"_renderers",Se,l(r)),i(r,"_hasUpdateController",ke,l(r)),r.bindedOnLateUpdate=r.onLateUpdate.bind(l(r)),r[z]=_.SYMBOL,r.bindedOnDynamicDrawableDataFunc=r.onDynamicDrawableData.bind(l(r)),r}r(n,e);var o=n.prototype;return o.tryInitializeRenderers=function(){var e=this.renderers;if(null==e||0==e.length){var r,t,n=null!=(r=null==(t=H.findCubismModel(this))?void 0:t.drawables)?r:null;if(null==n)return;e=v.addComponentEach(n,C),this.renderers=e}for(var i=0;i<e.length;i++)e[i].tryInitialize(this)},o.updateOpacity=function(){if(!(Math.abs(this.opacity-this.lastOpacity)<b.EPSILON)){if(this.opacity=b.clamp01(this.opacity),this.lastOpacity=this.opacity,null==this.opacityHandlerInterface||this.opacity>1-b.EPSILON){console.assert(null!=this.renderers,"renderers is null.");for(var e=this.renderers,r=0;r<e.length;r++)e[r].onModelOpacityDidChange(this.opacity)}null!=this.opacityHandlerInterface&&this.opacityHandlerInterface.onOpacityDidChange(this,this.opacity)}},o.updateBlendColors=function(){if(null!=this.renderers){for(var e,r,t=!1,n=!1,i=new Array(this.renderers.length),l=new Array(this.renderers.length),o=0;o<this.renderers.length;o++){var a=this.renderers[o].overwriteFlagForDrawableMultiplyColors||this.overwriteFlagForModelMultiplyColors;a?(this.renderers[o].lastIsUseUserMultiplyColor?this.renderers[o].lastMultiplyColor!=this.renderers[o].multiplyColor&&(this.renderers[o].applyMultiplyColor(),t=!0):(this.renderers[o].multiplyColor=this.renderers[o].lastMultiplyColor,this.renderers[o].applyMultiplyColor(),t=!0),this.renderers[o].lastMultiplyColor=this.renderers[o].multiplyColor):this.renderers[o].lastIsUseUserMultiplyColor&&(this.renderers[o].multiplyColor=this.renderers[o].lastMultiplyColor,this.renderers[o].applyMultiplyColor(),t=!0),i[o]=this.renderers[o].multiplyColor,this.renderers[o].lastIsUseUserMultiplyColor=a;var s=this.renderers[o].overwriteFlagForDrawableScreenColor||this.overwriteFlagForModelScreenColors;s?(this.renderers[o].lastIsUseUserScreenColor?this.renderers[o].lastScreenColor!=this.renderers[o].screenColor&&(this.renderers[o].applyScreenColor(),n=!0):(this.renderers[o].screenColor=this.renderers[o].lastScreenColor,this.renderers[o].applyScreenColor(),n=!0),this.renderers[o].lastScreenColor=this.renderers[o].screenColor):this.renderers[o].lastIsUseUserScreenColor&&(this.renderers[o].screenColor=this.renderers[o].lastScreenColor,this.renderers[o].applyScreenColor(),n=!0),l[o]=this.renderers[o].screenColor,this.renderers[o].lastIsUseUserScreenColor=s}if(null!=this.multiplyColorHandler&&t)null==(e=this.multiplyColorHandlerInterface)||e.onBlendColorDidChange(this,i);if(null!=this.screenColorHandler&&n)null==(r=this.screenColorHandlerInterface)||r.onBlendColorDidChange(this,l)}},o.onLateUpdate=function(){if(this.enabled&&(this.updateOpacity(),this.updateBlendColors(),null!=this.cameraToFace)){var e=this.cameraToFace.node.getWorldRotation();null!=this.drawablesRootTransform&&this.drawablesRootTransform.setWorldRotation(e)}},o.start=function(){this.hasUpdateController=null!=this.getComponent(w)},o.onEnable=function(){null!=this.model&&(this.tryInitializeRenderers(),this.model.onDynamicDrawableData.add(this.bindedOnDynamicDrawableDataFunc))},o.onDisable=function(){null!=this.model&&this.model.onDynamicDrawableData.remove(this.bindedOnDynamicDrawableDataFunc)},o.lateUpdate=function(e){this.hasUpdateController||this.onLateUpdate()},o.onDynamicDrawableData=function(e,r){var t=e.drawables,n=this.renderers;if(null!=t)if(null!=n){for(var i=0;i<r.length;i++){var l=!1;n[i].updateVisibility(),n[i].updateRenderOrder(),r[i].isAnyDirty&&(r[i].isVisibilityDirty&&(n[i].onDrawableVisiblityDidChange(r[i].isVisible),l=!0),r[i].isRenderOrderDirty&&(n[i].onDrawableRenderOrderDidChange(r[i].renderOrder),l=!0),r[i].isOpacityDirty&&(n[i].onDrawableOpacityDidChange(r[i].opacity),l=!0),r[i].areVertexPositionsDirty&&(n[i].onDrawableVertexPositionsDidChange(r[i].vertexPositions),l=!0),l&&n[i].swapMeshes())}var o=this.drawOrderHandlerInterface;if(null!=o)for(var a=0;a<r.length;a++)r[a].isDrawOrderDirty&&o.onDrawOrderDidChange(this,t[a],r[a].drawOrder);for(var s=!1,d=!1,u=new Array(n.length),p=new Array(n.length),c=0;c<r.length;c++){var y=!(n[c].overwriteFlagForDrawableMultiplyColors||this.overwriteFlagForModelMultiplyColors);r[c].isBlendColorDirty&&y&&(n[c].applyMultiplyColor(),s=!0),u[c]=n[c].multiplyColor}for(var h=0;h<r.length;h++){var f=!(n[h].overwriteFlagForDrawableScreenColor||this.overwriteFlagForModelScreenColors);r[h].isBlendColorDirty&&f&&(n[h].applyScreenColor(),d=!0),p[h]=n[h].screenColor}var b=this.multiplyColorHandlerInterface,C=this.screenColorHandlerInterface;null!=this.multiplyColorHandler&&s&&(null==b||b.onBlendColorDidChange(this,u)),null!=this.screenColorHandler&&d&&(null==C||C.onBlendColorDidChange(this,p))}else console.error("renderers is null.");else console.error("sender.drawables is null.")},t(n,[{key:"lastOpacity",get:function(){return this._lastOpacity},set:function(e){this._lastOpacity=e}},{key:"overwriteFlagForModelMultiplyColors",get:function(){return this._isOverwrittenModelMultiplyColors},set:function(e){this._isOverwrittenModelMultiplyColors=e}},{key:"overwriteFlagForModelScreenColors",get:function(){return this._isOverwrittenModelScreenColors},set:function(e){this._isOverwrittenModelScreenColors=e}},{key:"modelMultiplyColor",get:function(){return this._modelMultiplyColor},set:function(e){this._modelMultiplyColor=e}},{key:"modelScreenColor",get:function(){return this._modelScreenColor},set:function(e){this._modelScreenColor=e}},{key:"sortingLayer",get:function(){throw new Error("Method not implemented.")},set:function(e){throw new Error("Method not implemented.")}},{key:"sortingLayerId",get:function(){return this._sortingLayerId},set:function(e){if(e!=this._sortingLayerId){this._sortingLayerId=e;var r=this.renderers;if(null!=r)for(var t=0;t<r.length;t++)r[t].onControllerSortingLayerDidChange(this._sortingLayerId);else console.error("CubismRenderController.renderers is null.")}}},{key:"sortingMode",get:function(){return this._sortingMode},set:function(e){if(e!=this._sortingMode){this._sortingMode=e;var r=this.renderers;if(null!=r)for(var t=0;t<r.length;t++)r[t].onControllerSortingModeDidChange(this._sortingMode);else console.warn("CubismRenderController.renderers is null.")}}},{key:"sortingOrder",get:function(){return this._sortingOrder},set:function(e){if(e!=this._sortingOrder){this._sortingOrder=e;var r=this.renderers;if(null!=r)for(var t=0;t<r.length;t++)r[t].onControllerSortingOrderDidChange(this._sortingOrder);else console.error("CubismRenderController.renderers is null.")}}},{key:"drawOrderHandler",get:function(){return this._drawOrderHandler},set:function(e){this._drawOrderHandler=O.toNullUnlessImplementsInterface(e,I.isImplements)}},{key:"drawOrderHandlerInterface",get:function(){if(null==this._drawOrderHandlerInterface){if(null==this.drawOrderHandler)return null;this._drawOrderHandlerInterface=O.getInterface(this.drawOrderHandler,I.isImplements)}return this._drawOrderHandlerInterface}},{key:"opacityHandler",get:function(){return this._opacityHandler},set:function(e){this._opacityHandler=O.toNullUnlessImplementsInterface(e,D.isImplements)}},{key:"opacityHandlerInterface",get:function(){if(null==this._opacityHandlerInterface){if(null==this.opacityHandler)return null;this._opacityHandlerInterface=O.getInterface(this.opacityHandler,D.isImplements)}return this._opacityHandlerInterface}},{key:"multiplyColorHandler",get:function(){return this._multiplyColorHandler},set:function(e){this._multiplyColorHandler=e}},{key:"multiplyColorHandlerInterface",get:function(){if(null==this._multiplyColorHandlerInterface){if(null==this.multiplyColorHandler)return null;this._multiplyColorHandlerInterface=O.getInterface(this.multiplyColorHandler,M.isImplements)}return this._multiplyColorHandlerInterface}},{key:"screenColorHandler",get:function(){return this._screenColorHandler},set:function(e){this._screenColorHandler=e}},{key:"screenColorHandlerInterface",get:function(){if(null==this._screenColorHandlerInterface){if(null==this.screenColorHandler)return null;this._screenColorHandlerInterface=O.getInterface(this.screenColorHandler,M.isImplements)}return this._screenColorHandlerInterface}},{key:"depthOffset",get:function(){return this._depthOffset},set:function(e){if(!(Math.abs(e-this._depthOffset)<b.EPSILON)){this._depthOffset=e;var r=this.renderers;if(null!=r)for(var t=0;t<r.length;t++)r[t].onControllerDepthOffsetDidChange(this._depthOffset);else console.error("CubismRenderController.renderers is null.")}}},{key:"model",get:function(){return H.findCubismModel(this)}},{key:"drawablesRootTransform",get:function(){if(null==this._drawablesRootTransform){var e,r=null==(e=this.model)?void 0:e.drawables;null!=r&&r.length>0&&(this._drawablesRootTransform=r[0].node.parent)}return this._drawablesRootTransform}},{key:"renderers",get:function(){if(null==this._renderers){console.assert(this.model),console.assert(this.model.drawables);var e=this.model.drawables;this._renderers=v.getComponentsMany(e,C)}return this._renderers},set:function(e){this._renderers=e}},{key:"hasUpdateController",get:function(){return this._hasUpdateController},set:function(e){this._hasUpdateController=e}},{key:"executionOrder",get:function(){return m.CUBISM_RENDER_CONTROLLER}},{key:"needsUpdateOnEditing",get:function(){return!0}},{key:"opacityHandlerComponent",get:function(){return this._opacityHandler instanceof y?this._opacityHandler:null},set:function(e){this.opacityHandler=e}},{key:"opacityHandlerAsset",get:function(){return this._opacityHandler instanceof h?this._opacityHandler:null},set:function(e){this.opacityHandler=e}},{key:"opacityHandlerNode",get:function(){return this._opacityHandler instanceof f?this._opacityHandler:null},set:function(e){this.opacityHandler=e}},{key:"drawOrderHandlerComponent",get:function(){return this._drawOrderHandler instanceof y?this._drawOrderHandler:null},set:function(e){this.drawOrderHandler=e}},{key:"drawOrderHandlerAsset",get:function(){return this._drawOrderHandler instanceof h?this._drawOrderHandler:null},set:function(e){this.drawOrderHandler=e}},{key:"drawOrderHandlerNode",get:function(){return this._drawOrderHandler instanceof f?this._drawOrderHandler:null},set:function(e){this.drawOrderHandler=e}}]),n}(y)).prototype,"opacity",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),pe=n(de.prototype,"_lastOpacity",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ce=n(de.prototype,"_isOverwrittenModelMultiplyColors",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ye=n(de.prototype,"_isOverwrittenModelScreenColors",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=n(de.prototype,"_modelMultiplyColor",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.Color.WHITE.clone()}}),fe=n(de.prototype,"_modelScreenColor",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b.Color(0,0,0,0)}}),be=n(de.prototype,"_sortingLayerId",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ce=n(de.prototype,"_sortingMode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.backToFrontZ}}),n(de.prototype,"sortingMode",[N],Object.getOwnPropertyDescriptor(de.prototype,"sortingMode"),de.prototype),ge=n(de.prototype,"_sortingOrder",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n(de.prototype,"sortingOrder",[B],Object.getOwnPropertyDescriptor(de.prototype,"sortingOrder"),de.prototype),me=n(de.prototype,"cameraToFace",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=n(de.prototype,"_drawOrderHandler",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n(de.prototype,"drawOrderHandler",[V],Object.getOwnPropertyDescriptor(de.prototype,"drawOrderHandler"),de.prototype),Oe=n(de.prototype,"_drawOrderHandlerInterface",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=n(de.prototype,"_opacityHandler",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n(de.prototype,"opacityHandler",[Z],Object.getOwnPropertyDescriptor(de.prototype,"opacityHandler"),de.prototype),He=n(de.prototype,"_opacityHandlerInterface",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=n(de.prototype,"_multiplyColorHandler",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=n(de.prototype,"_multiplyColorHandlerInterface",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=n(de.prototype,"_screenColorHandler",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=n(de.prototype,"_screenColorHandlerInterface",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=n(de.prototype,"_depthOffset",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e-5}}),n(de.prototype,"depthOffset",[$],Object.getOwnPropertyDescriptor(de.prototype,"depthOffset"),de.prototype),Se=n(de.prototype,"_renderers",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=n(de.prototype,"_hasUpdateController",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n(de.prototype,"opacityHandlerComponent",[te],Object.getOwnPropertyDescriptor(de.prototype,"opacityHandlerComponent"),de.prototype),n(de.prototype,"opacityHandlerAsset",[ne],Object.getOwnPropertyDescriptor(de.prototype,"opacityHandlerAsset"),de.prototype),n(de.prototype,"opacityHandlerNode",[ie],Object.getOwnPropertyDescriptor(de.prototype,"opacityHandlerNode"),de.prototype),n(de.prototype,"drawOrderHandlerComponent",[le],Object.getOwnPropertyDescriptor(de.prototype,"drawOrderHandlerComponent"),de.prototype),n(de.prototype,"drawOrderHandlerAsset",[oe],Object.getOwnPropertyDescriptor(de.prototype,"drawOrderHandlerAsset"),de.prototype),n(de.prototype,"drawOrderHandlerNode",[ae],Object.getOwnPropertyDescriptor(de.prototype,"drawOrderHandlerNode"),de.prototype),se=de))||se)||se));o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismRenderer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismDrawable.ts","./CubismShaderVariables.ts","./CubismSortingMode.ts","./CubismMeshPrimitive.ts","./Utils.ts"],(function(e){var r,t,i,n,o,s,l,a,h,u,c,d,p,y,f,C,b,m,g,w,v,_;return{setters:[function(e){r=e.inheritsLoose,t=e.createClass,i=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,l=e._decorator,a=e.MeshRenderer,h=e.CCInteger,u=e.Texture2D,c=e.Mesh,d=e.Enum,p=e.CCFloat,y=e.director,f=e.math,C=e.Component},function(e){b=e.default},function(e){m=e.default},function(e){g=e.default},function(e){w=e.default},function(e){v=e.isImporter,_=e.EditorUtils}],execute:function(){var S,O,M,R,x,I,D,V,z,k,P,T,F,B,U,E,W,L,j,N,q,A,H,Z,J,K,G,Q,X,Y,$,ee,re,te,ie,ne,oe,se,le,ae;e("CubismRendererInEditorSymbols",void 0),s._RF.push({},"91ecbDt1nJOObi3jTrlvwi0","CubismRenderer",void 0);var he,ue,ce=l.ccclass,de=l.property,pe=l.requireComponent,ye=l.executeInEditMode;(ue=he||(he=e("CubismRendererInEditorSymbols",{}))).onControllerSortingOrderDidChange=Symbol.for("onControllerSortingOrderDidChange"),ue.onControllerSortingModeDidChange=Symbol.for("onControllerSortingModeDidChange"),ue.onControllerDepthOffsetDidChange=Symbol.for("onControllerDepthOffsetDidChange");e("default",(R=ce("CubismRenderer"),x=pe(a),I=de({type:h,serializable:!0,visible:!1}),D=de({type:h,visible:!0}),V=de({serializable:!0,visible:!1}),z=de({visible:!0}),k=de({serializable:!0,visible:!1}),P=de({serializable:!0,visible:!1}),T=de({serializable:!0,visible:!1}),F=de({serializable:!0,visible:!1}),B=de({type:u,serializable:!0,visible:!1}),U=de({type:u,visible:!0}),E=de({type:c,visible:!0,readonly:!0}),W=de({type:d(g),serializable:!0,visible:!1}),L=de({type:d(g),visible:!1}),j=de({type:h,serializable:!0,visible:!1}),N=de({type:h,serializable:!0,visible:!1}),q=de({type:p,serializable:!0,visible:!1}),A=de({type:p,serializable:!0,visible:!1}),H=de({serializable:!0,visible:!1}),Z=de({type:p,serializable:!0}),R(J=x(J=ye((S=he.onControllerSortingModeDidChange,O=he.onControllerSortingOrderDidChange,M=he.onControllerDepthOffsetDidChange,G=i((K=function(e){function i(){for(var r,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i))||this,n(r,"_localSortingOrder",G,o(r)),n(r,"_color",Q,o(r)),n(r,"_isOverwrittenDrawableMultiplyColors",X,o(r)),r._lastIsUseUserMultiplyColor=!1,n(r,"_isOverwrittenDrawableScreenColor",Y,o(r)),r._lastIsUseUserScreenColor=!1,n(r,"_multiplyColor",$,o(r)),r._lastMultiplyColor=f.Color.WHITE,n(r,"_screenColor",ee,o(r)),r._lastScreenColor=new f.Color(0,0,0,0),n(r,"_mainTexture",re,o(r)),r._meshes=[w.makeEmpty(),w.makeEmpty()],r._frontMesh=0,r._backMesh=0,r._meshRenderer=null,r._drawable=null,r._renderController=null,n(r,"_sortingMode",te,o(r)),n(r,"_sortingOrder",ie,o(r)),n(r,"_renderOrder",ne,o(r)),n(r,"_depthOffset",oe,o(r)),n(r,"_opacity",se,o(r)),n(r,"_vertexColors",le,o(r)),r._lastSwap=fe.DEFAULT,r._thisSwap=fe.DEFAULT,n(r,"_priorityInEditor",ae,o(r)),r}r(i,e);var s=i.prototype;return s.swapMeshes=function(){this.backMesh=this.frontMesh,this.frontMesh=0==this.frontMesh?1:0;var e=this.meshes[this.frontMesh];if(null!=this.vertexColors&&e.setColors(this.vertexColors),this.lastSwap=this.thisSwap,this.resetSwapInfoFlags(),!v()){var r=y.getScene();if(null!=r)null!=r.renderScene?null!=this.meshRenderer?this.meshRenderer.mesh=e.createMesh():console.error("CubismRenderer.swapMeshes(): meshRenderer is null."):console.error("CubismRenderer.swapMeshes(): renderScene is null.");else console.error("CubismRenderer.swapMeshes(): director.getScene() failed.")}},s.updateVisibility=function(){this.meshRenderer&&(this.lastSwap.didBecomeVisible?this.meshRenderer.enabled=!0:this.lastSwap.didBecomeInvisible&&(this.meshRenderer.enabled=!1)),this.resetVisibilityFlags()},s.updateRenderOrder=function(){this.lastSwap.newRenderOrder&&this.applySorting(),this.resetRenderOrderFlag()},s.onControllerSortingLayerDidChange=function(e){},s.onControllerSortingModeDidChange=function(e){this.sortingMode=e,this.applySorting()},s[S]=function(e){var r=this;_.applyComponentProperty(this.node.uuid,this.uuid,"sortingMode",e,"Enum").then((function(){return r.applySorting()}))},s.onControllerSortingOrderDidChange=function(e){this.sortingOrder=e,this.applySorting()},s[O]=function(e){var r=this;_.applyComponentProperty(this.node.uuid,this.uuid,"sortingOrder",e,"Float").then((function(){return r.applySorting()}))},s.onControllerDepthOffsetDidChange=function(e){this.depthOffset=e,this.applySorting()},s[M]=function(e){var r=this;_.applyComponentProperty(this.node.uuid,this.uuid,"depthOffset",e,"Float").then((function(){return r.applySorting()}))},s.onDrawableOpacityDidChange=function(e){this.opacity=e,this.applyVertexColors()},s.onDrawableRenderOrderDidChange=function(e){this.renderOrder=e,this.setNewRenderOrder()},s.onDrawableVertexPositionsDidChange=function(e){this.mesh.setPositions(e),this.setNewVertexPositions()},s.onDrawableVisiblityDidChange=function(e){e?this.becomeVisible():this.becomeInvisible()},s.onMaskPropertiesDidChange=function(e){var r,t,i=null!=(r=null==(t=e.texture)?void 0:t.getTextureReference())?r:null,n=e.tile.toVec4(),o=e.transform.toVec4(),s=this.meshRenderer;if(null!=s){var l=s.getMaterialInstance(0);null!=l?(l.setProperty(m.maskTexture,i),l.setProperty(m.maskTile,n),l.setProperty(m.maskTransform,o)):console.error("CubismRenderer.onMaskPropertiesDidChange(): material is null.")}else console.error("CubismRenderer.onMaskPropertiesDidChange(): meshRenderer is null.")},s.onModelOpacityDidChange=function(e){var r;null==(r=this.meshRenderer)||null==(r=r.material)||r.setProperty(m.modelOpacity,e)},s.applyMainTexture=function(){if(!v()){var e=this.meshRenderer;if(null!=e){var r=e.getMaterialInstance(0);null!=r?r.setProperty(m.mainTexture,this.mainTexture):console.error("CubismRenderer.applyMainTexture(): material is null.")}else console.error("CubismRenderer.applyMainTexture(): meshRenderer is null.")}},s.applySorting=function(){if(null!=this.meshRenderer){if(g.sortByOrder(this.sortingMode))return this.meshRenderer.priority=this.sortingOrder+(this.sortingMode==g.backToFrontOrder?this.renderOrder+this.localSortingOrder:-(this.renderOrder+this.localSortingOrder)),this.node.position=f.Vec3.ZERO,void(this._priorityInEditor=this.meshRenderer.priority);var e=this.sortingMode==g.backToFrontZ?this.depthOffset:-this.depthOffset;this.meshRenderer.priority=this.sortingOrder+this.localSortingOrder,this._priorityInEditor=this.meshRenderer.priority,this.node.position=new f.Vec3(0,0,this.renderOrder*e)}else console.error("CubismRenderer.applySorting(): this.meshRenderer is null.")},s.applyVertexColors=function(){var e=this.vertexColors;if(null!=e){var r=this.color;r=new f.Color(r.r,r.g,r.b,r.a*this.opacity);for(var t=0;t<e.length;t++)e[t]=r;this.setNewVertexColors()}else console.error("applyVertexColors -> this.vertexColors is null.")},s.applyMultiplyColor=function(){if(!v()){var e=this.meshRenderer;if(e){var r=e.getMaterialInstance(0);null==r||r.setProperty(m.multiplyColor,this.multiplyColor)}}},s.tryInitializeMultiplyColor=function(){this.lastIsUseUserMultiplyColor=!1,this.lastMultiplyColor=this.multiplyColor,this.applyMultiplyColor()},s.applyScreenColor=function(){if(!v()){var e=this.meshRenderer;if(e){var r=e.getMaterialInstance(0);null==r||r.setProperty(m.screenColor,this.screenColor)}}},s.tryInitializeScreenColor=function(){this.lastIsUseUserScreenColor=!1,this.lastScreenColor=this.screenColor,this.applyScreenColor()},s.tryInitializeMeshRenderer=function(){var e;null==this._meshRenderer&&(this._meshRenderer=null!=(e=this.getComponent(a))?e:this.addComponent(a),null!=this._meshRenderer&&(this._meshRenderer.receiveShadow=0,this._meshRenderer.shadowCastingMode=0))},s.tryInitializeMesh=function(){if(!(this.mesh.vertexCount>0)){var e=this.getComponent(b);if(null!=e)for(var r=0;r<2;r++){var t=e.generateMeshPrimitive();null!=t?this.meshes[r]=t:console.error("CubismRenderer.tryInitializeMesh(): generateMeshPrimitive() failed.")}else console.error("CubismRenderer.tryInitializeMesh(): getComponent(CubismDrawable) failed.")}},s.tryInitializeVertexColor=function(){var e=this.mesh;this.vertexColors=new Array(e.vertexCount);for(var r=0;r<this.vertexColors.length;r++){var t=this._color;this.vertexColors[r]=new f.Color(t.r,t.g,t.b,t.a*this.opacity)}},s.tryInitializeMainTexture=function(){null==this.mainTexture&&(this.mainTexture=null),this.applyMainTexture()},s.tryInitialize=function(e){this.drawable=this.getComponent(b),this.renderController=e,this.tryInitializeMeshRenderer(),this.tryInitializeMesh(),this.tryInitializeVertexColor(),this.tryInitializeMainTexture(),this.tryInitializeMultiplyColor(),this.tryInitializeScreenColor(),this.applySorting()},s.setNewVertexPositions=function(){this.thisSwap=this.thisSwap.copyWith({newVertexPositions:!0})},s.setNewVertexColors=function(){this.thisSwap=this.thisSwap.copyWith({newVertexColors:!0})},s.becomeVisible=function(){this.thisSwap=this.thisSwap.copyWith({didBecomeVisible:!0})},s.becomeInvisible=function(){this.thisSwap=this.thisSwap.copyWith({didBecomeInvisible:!0})},s.setNewRenderOrder=function(){this.thisSwap=this.thisSwap.copyWith({newRenderOrder:!0})},s.resetSwapInfoFlags=function(){this.thisSwap=this.thisSwap.copyWith({newRenderOrder:!1,newVertexPositions:!1,didBecomeVisible:!1,didBecomeInvisible:!1})},s.resetVisibilityFlags=function(){this.thisSwap=this.thisSwap.copyWith({didBecomeVisible:!1,didBecomeInvisible:!1})},s.resetRenderOrderFlag=function(){this.thisSwap=this.thisSwap.copyWith({newRenderOrder:!1})},s.onDestroy=function(){},t(i,[{key:"localSortingOrder",get:function(){return this._localSortingOrder},set:function(e){e!=this._localSortingOrder&&(this._localSortingOrder=e,this.applySorting())}},{key:"color",get:function(){return this._color},set:function(e){this._color.equals(e)||(this._color=e,this.applyVertexColors())}},{key:"overwriteFlagForDrawableMultiplyColors",get:function(){return this._isOverwrittenDrawableMultiplyColors},set:function(e){this._isOverwrittenDrawableMultiplyColors=e}},{key:"lastIsUseUserMultiplyColor",get:function(){return this._lastIsUseUserMultiplyColor},set:function(e){this._lastIsUseUserMultiplyColor=e}},{key:"overwriteFlagForDrawableScreenColor",get:function(){return this._isOverwrittenDrawableScreenColor},set:function(e){this._isOverwrittenDrawableScreenColor=e}},{key:"lastIsUseUserScreenColor",get:function(){return this._lastIsUseUserScreenColor},set:function(e){this._lastIsUseUserScreenColor=e}},{key:"multiplyColor",get:function(){var e,r,t;return this.overwriteFlagForDrawableMultiplyColors||null!=(e=this.renderController)&&e.overwriteFlagForModelMultiplyColors?this._multiplyColor:null!=(r=null==(t=this.drawable)?void 0:t.multiplyColor)?r:f.Color.WHITE},set:function(e){this._multiplyColor.equals(e)||(this._multiplyColor=null!=e?e:f.Color.WHITE.clone())}},{key:"lastMultiplyColor",get:function(){return this._lastMultiplyColor},set:function(e){this._lastMultiplyColor=e}},{key:"screenColor",get:function(){var e,r,t;return this.overwriteFlagForDrawableScreenColor||null!=(e=this.renderController)&&e.overwriteFlagForModelScreenColors?this._screenColor:null!=(r=null==(t=this.drawable)?void 0:t.screenColor)?r:new f.Color(0,0,0,0)},set:function(e){this._screenColor.equals(e)||(this._screenColor=null!=e?e:f.Color.BLACK)}},{key:"lastScreenColor",get:function(){return this._lastScreenColor},set:function(e){this._lastScreenColor=e}},{key:"material",get:function(){var e,r;return null!=(e=null==(r=this.meshRenderer)?void 0:r.material)?e:null},set:function(e){null!=this.meshRenderer&&(this.meshRenderer.material=e)}},{key:"mainTexture",get:function(){return this._mainTexture},set:function(e){this._mainTexture!=e&&(this._mainTexture=e,this.applyMainTexture())}},{key:"meshes",get:function(){return this._meshes},set:function(e){this._meshes=e}},{key:"frontMesh",get:function(){return this._frontMesh},set:function(e){this._frontMesh=e}},{key:"backMesh",get:function(){return this._backMesh},set:function(e){this._backMesh=e}},{key:"mesh",get:function(){return this.meshes[this.frontMesh]}},{key:"meshRenderer",get:function(){return this._meshRenderer}},{key:"drawable",get:function(){return this._drawable},set:function(e){this._drawable=e}},{key:"renderController",get:function(){return this._renderController},set:function(e){this._renderController=e}},{key:"sortingMode",get:function(){return this._sortingMode},set:function(e){this._sortingMode=e}},{key:"sortingOrder",get:function(){return this._sortingOrder},set:function(e){this._sortingOrder=e}},{key:"renderOrder",get:function(){return this._renderOrder},set:function(e){this._renderOrder=e}},{key:"depthOffset",get:function(){return this._depthOffset},set:function(e){this._depthOffset=e}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e}},{key:"vertexColors",get:function(){return this._vertexColors},set:function(e){this._vertexColors=e}},{key:"lastSwap",get:function(){return this._lastSwap},set:function(e){this._lastSwap=e}},{key:"thisSwap",get:function(){return this._thisSwap},set:function(e){this._thisSwap=e}}]),i}(C)).prototype,"_localSortingOrder",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i(K.prototype,"localSortingOrder",[D],Object.getOwnPropertyDescriptor(K.prototype,"localSortingOrder"),K.prototype),Q=i(K.prototype,"_color",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Color.WHITE.clone()}}),i(K.prototype,"color",[z],Object.getOwnPropertyDescriptor(K.prototype,"color"),K.prototype),X=i(K.prototype,"_isOverwrittenDrawableMultiplyColors",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=i(K.prototype,"_isOverwrittenDrawableScreenColor",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$=i(K.prototype,"_multiplyColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Color.WHITE.clone()}}),ee=i(K.prototype,"_screenColor",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f.Color(0,0,0,0)}}),re=i(K.prototype,"_mainTexture",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i(K.prototype,"mainTexture",[U],Object.getOwnPropertyDescriptor(K.prototype,"mainTexture"),K.prototype),i(K.prototype,"mesh",[E],Object.getOwnPropertyDescriptor(K.prototype,"mesh"),K.prototype),te=i(K.prototype,"_sortingMode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.backToFrontZ}}),i(K.prototype,"sortingMode",[L],Object.getOwnPropertyDescriptor(K.prototype,"sortingMode"),K.prototype),ie=i(K.prototype,"_sortingOrder",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ne=i(K.prototype,"_renderOrder",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=i(K.prototype,"_depthOffset",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.EPSILON}}),se=i(K.prototype,"_opacity",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),le=i(K.prototype,"_vertexColors",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=i(K.prototype,"_priorityInEditor",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=K))||J)||J)||J));var fe=function(){function e(e){var r,t,i,n,o;void 0===e&&(e={}),this.newVertexPositions=void 0,this.newVertexColors=void 0,this.didBecomeVisible=void 0,this.didBecomeInvisible=void 0,this.newRenderOrder=void 0,this.newVertexPositions=null!=(r=e.newVertexPositions)&&r,this.newVertexColors=null!=(t=e.newVertexColors)&&t,this.didBecomeVisible=null!=(i=e.didBecomeVisible)&&i,this.didBecomeInvisible=null!=(n=e.didBecomeInvisible)&&n,this.newRenderOrder=null!=(o=e.newRenderOrder)&&o}var r=e.prototype;return r.copyWith=function(r){var t,i,n,o,s;return void 0===r&&(r={}),new e({newVertexPositions:null!=(t=r.newVertexPositions)?t:this.newVertexPositions,newVertexColors:null!=(i=r.newVertexColors)?i:this.newVertexColors,didBecomeVisible:null!=(n=r.didBecomeVisible)?n:this.didBecomeVisible,didBecomeInvisible:null!=(o=r.didBecomeInvisible)?o:this.didBecomeInvisible,newRenderOrder:null!=(s=r.newRenderOrder)?s:this.newRenderOrder})},r.equals=function(e){return this===e||this.newVertexPositions==e.newVertexPositions&&this.newVertexColors==e.newVertexColors&&this.didBecomeVisible==e.didBecomeVisible&&this.didBecomeInvisible==e.didBecomeInvisible&&this.newRenderOrder==e.newRenderOrder},r.strictEquals=function(e){return this===e},e}();(fe||(fe={})).DEFAULT=new fe,s._RF.pop()}}}));

System.register("chunks:///_virtual/CubismResources.ts",["cc","./Utils.ts"],(function(e){var n,l;return{setters:[function(e){n=e.cclegacy,l=e.assetManager},null],execute:function(){n._RF.push({},"7485f6eTHZBRY3WEU+VDhF8","CubismResources",void 0);var u,s,t=null,r=null;(s=u||(u={})).getMaskMaterial=function(){return t},s.getMaskCullingMaterial=function(){return r};e("default",u);l.loadBundle("Live2DCubismBuiltinResource",(function(e,n){null!=e?console.error(e):(n.load("Materials/Mask",(function(e,n){null!=e?console.error(e):(console.info("Initialize success."),t=n)})),n.load("Materials/MaskCulling",(function(e,n){null!=e?console.error(e):r=n})))})),n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismSerializableCurve.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismSerializableKeyFrame.ts"],(function(e){var t,r,a,i,n,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,a=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e._decorator,l=e.RealCurve},function(e){u=e.default}],execute:function(){var o,s,c,v,f;i._RF.push({},"ce38dTE2zlLBraHEsweFMM6","CubismSerializableCurve",void 0);var d=n.ccclass,p=n.property;e("default",(o=d("CubismSerializableCurve"),s=p([u]),o((f=t((v=function(){function e(e){a(this,"data",f,this),this.data=new Array(null!=e?e:0)}var t=e.prototype;return t.setKeyFrame=function(e,t){this.data[e]=t},t.toRealCurve=function(){for(var e=this.data,t=new l,r=0;r<e.length;r++){var a=e[r];({value:a.value}).value=a.value,t.addKeyFrame(a.time,a.value)}return t},e.instantiateFromJson=function(t){if(null!=t){var r=t.data;if(Array.isArray(r)){for(var a=new e(r.length),i=0;i<r.length;i++){var n=u.instantiateFromJson(r[i]);if(!n)return;a.setKeyFrame(i,n)}return a}}},r(e,[{key:"length",get:function(){return this.data.length}}]),e}()).prototype,"data",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=v))||c));i._RF.pop()}}}));

System.register("chunks:///_virtual/CubismSerializableKeyFrame.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,l,r,a,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,l=e._decorator,r=e.CCFloat,a=e.Enum,u=e.TangentWeightMode}],execute:function(){var o,h,s,g,b,c,p,f,d,m,y,v,w,T,z,W,M;n._RF.push({},"4c16fYIxLdDhKT69bCwSMoP","CubismSerializableKeyFrame",void 0);var F=l.ccclass,C=l.property;e("default",(o=F("CubismSerializableKeyFrame"),h=C(r),s=C(r),g=C(r),b=C(r),c=C(r),p=C(r),f=C({type:a(u)}),o((y=i((m=function(){function e(e,i,n,l,r,a,o){t(this,"time",y,this),t(this,"value",v,this),t(this,"inTangent",w,this),t(this,"inWeight",T,this),t(this,"outTangent",z,this),t(this,"outWeight",W,this),t(this,"weightedMode",M,this),this.time=null!=e?e:0,this.value=null!=i?i:0,this.inTangent=null!=n?n:0,this.inWeight=null!=l?l:0,this.outTangent=null!=r?r:0,this.outWeight=null!=a?a:0,this.weightedMode=null!=o?o:u.NONE}return e.instantiateFromJson=function(i){if(null!=i){var t=i.time;if(S(t)){var n=i.value;if(S(n))return new e(t,n,S(i.inTangent)?i.inTangent:void 0,S(i.inWeight)?i.inWeight:void 0,S(i.outTangent)?i.outTangent:void 0,S(i.outWeight)?i.outWeight:void 0,S(i.weightedMode)?i.weightedMode:void 0)}}},e}()).prototype,"time",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=i(m.prototype,"value",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(m.prototype,"inTangent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(m.prototype,"inWeight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(m.prototype,"outTangent",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=i(m.prototype,"outWeight",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(m.prototype,"weightedMode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.NONE}}),d=m))||d));function S(e){return"number"==typeof e}n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismShaderVariables.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){var s,a;r._RF.push({},"e78e6LLLbBHPpbTJSpLGOmc","CubismShaderVariables",void 0),(a=s||(s={})).mainTexture="mainTexture",a.modelOpacity="cubism_ModelOpacity",a.maskTexture="cubism_MaskTexture",a.maskTile="cubism_MaskTile",a.maskTransform="cubism_MaskTransform",a.multiplyColor="multiplyColor",a.screenColor="screenColor";e("default",s);r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismSortingMode.ts",["cc"],(function(r){var o;return{setters:[function(r){o=r.cclegacy}],execute:function(){o._RF.push({},"caec4DH1wlENo0aAN72hq+v","CubismSortingMode",void 0);var t=function(r){return r[r.backToFrontZ=0]="backToFrontZ",r[r.frontToBackZ=1]="frontToBackZ",r[r.backToFrontOrder=2]="backToFrontOrder",r[r.frontToBackOrder=3]="frontToBackOrder",r}(t||{});!function(r){function o(r){return r==t.backToFrontZ||r==t.frontToBackZ}r.sortByDepth=o,r.sortByOrder=function(r){return!o(r)}}(t||(t={}));r("default",t);o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismTaskableModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismCore.ts","./ArrayExtensionMethods2.ts","./CubismDynamicDrawableData.ts","./CubismTaskQueue.ts"],(function(e){var t,a,n,s,u,i;return{setters:[function(e){t=e.createClass},function(e){a=e.cclegacy},function(e){n=e.Model},function(e){s=e.default},function(e){u=e.default},function(e){i=e.default}],execute:function(){a._RF.push({},"6a9632ZhOJOFLTFrO4O7/nl","CubismTaskableModel",void 0);e("default",function(){function e(e,t,a){this._unmanagedModel=void 0,this._moc=void 0,this._dynamicDrawableData=new Array(0),this._shouldReleaseUnmanaged=void 0,this._state=o.idle,this._moc=e,this._unmanagedModel=t,this._dynamicDrawableData=a,this._shouldReleaseUnmanaged=!1}e.instantiate=function(t,a,n){return new e(t,a,n)},e.createTaskableModel=function(t){var a=t.acquireUnmanagedMoc();console.assert(null!=a);var s=n.fromMoc(a);return null==s?(console.error("Model.fromMoc() faileed."),null):new e(t,s,u.createData(s))};var a=e.prototype;return a.tryReadParameters=function(e){return null==this.unmanagedModel?(console.error("CubismTaskableModel.tryReadParameters(): unmanagedModel is null."),!1):this.state==o.executed&&(s.readFromParameters(e,this.unmanagedModel),!0)},a.tryWriteParametersAndParts=function(e,t){return null==this.unmanagedModel?(console.error("CubismTaskableModel.tryWriteParametersAndParts(): unmanagedModel is null."),!1):(s.writeToModelFromParameters(e,this.unmanagedModel),s.writeToModelFromParts(t,this.unmanagedModel),!0)},a.update=function(){this.state!=o.enqueued&&this.state!=o.executing&&(this.state=o.enqueued,i.enqueue(this))},a.updateNow=function(){return this.state!=o.enqueued&&this.state!=o.executing&&(this.state=o.enqueued,this.execute(),!0)},a.releaseUnmanaged=function(){console.info("CubismTaskableModel.releaseUnmanaged()"),this.shouldReleaseUnmanaged=!0,this.state!=o.enqueued&&this.state!=o.executing&&(this.onReleaseUnmanaged(),this.shouldReleaseUnmanaged=!1)},a.execute=function(){null!=this.unmanagedModel?(this.state=o.executing,this.unmanagedModel.update(),s.readFromArrayCubismDynamicDrawableData(this._dynamicDrawableData,this.unmanagedModel),this.state=o.executed,this.shouldReleaseUnmanaged&&this.onReleaseUnmanaged()):console.error("CubismTaskableModel.unmanagedModel is null.")},a.onReleaseUnmanaged=function(){null!=this.unmanagedModel?(this.unmanagedModel.release(),this.moc.releaseUnmanagedMoc(),this.unmanagedModel=null):console.warn("CubismTaskableModel.unmanagedModel is null.")},t(e,[{key:"unmanagedModel",get:function(){return this._unmanagedModel},set:function(e){this._unmanagedModel=e}},{key:"moc",get:function(){return this._moc},set:function(e){this._moc=e}},{key:"dynamicDrawableData",get:function(){return this._dynamicDrawableData},set:function(e){this._dynamicDrawableData=e}},{key:"isExecuting",get:function(){return this.state==o.enqueued||this.state==o.executing}},{key:"didExecute",get:function(){return this.state==o.executed}},{key:"shouldReleaseUnmanaged",get:function(){return this._shouldReleaseUnmanaged},set:function(e){this._shouldReleaseUnmanaged=e}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}}]),e}());var o=function(e){return e[e.idle=0]="idle",e[e.enqueued=1]="enqueued",e[e.executing=2]="executing",e[e.executed=3]="executed",e}(o||{});a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismTaskQueue.ts",["cc"],(function(u){var e;return{setters:[function(u){e=u.cclegacy}],execute:function(){e._RF.push({},"1f042h8xptJ+452UtUzXbDg","CubismTaskQueue",void 0),u("default",function(){function u(){}return u.enqueue=function(e){null!=u.onTask?u.onTask(e):e.execute()},u}()).onTask=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismUpdateController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ICubismUpdatable.ts","./CubismUpdateExecutionOrder.ts","./ComponentExtensionMethods2.ts"],(function(t){var e,n,o,r,i,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Component},function(t){i=t.default},function(t){a=t.default},function(t){s=t.default}],execute:function(){var u;n._RF.push({},"33421+BTy9KWLHKtaaSDRGh","CubismUpdateController",void 0);var l=o.ccclass,c=o.executeInEditMode;t("default",l("CubismUpdateController")(u=c(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this)._onLateUpdate=[],e}e(n,t);var o=n.prototype;return o.refresh=function(){var t=s.findCubismModel(this);if(null!=t){var e=t.getComponents(r).filter((function(t,e,n){return i.isImplements(t)}));a.sortByExecutionOrder(e),this._onLateUpdate=e.map((function(t,e,n){return t.bindedOnLateUpdate}))}else console.error("CubismUpdateController.refresh(): model is null.")},o.start=function(){this.refresh()},o.lateUpdate=function(t){this._onLateUpdate.forEach((function(e){e(t)}))},n}(r))||u)||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/CubismUpdateExecutionOrder.ts",["cc"],(function(O){var e;return{setters:[function(O){e=O.cclegacy}],execute:function(){var R;e._RF.push({},"8c6752MT2JFOaInF0MIV2u/","CubismUpdateExecutionOrder",void 0),function(O){O.CUBISM_MOTION_APPLIER=50,O.CUBISM_FADE_CONTROLLER=100,O.CUBISM_PARAMETER_STORE_SAVE_PARAMETERS=150,O.CUBISM_POSE_CONTROLLER=200,O.CUBISM_EXPRESSION_CONTROLLER=300,O.CUBISM_EYE_BLINK_CONTROLLER=400,O.CUBISM_MOUTH_CONTROLLER=500,O.CUBISM_HARMONIC_MOTION_CONTROLLER=600,O.CUBISM_LOOK_CONTROLLER=700,O.CUBISM_PHYSICS_CONTROLLER=800,O.CUBISM_RENDER_CONTROLLER=1e4,O.CUBISM_MASK_CONTROLLER=10100;O.sortByExecutionOrder=function(O){O.sort(R.compareByExecutionOrder)},O.compareByExecutionOrder=function(O,e){return O.executionOrder-e.executionOrder}}(R||(R={}));O("default",R);e._RF.pop()}}}));

System.register("chunks:///_virtual/CubismUserData3Json.ts",["cc","./CubismUserDataBody.ts","./CubismUserDataTargetType.ts","./JsonParseUtils.ts"],(function(t){var a,e,r,n;return{setters:[function(t){a=t.cclegacy},function(t){e=t.default},function(t){r=t.default},function(t){n=t.default}],execute:function(){a._RF.push({},"f43a4Nj3htD+I6pc1c/jZEj","CubismUserData3Json",void 0);var i=n.asNumber,s=n.asString,u=function(){function t(){this.version=0,this.meta=t.SerializableMeta.DEFAULT,this.userData=null}return t.loadFrom=function(t){var a=n.parse(t);return a?this.loadFromJson(a):null},t.loadFromJsonAsset=function(t){return t.json?this.loadFromJson(t.json):null},t.loadFromJson=function(a){var e=n.asNumber(a.Version),r=t.SerializableMeta.instantiateFromJson(a.Meta),i=n.arrayedInstantiateFromJson(a.UserData,t.SerializableUserData.instantiateFromJson);if(void 0===e||void 0===r||void 0===i)return null;var s=new t;return s.version=e,s.meta=r,s.userData=i,s},t.prototype.toBodyArray=function(t){var a=new Array;if(null!=this.userData)for(var n=0;n<this.userData.length;n++){var i=new e({id:this.userData[n].id,value:this.userData[n].value});switch(t){case r.ArtMesh:"ArtMesh"==this.userData[n].target&&a.push(i)}}return a},t}();!function(t){var a=function(){function t(t){var a,e;void 0===t&&(t={}),this.userDataCount=void 0,this.totalUserDataCount=void 0,this.userDataCount=null!=(a=t.userDataCount)?a:0,this.totalUserDataCount=null!=(e=t.totalUserDataCount)?e:0}var a=t.prototype;return a.copyWith=function(a){var e,r;return void 0===a&&(a={}),new t({userDataCount:null!=(e=a.userDataCount)?e:this.userDataCount,totalUserDataCount:null!=(r=a.totalUserDataCount)?r:this.totalUserDataCount})},a.equals=function(t){return this===t||this.userDataCount==t.userDataCount&&this.totalUserDataCount==t.totalUserDataCount},a.strictEquals=function(t){return this===t},t.instantiateFromJson=function(a){if(null!=a){var e=i(a.UserDataCount),r=i(a.TotalUserDataSize);if(void 0!==e&&void 0!==r)return new t({userDataCount:e,totalUserDataCount:r})}},t}();t.SerializableMeta=a;var e=function(){function t(t){var a,e,r;void 0===t&&(t={}),this.target=void 0,this.id=void 0,this.value=void 0,this.target=null!=(a=t.target)?a:"",this.id=null!=(e=t.id)?e:"",this.value=null!=(r=t.value)?r:""}var a=t.prototype;return a.equals=function(t){return this===t||this.target==t.target&&this.id==t.id&&this.value==t.value},a.strictEquals=function(t){return this===t},a.copyWith=function(a){var e,r,n;return void 0===a&&(a={}),new t({target:null!=(e=a.target)?e:this.target,id:null!=(r=a.id)?r:this.id,value:null!=(n=a.value)?n:this.value})},t.instantiateFromJson=function(a){if(null!=a){var e=s(a.Target),r=s(a.Id),n=s(a.Value);if(void 0!==e&&void 0!==r&&void 0!==n)return new t({target:e,id:r,value:n})}},t}();t.SerializableUserData=e,(e||(e=t.SerializableUserData||(t.SerializableUserData={}))).DEFAULT=new e,(a||(a=t.SerializableMeta||(t.SerializableMeta={}))).DEFAULT=new a}(u||(u={}));t("default",u);a._RF.pop()}}}));

System.register("chunks:///_virtual/CubismUserDataBody.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,r,u;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.initializerDefineProperty},function(i){r=i.cclegacy,u=i._decorator}],execute:function(){var a,n,l,o,s,c,d;r._RF.push({},"64b53aE7PBCO5rxHR3Px5O+","CubismUserDataBody",void 0);var v=u.ccclass,p=u.property,f=(a=v("CubismUserDataBody"),n=p({serializable:!0}),l=p({serializable:!0}),a((c=e((s=function(){function i(i){var e,r;void 0===i&&(i={}),t(this,"id",c,this),t(this,"value",d,this),this.id=null!=(e=i.id)?e:"",this.value=null!=(r=i.value)?r:""}var e=i.prototype;return e.copyWith=function(e){var t,r;return void 0===e&&(e={}),new i({id:null!=(t=e.id)?t:this.id,value:null!=(r=e.value)?r:this.value})},e.equals=function(i){return this===i||this.id==i.id&&this.value==i.value},e.strictEquals=function(i){return this===i},i}()).prototype,"id",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=e(s.prototype,"value",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=s))||o);(f||(f={})).DEFAULT=new f;i("default",f);r._RF.pop()}}}));

System.register("chunks:///_virtual/CubismUserDataTag.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismUserDataBody.ts"],(function(e){var t,i,r,n,a,o,l,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,l=e._decorator,u=e.Component},function(e){s=e.default}],execute:function(){var c,p,y,b,f,v,d,h;o._RF.push({},"9fff4+LnJBJQrtLdfLPLkKD","CubismUserDataTag",void 0);var _=l.ccclass,g=l.property;e("default",(c=_("CubismUserDataTag"),p=g({serializable:!0,visible:!1}),y=g({visible:!0,readonly:!1}),b=g({serializable:!0,visible:!1}),c((d=t((v=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"_value",d,n(t)),r(t,"_body",h,n(t)),t}return i(t,e),t.prototype.initialize=function(e){this.body=e},a(t,[{key:"value",get:function(){var e,t;null!=this._value&&""!=this._value||(this._value=null!=(e=null==(t=this.body)?void 0:t.value)?e:"");return this._value},set:function(e){this._value=e}},{key:"body",get:function(){return this._body},set:function(e){this._body=e}}]),t}(u)).prototype,"_value",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(v.prototype,"value",[y],Object.getOwnPropertyDescriptor(v.prototype,"value"),v.prototype),h=t(v.prototype,"_body",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),f=v))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/CubismUserDataTargetType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d56f1XLG7ZErqFPU9vScFh5","CubismUserDataTargetType",void 0);var r=e("default",function(e){return e[e.ArtMesh=0]="ArtMesh",e}(r||{}));t._RF.pop()}}}));

System.register("chunks:///_virtual/CubismVector.ts",["cc"],(function(t){var i,n;return{setters:[function(t){i=t.cclegacy,n=t.math}],execute:function(){var s;i._RF.push({},"95db4518PZEt5VNKMTg5MU3","CubismVector",void 0);t("CubismVector2",function(){function t(t){var i,n;void 0===t&&(t={}),this.x=void 0,this.y=void 0,this.x=null!=(i=t.x)?i:0,this.y=null!=(n=t.y)?n:0}var i=t.prototype;return i.copyWith=function(i){var n,s;return void 0===i&&(i={}),new t({x:null!=(n=i.x)?n:this.x,y:null!=(s=i.y)?s:this.y})},i.equals=function(t){return this===t||this.x===t.x&&this.y===t.y},i.strictEquals=function(t){return this===t},i.toBuiltinType=function(){return new n.Vec2(this.x,this.y)},t}());var u=t("CubismVector3",function(){var t=i.prototype;function i(t,i,n){this.x=void 0,this.y=void 0,this.z=void 0,this.x=t,this.y=i,this.z=n}return t.copyWith=function(t){var n,s,u;return void 0===t&&(t={}),new i(null!=(n=t.x)?n:this.x,null!=(s=t.y)?s:this.y,null!=(u=t.z)?u:this.z)},t.equals=function(t){return this===t||this.x===t.x&&this.y===t.y&&this.z===t.z},t.strictEquals=function(t){return this===t},t.toBuiltinType=function(){return new n.Vec3(this.x,this.y,this.z)},t.add=function(t){return new i(this.x+t.x,this.y+t.y,this.z+t.z)},t.subtract=function(t){return new i(this.x-t.x,this.y-t.y,this.z-t.z)},t.multiplySingle=function(t){return new i(this.x*t,this.y*t,this.z*t)},t.sqrMagnitude=function(){return this.x*this.x+this.y*this.y+this.z+this.z},t.magnitude=function(){return Math.sqrt(this.sqrMagnitude())},i.from=function(t){var n,s,u;return void 0===t&&(t={}),new i(null!=(n=t.x)?n:0,null!=(s=t.y)?s:0,null!=(u=t.z)?u:0)},i}());s=u,u.ZERO=new s(0,0,0);t("CubismVector4",function(){function t(t){var i,n,s,u;void 0===t&&(t={}),this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=null!=(i=t.x)?i:0,this.y=null!=(n=t.y)?n:0,this.z=null!=(s=t.z)?s:0,this.w=null!=(u=t.w)?u:0}var i=t.prototype;return i.copyWith=function(i){var n,s,u,r;return void 0===i&&(i={}),new t({x:null!=(n=i.x)?n:this.x,y:null!=(s=i.y)?s:this.y,z:null!=(u=i.z)?u:this.z,w:null!=(r=i.w)?r:this.w})},i.equals=function(t){return this===t||this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},i.strictEquals=function(t){return this===t},i.toBuiltinType=function(){return new n.Vec4(this.x,this.y,this.z,this.w)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/ICubismBlendColorHandler.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var n,l,r;t._RF.push({},"50a13ihya9Ph4ykUE3PXjrk","ICubismBlendColorHandler",void 0),l=n||(n={}),r=l.SYMBOL=Symbol("ICubismBlendColorHandler"),l.isImplements=function(e){return null!=e&&"object"==typeof e&&!!Reflect.has(e,n.SYMBOL)&&Reflect.get(e,n.SYMBOL)===r};e("default",n);t._RF.pop()}}}));

System.register("chunks:///_virtual/ICubismDrawOrderHandler.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){var t,c,n;r._RF.push({},"64982bIE7lDxYcQ0m3iwEpc","ICubismDrawOrderHandler",void 0),c=t||(t={}),n=c.SYMBOL=Symbol("ICubismDrawOrderHandler"),c.isImplements=function(e){return null!=e&&"object"==typeof e&&!!Reflect.has(e,t.SYMBOL)&&Reflect.get(e,t.SYMBOL)===n};e("default",t);r._RF.pop()}}}));

System.register("chunks:///_virtual/ICubismFadeState.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"cc878Xy3UlNyYilM4gV4k8b","ICubismFadeState",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ICubismLookTarget.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var u,o,c;t._RF.push({},"01a715rqUxKb4wfYmHTuhAN","ICubismLookTarget",void 0),o=u||(u={}),c=o.SYMBOL=Symbol("ICubismLookTarget"),o.isImplements=function(e){return null!=e&&"object"==typeof e&&!!Reflect.has(e,u.SYMBOL)&&Reflect.get(e,u.SYMBOL)===c};e("default",u);t._RF.pop()}}}));

System.register("chunks:///_virtual/ICubismMaskCommandSource.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"34d90fFM59FbLF4q5dGKAsk","ICubismMaskCommandSource",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/ICubismMaskTextureCommandSource.ts",["cc"],(function(){var e;return{setters:[function(u){e=u.cclegacy}],execute:function(){e._RF.push({},"6d537jEA99IJ7zMpYC8Hcu0","ICubismMaskTextureCommandSource",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ICubismOpacityHandler.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var c,n,u;t._RF.push({},"a2265Q9sdRDZaIQ/FaOu7eR","ICubismOpacityHandler",void 0),n=c||(c={}),u=n.SYMBOL=Symbol("ICubismOpacityHandler"),n.isImplements=function(e){return null!=e&&"object"==typeof e&&!!Reflect.has(e,c.SYMBOL)&&Reflect.get(e,c.SYMBOL)===u};e("default",c);t._RF.pop()}}}));

System.register("chunks:///_virtual/ICubismTask.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"c0e95oJvnND0ZM8t/gCWI5R","ICubismTask",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ICubismUpdatable.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var a,u,c;t._RF.push({},"2ad442Upp1MAaalC27TkkvS","ICubismUpdatable",void 0),u=a||(a={}),c=u.SYMBOL=Symbol("ICubismUpdatable"),u.isImplements=function(e){return null!=e&&"object"==typeof e&&!!Reflect.has(e,a.SYMBOL)&&Reflect.get(e,a.SYMBOL)===c};e("default",a);t._RF.pop()}}}));

System.register("chunks:///_virtual/IMaterialPicker.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d793041wkRPO6LNnB4wyzEe","IMaterialPicker",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IStructLike.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"48c7b9tqftPlZwCZG5Wsu4o","IStructLike",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/JsonParseUtils.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){var n;t._RF.push({},"888bdMEmLpK3aU6UG/XjmxD","JsonParseUtils",void 0),function(r){function t(r){return"boolean"==typeof r}function n(r){return"number"==typeof r}function e(r){return"string"==typeof r}function u(r){return"object"==typeof r&&null!=r}r.parse=function(r){try{return JSON.parse(r)}catch(r){}return null},r.isBoolean=t,r.isNumber=n,r.isString=e,r.isObject=u,r.asBoolean=function(r){return t(r)?r:void 0},r.asNumber=function(r){return n(r)?r:void 0},r.asString=function(r){return e(r)?r:void 0},r.asObject=function(r){return u(r)?r:void 0},r.asArray=function(r){return Array.isArray(r)?r:void 0},r.getBoolean=function(r,n){var e=Reflect.get(r,n);if(t(e))return e},r.getNumber=function(r,t){var e=Reflect.get(r,t);if(n(e))return e},r.getString=function(r,t){var n=Reflect.get(r,t);if(e(n))return n},r.getObject=function(r,t){var n=Reflect.get(r,t);if(u(n))return n},r.getArray=function(r,t){var n=Reflect.get(r,t);if(Array.isArray(n))return n},r.arrayedInstantiateFromJson=function(r,t){if(Array.isArray(r)){for(var n=new Array(r.length),e=0;e<r.length;e++){var u=t(r[e]);if(null==u)return;n[e]=u}return n}}}(n||(n={}));r("default",n);t._RF.pop()}}}));

System.register("chunks:///_virtual/Live2DCubismCore.js",["./cjs-loader.mjs","./javascript,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20export%20const%20__cjsMetaURL%20%3D%20'path'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20","./javascript,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20export%20const%20__cjsMetaURL%20%3D%20'fs'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20"],(function(n,e){var t,r,a;return{setters:[function(n){t=n.default},function(n){r=n.__cjsMetaURL},function(n){a=n.__cjsMetaURL}],execute:function(){n("default",void 0);var s=n("__cjsMetaURL",e.meta.url);t.define(s,(function(e,t,r,a,s){var u,o=(u="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,void 0!==a&&(u=u||a),function(n){n=void 0!==(n=n||{})?n:{};var e,r,a=Object.assign;n.ready=new Promise((function(n,t){e=n,r=t}));var o,i,c,l,f,m,p=a({},n),y="object"==typeof window,d="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b="";_?(b=d?t("path").dirname(b)+"/":s+"/",m=function(){f||(l=t("fs"),f=t("path"))},o=function(n,e){return m(),n=f.normalize(n),l.readFileSync(n,e?null:"utf8")},c=function(n){var e=o(n,!0);return e.buffer||(e=new Uint8Array(e)),e},i=function(n,e,t){m(),n=f.normalize(n),l.readFile(n,(function(n,r){n?t(n):e(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(n){if(!(n instanceof en))throw n})),process.on("unhandledRejection",(function(n){throw n})),n.inspect=function(){return"[Emscripten Module object]"}):(y||d)&&(d?b=self.location.href:"undefined"!=typeof document&&document.currentScript&&(b=document.currentScript.src),u&&(b=u),b=0!==b.indexOf("blob:")?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=function(n){var e=new XMLHttpRequest;return e.open("GET",n,!1),e.send(null),e.responseText},d&&(c=function(n){var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),i=function(n,e,t){var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?e(r.response):t()},r.onerror=t,r.send(null)});var w=n.print||console.log.bind(console),h=n.printErr||console.warn.bind(console);a(n,p),p=null,n.arguments&&n.arguments,n.thisProgram&&n.thisProgram,n.quit&&n.quit;var v,g,G,D=[];n.wasmBinary&&(g=n.wasmBinary),n.noExitRuntime,"object"!=typeof WebAssembly&&O("no native wasm support detected");var P,M,A,R,I=!1,C="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(n,e,t){for(var r=e+t,a=e;n[a]&&!(a>=r);)++a;if(a-e>16&&n.subarray&&C)return C.decode(n.subarray(e,a));for(var s="";e<a;){var u=n[e++];if(128&u){var o=63&n[e++];if(192!=(224&u)){var i=63&n[e++];if((u=224==(240&u)?(15&u)<<12|o<<6|i:(7&u)<<18|o<<12|i<<6|63&n[e++])<65536)s+=String.fromCharCode(u);else{var c=u-65536;s+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else s+=String.fromCharCode((31&u)<<6|o)}else s+=String.fromCharCode(u)}return s}function x(n,e){return n?S(A,n,e):""}function F(e){P=e,n.HEAP8=M=new Int8Array(e),n.HEAP16=new Int16Array(e),n.HEAP32=R=new Int32Array(e),n.HEAPU8=A=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=new Float32Array(e),n.HEAPF64=new Float64Array(e)}n.INITIAL_MEMORY;var j,E,U,V=[],L=[],T=[],k=0,W=null;function O(e){n.onAbort&&n.onAbort(e),h(e="Aborted("+e+")"),I=!0,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function H(n){return n.startsWith("data:application/octet-stream;base64,")}function z(n){return n.startsWith("file://")}function B(n){try{if(n==E&&g)return new Uint8Array(g);if(c)return c(n);throw"both async and sync fetching of the wasm failed"}catch(n){O(n)}}function q(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?K(r)():K(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(n)}}function K(n){return j.get(n)}function X(n,e){j.set(n,e)}function N(n){try{return G.grow(n-P.byteLength+65535>>>16),F(G.buffer),1}catch(n){}}n.preloadedImages={},n.preloadedAudios={},H(E="Live2DCubismCore.wasm")||(U=E,E=n.locateFile?n.locateFile(U,b):b+U);var Y,J={mappings:{},buffers:[null,[],[]],printChar:function(n,e){var t=J.buffers[n];0===e||10===e?((1===n?w:h)(S(t,0)),t.length=0):t.push(e)},varargs:void 0,get:function(){return J.varargs+=4,R[J.varargs-4>>2]},getStr:function(n){return x(n)},get64:function(n,e){return n}},Q={b:function(n){var e,t,r=A.length,a=2147483648;if((n>>>=0)>a)return!1;for(var s=1;s<=4;s*=2){var u=r*(1+.2/s);if(u=Math.min(u,n+100663296),N(Math.min(a,((e=Math.max(n,u))%(t=65536)>0&&(e+=t-e%t),e))))return!0}return!1},a:function(n,e,t,r){for(var a=0,s=0;s<t;s++){var u=R[e>>2],o=R[e+4>>2];e+=8;for(var i=0;i<o;i++)J.printChar(n,A[u+i]);a+=o}return R[r>>2]=a,0}},Z=(function(){var e={a:Q};function t(e,t){var r,a=e.exports;n.asm=a,F((G=n.asm.c).buffer),j=n.asm.f,r=n.asm.d,L.unshift(r),function(e){if(k--,n.monitorRunDependencies&&n.monitorRunDependencies(k),0==k&&W){var t=W;W=null,t()}}()}function a(n){t(n.instance)}function s(n){return function(){if(!g&&(y||d)){if("function"==typeof fetch&&!z(E))return fetch(E,{credentials:"same-origin"}).then((function(n){if(!n.ok)throw"failed to load wasm binary file at '"+E+"'";return n.arrayBuffer()})).catch((function(){return B(E)}));if(i)return new Promise((function(n,e){i(E,(function(e){n(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return B(E)}))}().then((function(n){return WebAssembly.instantiate(n,e)})).then((function(n){return n})).then(n,(function(n){h("failed to asynchronously prepare wasm: "+n),O(n)}))}if(k++,n.monitorRunDependencies&&n.monitorRunDependencies(k),n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(n){return h("Module.instantiateWasm callback failed with error: "+n),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||H(E)||z(E)||"function"!=typeof fetch?s(a):fetch(E,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(a,(function(n){return h("wasm streaming compile failed: "+n),h("falling back to ArrayBuffer instantiation"),s(a)}))}))).catch(r)}(),n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.d).apply(null,arguments)},n._csmGetLogFunction=function(){return(n._csmGetLogFunction=n.asm.e).apply(null,arguments)},n._csmGetVersion=function(){return(n._csmGetVersion=n.asm.g).apply(null,arguments)},n._csmGetLatestMocVersion=function(){return(n._csmGetLatestMocVersion=n.asm.h).apply(null,arguments)},n._csmGetMocVersion=function(){return(n._csmGetMocVersion=n.asm.i).apply(null,arguments)},n._csmHasMocConsistency=function(){return(n._csmHasMocConsistency=n.asm.j).apply(null,arguments)},n._csmSetLogFunction=function(){return(n._csmSetLogFunction=n.asm.k).apply(null,arguments)},n._csmReviveMocInPlace=function(){return(n._csmReviveMocInPlace=n.asm.l).apply(null,arguments)},n._csmReadCanvasInfo=function(){return(n._csmReadCanvasInfo=n.asm.m).apply(null,arguments)},n._csmGetSizeofModel=function(){return(n._csmGetSizeofModel=n.asm.n).apply(null,arguments)},n._csmInitializeModelInPlace=function(){return(n._csmInitializeModelInPlace=n.asm.o).apply(null,arguments)},n._csmUpdateModel=function(){return(n._csmUpdateModel=n.asm.p).apply(null,arguments)},n._csmGetParameterCount=function(){return(n._csmGetParameterCount=n.asm.q).apply(null,arguments)},n._csmGetParameterIds=function(){return(n._csmGetParameterIds=n.asm.r).apply(null,arguments)},n._csmGetParameterTypes=function(){return(n._csmGetParameterTypes=n.asm.s).apply(null,arguments)},n._csmGetParameterMinimumValues=function(){return(n._csmGetParameterMinimumValues=n.asm.t).apply(null,arguments)},n._csmGetParameterMaximumValues=function(){return(n._csmGetParameterMaximumValues=n.asm.u).apply(null,arguments)},n._csmGetParameterDefaultValues=function(){return(n._csmGetParameterDefaultValues=n.asm.v).apply(null,arguments)},n._csmGetParameterValues=function(){return(n._csmGetParameterValues=n.asm.w).apply(null,arguments)},n._csmGetPartCount=function(){return(n._csmGetPartCount=n.asm.x).apply(null,arguments)},n._csmGetPartIds=function(){return(n._csmGetPartIds=n.asm.y).apply(null,arguments)},n._csmGetPartOpacities=function(){return(n._csmGetPartOpacities=n.asm.z).apply(null,arguments)},n._csmGetPartParentPartIndices=function(){return(n._csmGetPartParentPartIndices=n.asm.A).apply(null,arguments)},n._csmGetDrawableCount=function(){return(n._csmGetDrawableCount=n.asm.B).apply(null,arguments)},n._csmGetDrawableIds=function(){return(n._csmGetDrawableIds=n.asm.C).apply(null,arguments)},n._csmGetDrawableConstantFlags=function(){return(n._csmGetDrawableConstantFlags=n.asm.D).apply(null,arguments)},n._csmGetDrawableDynamicFlags=function(){return(n._csmGetDrawableDynamicFlags=n.asm.E).apply(null,arguments)},n._csmGetDrawableTextureIndices=function(){return(n._csmGetDrawableTextureIndices=n.asm.F).apply(null,arguments)},n._csmGetDrawableDrawOrders=function(){return(n._csmGetDrawableDrawOrders=n.asm.G).apply(null,arguments)},n._csmGetDrawableRenderOrders=function(){return(n._csmGetDrawableRenderOrders=n.asm.H).apply(null,arguments)},n._csmGetDrawableOpacities=function(){return(n._csmGetDrawableOpacities=n.asm.I).apply(null,arguments)},n._csmGetDrawableMaskCounts=function(){return(n._csmGetDrawableMaskCounts=n.asm.J).apply(null,arguments)},n._csmGetDrawableMasks=function(){return(n._csmGetDrawableMasks=n.asm.K).apply(null,arguments)},n._csmGetDrawableVertexCounts=function(){return(n._csmGetDrawableVertexCounts=n.asm.L).apply(null,arguments)},n._csmGetDrawableVertexPositions=function(){return(n._csmGetDrawableVertexPositions=n.asm.M).apply(null,arguments)},n._csmGetDrawableVertexUvs=function(){return(n._csmGetDrawableVertexUvs=n.asm.N).apply(null,arguments)},n._csmGetDrawableIndexCounts=function(){return(n._csmGetDrawableIndexCounts=n.asm.O).apply(null,arguments)},n._csmGetDrawableIndices=function(){return(n._csmGetDrawableIndices=n.asm.P).apply(null,arguments)},n._csmGetDrawableMultiplyColors=function(){return(n._csmGetDrawableMultiplyColors=n.asm.Q).apply(null,arguments)},n._csmGetDrawableScreenColors=function(){return(n._csmGetDrawableScreenColors=n.asm.R).apply(null,arguments)},n._csmGetDrawableParentPartIndices=function(){return(n._csmGetDrawableParentPartIndices=n.asm.S).apply(null,arguments)},n._csmResetDrawableDynamicFlags=function(){return(n._csmResetDrawableDynamicFlags=n.asm.T).apply(null,arguments)},n._csmGetParameterKeyCounts=function(){return(n._csmGetParameterKeyCounts=n.asm.U).apply(null,arguments)},n._csmGetParameterKeyValues=function(){return(n._csmGetParameterKeyValues=n.asm.V).apply(null,arguments)},n._csmMallocMoc=function(){return(n._csmMallocMoc=n.asm.W).apply(null,arguments)},n._csmMallocModelAndInitialize=function(){return(n._csmMallocModelAndInitialize=n.asm.X).apply(null,arguments)},n._csmMalloc=function(){return(n._csmMalloc=n.asm.Y).apply(null,arguments)},n._csmFree=function(){return(n._csmFree=n.asm.Z).apply(null,arguments)},n.stackSave=function(){return(Z=n.stackSave=n.asm._).apply(null,arguments)}),$=n.stackRestore=function(){return($=n.stackRestore=n.asm.$).apply(null,arguments)},nn=n.stackAlloc=function(){return(nn=n.stackAlloc=n.asm.aa).apply(null,arguments)};function en(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}function tn(t){function r(){Y||(Y=!0,n.calledRun=!0,I||(q(L),e(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),T.unshift(e);var e;q(T)}()))}k>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),V.unshift(e);var e;q(V)}(),k>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),r()}),1)):r()))}if(n.ccall=function(e,t,r,a,s){var u={string:function(n){var e=0;if(null!=n&&0!==n){var t=1+(n.length<<2);!function(n,e,t){!function(n,e,t,r){if(!(r>0))return 0;for(var a=t+r-1,s=0;s<n.length;++s){var u=n.charCodeAt(s);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&n.charCodeAt(++s)),u<=127){if(t>=a)break;e[t++]=u}else if(u<=2047){if(t+1>=a)break;e[t++]=192|u>>6,e[t++]=128|63&u}else if(u<=65535){if(t+2>=a)break;e[t++]=224|u>>12,e[t++]=128|u>>6&63,e[t++]=128|63&u}else{if(t+3>=a)break;e[t++]=240|u>>18,e[t++]=128|u>>12&63,e[t++]=128|u>>6&63,e[t++]=128|63&u}}e[t]=0}(n,A,e,t)}(n,e=nn(t),t)}return e},array:function(n){var e=nn(n.length);return function(n,e){M.set(n,e)}(n,e),e}},o=function(e){return n["_"+e]}(e),i=[],c=0;if(a)for(var l=0;l<a.length;l++){var f=u[r[l]];f?(0===c&&(c=Z()),i[l]=f(a[l])):i[l]=a[l]}var m=o.apply(null,i);return m=function(n){return 0!==c&&$(c),function(n){return"string"===t?x(n):"boolean"===t?Boolean(n):n}(n)}(m)},n.UTF8ToString=x,n.addFunction=function(n,e){if(v||(v=new WeakMap,function(n,e){for(var t=n;t<n+e;t++){var r=K(t);r&&v.set(r,t)}}(0,j.length)),v.has(n))return v.get(n);var t=function(){if(D.length)return D.pop();try{j.grow(1)}catch(n){if(!(n instanceof RangeError))throw n;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return j.length-1}();try{X(t,n)}catch(r){if(!(r instanceof TypeError))throw r;X(t,function(n,e){if("function"==typeof WebAssembly.Function){for(var t={i:"i32",j:"i64",f:"f32",d:"f64"},r={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},a=1;a<e.length;++a)r.parameters.push(t[e[a]]);return new WebAssembly.Function(r,n)}var s=[1,0,1,96],u=e.slice(0,1),o=e.slice(1),i={i:127,j:126,f:125,d:124};for(s.push(o.length),a=0;a<o.length;++a)s.push(i[o[a]]);"v"==u?s.push(0):s=s.concat([1,i[u]]),s[1]=s.length-2;var c=new Uint8Array([0,97,115,109,1,0,0,0].concat(s,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),l=new WebAssembly.Module(c);return new WebAssembly.Instance(l,{e:{f:n}}).exports.f}(n,e))}return v.set(n,t),t},W=function n(){Y||tn(),Y||(W=n)},n.run=tn,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return tn(),n.ready});"object"==typeof e&&"object"==typeof r?r.exports=o:"function"==typeof define&&define.amd?define([],(function(){return o})):"object"==typeof e&&(e.Module=o),n("default",r.exports),r.exports.Module}),(function(){var n;return(n={path:r,fs:a}).path=r,n}))}}}));

System.register("chunks:///_virtual/Live2DCubismCore.mjs_cjs=&original=.js",["./Live2DCubismCore.js","./cjs-loader.mjs"],(function(e,r){var t,s;return{setters:[function(r){t=r.__cjsMetaURL;var s={};s.__cjsMetaURL=r.__cjsMetaURL,s.default=r.default,e(s)},function(e){s=e.default}],execute:function(){t||s.throwInvalidWrapper("./Live2DCubismCore.js",r.meta.url),s.require(t)}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./ArrayExtensionMethods2.ts","./ComponentExtensionMethods2.ts","./CubismCanvasInformation.ts","./CubismDrawable.ts","./CubismDynamicDrawableData.ts","./CubismGeometry.ts","./CubismMoc.ts","./CubismModel.ts","./CubismParameter.ts","./CubismPart.ts","./CubismTaskQueue.ts","./CubismTaskableModel.ts","./CubismVector.ts","./ICubismTask.ts","./CubismCore.ts","./ComponentExtensionMethods.ts","./CubismAutoEyeBlinkInput.ts","./CubismDisplayInfoParameterName.ts","./CubismDisplayInfoPartName.ts","./CubismEyeBlinkController.ts","./CubismEyeBlinkParameter.ts","./CubismHitDrawable.ts","./CubismMotionApplier.ts","./CubismParameterBlendMode.ts","./CubismParameterExtensionMethods.ts","./CubismParameterStore.ts","./CubismParametersInspector.ts","./CubismPartsInspector.ts","./CubismResources.ts","./CubismUpdateController.ts","./CubismUpdateExecutionOrder.ts","./CubismExpressionController.ts","./CubismExpressionData.ts","./CubismExpressionList.ts","./CubismPlayingExpression.ts","./CubismHarmonicMotionController.ts","./CubismHarmonicMotionDirection.ts","./CubismHarmonicMotionParameter.ts","./ICubismUpdatable.ts","./CubismBuiltinPickers.ts","./CubismDisplayInfo3Json.ts","./CubismExp3Json.ts","./CubismModel3Json.ts","./CubismMotion3Json.ts","./CubismPhysics3Json.ts","./CubismPose3Json.ts","./CubismUserData3Json.ts","./IMaterialPicker.ts","./JsonParseUtils.ts","./CubismLookAxis.ts","./CubismLookController.ts","./CubismLookParameter.ts","./CubismLookTargetBehaviour.ts","./ICubismLookTarget.ts","./CubismFadeController.ts","./CubismFadeCurveType.ts","./CubismFadeMath.ts","./CubismFadeMotionData.ts","./CubismFadeMotionList.ts","./CubismFadePlayingMotion.ts","./CubismFadeStateObserver.ts","./CubismSerializableCurve.ts","./CubismSerializableKeyFrame.ts","./ICubismFadeState.ts","./CubismAudioMouthInput.ts","./CubismAudioSamplingQuality.ts","./CubismAutoMouthInput.ts","./CubismMouthController.ts","./CubismMouthParameter.ts","./ObjectExtensionMethods.ts","./CubismPhysics.ts","./CubismPhysicsController.ts","./CubismPhysicsInput.ts","./CubismPhysicsMath.ts","./CubismPhysicsNormalization.ts","./CubismPhysicsOutput.ts","./CubismPhysicsParticle.ts","./CubismPhysicsRig.ts","./CubismPhysicsSourceComponent.ts","./CubismPhysicsSubRig.ts","./CubismPoseController.ts","./CubismPoseData.ts","./CubismPosePart.ts","./CubismRaycastHit.ts","./CubismRaycastable.ts","./CubismRaycastablePrecision.ts","./CubismRaycaster.ts","./CubismUserDataBody.ts","./CubismUserDataTag.ts","./CubismUserDataTargetType.ts","./IStructLike.ts","./Live2DCubismCore.mjs_cjs=&original=.js","./ArrayExtensionMethods.ts","./CubismBuiltinMaterials.ts","./CubismBuiltinShaders.ts","./CubismMeshPrimitive.ts","./CubismRenderController.ts","./CubismRenderer.ts","./CubismShaderVariables.ts","./CubismSortingMode.ts","./ICubismBlendColorHandler.ts","./ICubismDrawOrderHandler.ts","./ICubismOpacityHandler.ts","./CubismMaskCommandBuffer.ts","./CubismMaskController.ts","./CubismMaskMaskedJunction.ts","./CubismMaskProperties.ts","./CubismMaskRenderer.ts","./CubismMaskRendererExtensionMethods.ts","./CubismMaskTexture.ts","./CubismMaskTile.ts","./CubismMaskTilePool.ts","./CubismMaskTransform.ts","./ICubismMaskCommandSource.ts","./ICubismMaskTextureCommandSource.ts","./CubismExpressionPreview.ts","./RaycastHitDisplay.ts","./Utils.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ObjectExtensionMethods.ts",["cc"],(function(e){var n,t,r;return{setters:[function(e){n=e.cclegacy,t=e.Node,r=e.Component}],execute:function(){var o;n._RF.push({},"f8931HSXuBL3rRLHNftFIsQ","ObjectExtensionMethods",void 0),function(e){function n(e,n){if(null==e)return!1;if(n(e))return!0;if(t.isNode(e)){if(null!=e)return e.getComponents(r).some((function(e,t,r){return n(e)}))}return!1}e.getInterface=function(e,n){if(n(e))return e;if(!t.isNode(e))return null;var o=e.getComponents(r).filter((function(e,t,r){return n(e)})),u=null;return o.length>0&&(u=o[0]),null==u&&console.warn(e+" doesn't expose requested interface of type."),u},e.toNullUnlessImplementsInterface=function(e,t){var r=n(e,t);return r||console.warn(e+" doesn't expose requested interface of type."),r?e:null},e.implementsInterface=n}(o||(o={}));e("default",o);n._RF.pop()}}}));

System.register("chunks:///_virtual/RaycastHitDisplay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubismModel.ts","./CubismRaycaster.ts","./CubismRaycastHit.ts"],(function(t){var e,n,a,i,r,s,l,u,o,c,y,f,h,p,m,v,d,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,l=t._decorator,u=t.RichText,o=t.Camera,c=t.game,y=t.geometry,f=t.math,h=t.input,p=t.Input,m=t.Component},function(t){v=t.default},function(t){d=t.default},function(t){b=t.default}],execute:function(){var D,_,w,g,E,R,H,z,T,x,C;s._RF.push({},"636a5ijnj5JP4Z2stSspnkL","RaycastHitDisplay",void 0);var M=l.ccclass,k=l.property;t("RaycastHitDisplay",(D=M("RaycastHitDisplay"),_=k({type:v,serializable:!0}),w=k({type:u,serializable:!0}),g=k({serializable:!1}),E=k({type:o,serializable:!0,visible:!0}),D((z=e((H=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,a(e,"model",z,i(e)),a(e,"resultsText",T,i(e)),a(e,"_raycaster",x,i(e)),e._results=new Array(4),a(e,"_camera",C,i(e)),e._mouseDownEventData=null,e.bindedMouseDownEventHandler=e.mouseDownEventHandler.bind(i(e)),e}n(e,t);var s=e.prototype;return s.doRaycast=function(){var t=this.camera,e=this.raycaster,n=this.resultsText,a=this.results,i=this._mouseDownEventData;if(null!=t&&null!=e&&null!=n&&null!=a&&null!=i&&null!=c.canvas){i.x,c.canvas.width,i.y,c.canvas.height;var r=t.screenPointToRay(i.x,i.y,new y.Ray),s=e.raycast2(r,this.results);if(0!=s){n.string=s+"\n";for(var l=0;l<s;l++){var u=a[l].drawable;null!=u&&(n.string+=u.name+"\n")}}else n.string="0\n"}},s.start=function(){var t=this.model,e=this.resultsText,n=this.results;if(null!=t&&null!=e&&null!=n){this.raycaster=t.getComponent(d);for(var a=0;a<n.length;a++)n[a]=new b}},s.mouseDownEventHandler=function(t){this._mouseDownEventData=t.getLocation(new f.Vec2)},s.onEnable=function(){h.on(p.EventType.MOUSE_DOWN,this.bindedMouseDownEventHandler,this)},s.onDisable=function(){h.off(p.EventType.MOUSE_DOWN,this.bindedMouseDownEventHandler,this),this._mouseDownEventData=null},s.update=function(){null!=this._mouseDownEventData&&(this.doRaycast(),this._mouseDownEventData=null)},r(e,[{key:"raycaster",get:function(){return this._raycaster},set:function(t){this._raycaster=t}},{key:"results",get:function(){return this._results},set:function(t){this._results=t}},{key:"camera",get:function(){return this._camera},set:function(t){this._camera=t}}]),e}(m)).prototype,"model",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(H.prototype,"resultsText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(H.prototype,"_raycaster",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(H.prototype,"_camera",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=H))||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,o,u,i,a;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy,o=e.utils,u=e.math,i=e.geometry,a=e.game}],execute:function(){var s,c,y,x,l,f,p,v,m,d,h;e({ArrayExtensions:void 0,EditorUtils:void 0,MathExtensions:void 0,MeshExtensions:void 0,isImporter:function(){return Reflect.has(window,"AssetDB")},isNullOrEmpty:function(e){return null==e||e.length<=0}}),r._RF.push({},"e05edsDo/BLmJ+BFi/gcXXT","Utils",void 0),(c=s||(s=e("ArrayExtensions",{}))).fromVec3Array=function(e){for(var n=new Array(3*e.length),t=0;t<e.length;t++)n[3*t+0]=e[t].x,n[3*t+1]=e[t].y,n[3*t+2]=e[t].z;return n},c.isEquals=function(e,n,t){return n.length==t.length&&n.every((function(n,r,o){return e(n,t[r])}))},(y||(y=e("MeshExtensions",{}))).calculateBounds=function(e){for(var n=o.readMesh(e).positions,t={x:n[0],y:n[1],z:n[2]},r={x:t.x,y:t.y,z:t.z},a=1;a<n.length/3;a++){var s=n[3*a+0],c=n[3*a+1],y=n[3*a+2];t.x=s<t.x?s:t.x,t.y=c<t.y?c:t.y,t.z=y<t.z?y:t.z,r.x=s>r.x?s:r.x,r.y=c>r.y?c:r.y,r.z=y>r.z?y:r.z}var x={x:0,y:0,z:0};return u.Vec3.lerp(x,t,r,.5),new i.AABB(x.x,x.y,x.z,r.x-t.x,r.y-t.y,r.z-t.z)},(l=x||(x=e("MathExtensions",{}))).isPowerOfTwo=function(e){return u.nextPow2(e)==e},l.nextPowerOfTwo=function(e){return u.nextPow2(e)},l.closestPowerOfTwo=function(e){var n=u.nextPow2(e),t=n/2;return e-t<=n-e?t:n},(f||(f=l.Float||(l.Float={}))).smoothDamp=function(e,n,t,r,o,i){null!=o||(o=Number.POSITIVE_INFINITY),null!=i||(i=a.deltaTime);var s=2/(r=Math.max(1e-4,r)),c=s*i,y=1/(1+c+.48*c*c+.235*c*c*c),x=e-n,l=n,f=o*r,p=(t+s*(x=u.clamp(x,-f,f)))*i;t=(t-s*p)*y;var v=(n=e-x)+(x+p)*y;return l-e>0==v>l&&(t=((v=l)-l)/i),[v,t]},(v=p||(p=l.Vec2||(l.Vec2={}))).add=function(e,n){return new u.Vec2(e.x+n.x,e.y+n.y)},v.subtract=function(e,n){return new u.Vec2(e.x-n.x,e.y-n.y)},v.multiplySingle=function(e,n){return new u.Vec2(e.x*n,e.y*n)},v.divideSingle=function(e,n){return new u.Vec2(e.x/n,e.y/n)},v.smoothDamp=function(e,n,t,r,o,i){void 0===o&&(o=Number.POSITIVE_INFINITY),void 0===i&&(i=a.deltaTime),t=t.clone();var s=2/(r=Math.max(1e-4,r)),c=s*i,y=1/(1+c+.48*c*c+.235*c*c*c),x=e.x-n.x,l=e.y-n.y,f=n.clone(),p=o*r,v=x*x+l*l;if(v>p*p){var m=Math.sqrt(v);x=x/m*p,l=l/m*p}n.x=e.x-x,n.y=e.y-l;var d=(t.x+s*x)*i,h=(t.y+s*l)*i;t.x=(t.x-s*d)*y,t.y=(t.y-s*h)*y;var z=n.x+(x+d)*y,w=n.y+(l+h)*y,g=f.x-e.x,I=f.y-e.y;return g*(z-f.x)+I*(w-f.y)>0&&(z=f.x,w=f.y,t.x=(z-f.x)/i,t.y=(w-f.y)/i),[new u.Vec2(z,w),t]},(d=m||(m=l.Vec3||(l.Vec3={}))).subtract=function(e,n){return new u.Vec3(e.x-n.x,e.y-n.y,e.z-n.z)},d.smoothDamp=function(e,n,t,r,o,i){void 0===o&&(o=Number.POSITIVE_INFINITY),void 0===i&&(i=a.deltaTime),t=t.clone();var s=0,c=0,y=0,x=2/(r=Math.max(1e-4,r)),l=x*i,f=1/(1+l+.48*l*l+.235*l*l*l),p=e.x-n.x,v=e.y-n.y,m=e.z-n.z,d=n.clone(),h=o*r,z=p*p+v*v+m*m;if(z>h*h){var w=Math.sqrt(z);p=p/w*h,v=v/w*h,m=m/w*h}n.x=e.x-p,n.y=e.y-v,n.z=e.z-m;var g=(t.x+x*p)*i,I=(t.y+x*v)*i,V=(t.z+x*m)*i;t.x=(t.x-x*g)*f,t.y=(t.y-x*I)*f,t.z=(t.z-x*V)*f,s=n.x+(p+g)*f,c=n.y+(v+I)*f,y=n.z+(m+V)*f;var E=d.x-e.x,T=d.y-e.y,_=d.z-e.z;return E*(s-d.x)+T*(c-d.y)+_*(y-d.z)>0&&(s=d.x,c=d.y,y=d.z,t.x=(s-d.x)/i,t.y=(c-d.y)/i,t.z=(y-d.z)/i),[new u.Vec3(s,c,y),t]},function(e){function r(){return(r=n(t().mark((function e(n,r,o,u,i){var a,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Editor.Message.request("scene","query-node",n);case 2:if(a=e.sent,null!=(s=h.getComponentPath(a,r))){e.next=6;break}return e.abrupt("return");case 6:return console.info("set-property: "+s+"."+o),e.next=9,Editor.Message.request("scene","set-property",{uuid:n,path:s+"."+o,dump:{value:u,type:i}});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.getComponentPath=function(e,n){for(var t=e.__comps__,r=0;r<t.length;r++)if(t[r].value.uuid.value==n)return"__comps__."+r;return null},e.applyComponentProperty=function(e,n,t,o,u){return r.apply(this,arguments)}}(h||(h=e("EditorUtils",{}))),r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});