{"version":3,"sources":["file:///Users/sunjia/project/cocos/NewProject_1/extensions/live2d_cubismsdk_cocoscreator/static/assets/Framework/MotionFade/CubismSerializableCurve.ts"],"names":["RealCurve","_decorator","CubismSerializableKeyFrame","ccclass","property","CubismSerializableCurve","constructor","arrayLength","data","Array","length","setKeyFrame","index","value","toRealCurve","output","i","element","key","addKeyFrame","time","instantiateFromJson","src","undefined","isArray","instance","keyFrame"],"mappings":";;;;;;;;;;;;;;;;AAOSA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,U,OAAAA,U;;AACbC,MAAAA,0B;;;;AARP;AACA;AACA;AACA;AACA;AACA;;;;;OAIM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBH,U;;yBAOTI,uB,WADpBF,OAAO,CAAC,yBAAD,C,UAELC,QAAQ,CAAC,CAACF,0BAAD,CAAD,C,2BAFX,MACqBG,uBADrB,CAC6C;AAIpCC,QAAAA,WAAW,CAACC,WAAD,EAAmC;AAAA;;AACnD,eAAKC,IAAL,GAAY,IAAIC,KAAJ,CAAUF,WAAV,WAAUA,WAAV,GAAyB,CAAzB,CAAZ;AACD;;AAEgB,YAANG,MAAM,GAAG;AAClB,iBAAO,KAAKF,IAAL,CAAUE,MAAjB;AACD;;AAEMC,QAAAA,WAAW,CAACC,KAAD,EAAgBC,KAAhB,EAAmD;AACnE,eAAKL,IAAL,CAAUI,KAAV,IAAmBC,KAAnB;AACD;;AAEMC,QAAAA,WAAW,GAAc;AAC9B,cAAM;AAAEN,YAAAA;AAAF,cAAW,IAAjB;AACA,cAAMO,MAAM,GAAG,IAAIf,SAAJ,EAAf;;AACA,eAAK,IAAIgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,IAAI,CAACE,MAAzB,EAAiCM,CAAC,EAAlC,EAAsC;AACpC,gBAAMC,OAAO,GAAGT,IAAI,CAACQ,CAAD,CAApB;AACA,gBAAME,GAAuB,GAAG;AAAEL,cAAAA,KAAK,EAAEI,OAAO,CAACJ;AAAjB,aAAhC;AACAK,YAAAA,GAAG,CAACL,KAAJ,GAAYI,OAAO,CAACJ,KAApB;AACAE,YAAAA,MAAM,CAACI,WAAP,CAAmBF,OAAO,CAACG,IAA3B,EAAiCH,OAAO,CAACJ,KAAzC;AACD;;AACD,iBAAOE,MAAP;AACD;;AAEgC,eAAnBM,mBAAmB,CAACC,GAAD,EAAgD;AAC/E,cAAIA,GAAG,IAAI,IAAX,EAAiB;AACf,mBAAOC,SAAP;AACD;;AACD,cAAM;AAAEf,YAAAA;AAAF,cAAWc,GAAjB;;AACA,cAAI,CAACb,KAAK,CAACe,OAAN,CAAchB,IAAd,CAAL,EAA0B;AACxB,mBAAOe,SAAP;AACD;;AACD,cAAME,QAAQ,GAAG,IAAIpB,uBAAJ,CAA4BG,IAAI,CAACE,MAAjC,CAAjB;;AACA,eAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,IAAI,CAACE,MAAzB,EAAiCM,CAAC,EAAlC,EAAsC;AACpC,gBAAMU,QAAQ,GAAGxB,0BAA0B,CAACmB,mBAA3B,CAA+Cb,IAAI,CAACQ,CAAD,CAAnD,CAAjB;;AACA,gBAAI,CAACU,QAAL,EAAe;AACb,qBAAOH,SAAP;AACD;;AACDE,YAAAA,QAAQ,CAACd,WAAT,CAAqBK,CAArB,EAAwBU,QAAxB;AACD;;AACD,iBAAOD,QAAP;AACD;;AA7C0C,O","sourcesContent":["/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { RealCurve, _decorator } from 'cc';\r\nimport CubismSerializableKeyFrame from './CubismSerializableKeyFrame';\r\nconst { ccclass, property } = _decorator;\r\n\r\ninterface IRealKeyframeValue {\r\n  value: number;\r\n}\r\n\r\n@ccclass('CubismSerializableCurve')\r\nexport default class CubismSerializableCurve {\r\n  @property([CubismSerializableKeyFrame])\r\n  private data: CubismSerializableKeyFrame[];\r\n\r\n  public constructor(arrayLength?: number | undefined) {\r\n    this.data = new Array(arrayLength ?? 0);\r\n  }\r\n\r\n  public get length() {\r\n    return this.data.length;\r\n  }\r\n\r\n  public setKeyFrame(index: number, value: CubismSerializableKeyFrame) {\r\n    this.data[index] = value;\r\n  }\r\n\r\n  public toRealCurve(): RealCurve {\r\n    const { data } = this;\r\n    const output = new RealCurve();\r\n    for (let i = 0; i < data.length; i++) {\r\n      const element = data[i];\r\n      const key: IRealKeyframeValue = { value: element.value };\r\n      key.value = element.value;\r\n      output.addKeyFrame(element.time, element.value);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  public static instantiateFromJson(src: any): CubismSerializableCurve | undefined {\r\n    if (src == null) {\r\n      return undefined;\r\n    }\r\n    const { data } = src;\r\n    if (!Array.isArray(data)) {\r\n      return undefined;\r\n    }\r\n    const instance = new CubismSerializableCurve(data.length);\r\n    for (let i = 0; i < data.length; i++) {\r\n      const keyFrame = CubismSerializableKeyFrame.instantiateFromJson(data[i]);\r\n      if (!keyFrame) {\r\n        return undefined;\r\n      }\r\n      instance.setKeyFrame(i, keyFrame);\r\n    }\r\n    return instance;\r\n  }\r\n}\r\n"]}